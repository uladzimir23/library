АНАЛИЗ ПАПКИ: /Users/vladimirmazyrec/Documents/library/wooden
Python версия: 3.12.4
================================================================================

СТРУКТУРА ПАПОК (полные пути):
--------------------------------------------------------------------------------

wooden
    ├── components
    │   ├── components/AcousticVault.tsx
    │   ├── components/AIVisionAnalyzer.tsx
    │   ├── components/AlchemyLab.tsx
    │   ├── components/AtomicLab.tsx
    │   ├── components/AudioService.ts
    │   ├── components/ComponentConstructor.tsx
    │   ├── components/ComponentHistoryDeconstructor.tsx
    │   ├── components/DesignManifesto.tsx
    │   ├── components/EngineeringReport.tsx
    │   ├── components/ExperimentalLabs.tsx
    │   ├── components/GenesisMasterShowcase.tsx
    │   ├── components/GenesisTimeline.tsx
    │   ├── components/GlassCore.tsx
    │   ├── components/GlobalLoadMatrix.tsx
    │   ├── components/HapticPhysicsLab.tsx
    │   ├── components/IntegrationFlow.tsx
    │   ├── components/LandingBuilder.tsx
    │   ├── components/NeuralCoreLab.tsx
    │   ├── components/NeuralLatticeMap.tsx
    │   ├── components/NodalAttractionLab.tsx
    │   ├── components/NodalSpringStack.tsx
    │   ├── components/PhysicsInsights.tsx
    │   ├── components/ServicesGrid.tsx
    │   ├── components/SharedStubs.tsx
    │   ├── components/StateMorphStack.tsx
    │   ├── components/TactileMixingConsole.tsx
    │   ├── components/TechnicalPillars.tsx
    │   ├── components/TopTracks.tsx
    │   ├── components/TypographyLab.tsx
    │   ├── components/VinylCore.tsx
    │   └── components/WoodLattice.tsx
    ├── library
    │   ├── library/PrimitivesLibrary.tsx
    │   └── library/UnitShowcase.tsx
    └── App.tsx


================================================================================
СОДЕРЖИМОЕ ФАЙЛОВ:
================================================================================

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/App.tsx
название файла: wooden/App.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect, createContext, useContext } from 'react';
import { 
  HardHat, Layers, Quote, Info, Zap, Sun, Droplets, Magnet, 
  Infinity, Leaf, Flame, Terminal, Brain, FlaskConical as FlaskRound,
  Moon, Cpu, Radio, Globe, Disc, RefreshCw, Anchor, Target, Gauge, Aperture, 
  CheckCircle2, Shield, Hammer, ArrowLeft, User, LayoutGrid, Wand2, Compass,
  Activity, X, Menu, Sliders, Type, Beaker, Atom, Component, Sparkle
} from 'lucide-react';
import { LanguageContext } from '../index';
export { LanguageContext };
import { WoodLattice } from './components/WoodLattice';
import { EngineeringReport } from './components/EngineeringReport';
import { GenesisMasterShowcase } from './components/GenesisMasterShowcase';
import { GenesisTimeline } from './components/GenesisTimeline';
import { TechnicalPillars } from './components/TechnicalPillars';
import { ComponentConstructor } from './components/ComponentConstructor';
import { IntegrationFlow } from './components/IntegrationFlow';
import { DesignManifesto } from './components/DesignManifesto';
import { PhysicsInsights } from './components/PhysicsInsights';
import { NodalSpringStack } from './components/NodalSpringStack';
import { StateMorphStack } from './components/StateMorphStack';
import { ComponentHistoryDeconstructor } from './components/ComponentHistoryDeconstructor';
import { AnatomyView } from '../components/AnatomyView';
import { RefractionEngine } from '../components/RefractionEngine';
import { CausticFocus } from '../components/CausticFocus';
import { SubmergedRefraction } from '../components/SubmergedRefraction';
import { BuoyancyLab } from '../components/BuoyancyLab';
import { FluidDynamics } from '../components/FluidDynamics';
import { CapillaryFlowSync } from '../components/CapillaryFlowSync';
import { TidalWaveFlow } from '../components/TidalWaveFlow';
import { NodalAttractionLab } from './components/NodalAttractionLab';
import { GravitationalNexusHub } from '../components/GravitationalNexusHub';
import { WeightedPressureGrid } from '../components/WeightedPressureGrid';
import { QuantumEntanglementLink } from '../components/QuantumEntanglementLink';
import { QuantumFlux } from '../components/QuantumFlux';
import { QuantumSuperposition } from '../components/QuantumSuperposition';
import { BioMatterLattice } from '../components/BioMatterLattice';
import { BioMimeticMesh } from '../components/BioMimeticMesh';
import { MycelialLink } from '../components/MycelialLink';
import { RespiratoryLattice } from '../components/RespiratoryLattice';
import { ThermalExpansionCore } from '../components/ThermalExpansionCore';
import { ThermalTraceSurface } from '../components/ThermalTraceSurface';
import { SignalInterferenceBuffer } from '../components/SignalInterferenceBuffer';
import { KineticReactorDrive } from '../components/KineticReactorDrive';
import { TopologyOscilloscope } from '../components/TopologyOscilloscope';
import { StructuralLOD } from '../components/StructuralLOD';
import { NeuralDebugger } from '../components/NeuralDebugger';
import { SpectralAnalyzer } from '../components/SpectralAnalyzer';
import { NeuralCoreLab } from './components/NeuralCoreLab';
import { ExperimentalLabs } from './components/ExperimentalLabs';
import { LandingBuilder } from './components/LandingBuilder';
import { TypographyLab } from './components/TypographyLab';
import { AlchemyLab } from './components/AlchemyLab';
import { AtomicLab } from './components/AtomicLab';
import { PrimitivesLibrary } from './library/PrimitivesLibrary';
import { SectionStubGroup } from './components/SharedStubs';
import { UnitShowcase } from './library/UnitShowcase';

const playSound = (type: 'click' | 'hover') => {
  try {
    const ctx = new (window.AudioContext || (window as any).webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.connect(gain);
    gain.connect(ctx.destination);
    const now = ctx.currentTime;
    if (type === 'hover') {
      osc.frequency.setValueAtTime(880, now);
      osc.frequency.exponentialRampToValueAtTime(1200, now + 0.05);
      gain.gain.setValueAtTime(0.01, now);
      gain.gain.linearRampToValueAtTime(0, now + 0.05);
    } else {
      osc.frequency.setValueAtTime(220, now);
      gain.gain.setValueAtTime(0.05, now);
      gain.gain.linearRampToValueAtTime(0, now + 0.1);
    }
    osc.start();
    osc.stop(now + 0.1);
  } catch (e) {}
};

export type TabID = 'STATUS' | 'BUILDER' | 'GENESIS' | 'SHOWCASE_V2' | 'PRIMITIVES' | 'MANIFESTO' | 'INSIGHTS' | 'PHYSICS' | 'OPTICS' | 'WATER' | 'GRAVITY' | 'QUANTUM' | 'BIOLOGIC' | 'THERMAL' | 'SYSTEM' | 'NEURAL' | 'TYPOGRAPHY' | 'ALCHEMY' | 'ATOMS' | 'EXPERIMENTS';

export const GravityContext = createContext<{
  active: boolean;
  mass: number;
  size: number;
  mousePos: { x: number, y: number };
}>({
  active: true,
  mass: 0.5,
  size: 0.5,
  mousePos: { x: 0, y: 0 }
});

const Sidebar: React.FC<{
  activeTab: TabID;
  setActiveTab: (id: TabID) => void;
  theme: 'dark' | 'light';
  setTheme: (t: 'dark' | 'light') => void;
  lang: string;
  setLang: (l: any) => void;
  t: any;
}> = ({ activeTab, setActiveTab, theme, setTheme, lang, setLang, t }) => {
  const tabs: { id: TabID, icon: any, label: string }[] = [
    { id: 'STATUS', icon: HardHat, label: 'Инженерный Отчет' },
    { id: 'BUILDER', icon: Hammer, label: 'AI Конструктор' },
    { id: 'GENESIS', icon: Layers, label: 'Генезис Материи' },
    { id: 'SHOWCASE_V2', icon: Sparkle, label: t.sidebar.unitShowcase },
    { id: 'PRIMITIVES', icon: Component, label: t.sidebar.library },
    { id: 'ATOMS', icon: Atom, label: t.sidebar.atoms },
    { id: 'ALCHEMY', icon: Beaker, label: t.sidebar.alchemy },
    { id: 'MANIFESTO', icon: Quote, label: 'Манифест Дизайна' },
    { id: 'INSIGHTS', icon: Info, label: 'Архитектурные Инсайты' },
    { id: 'PHYSICS', icon: Zap, label: 'Кинетическая Физика' },
    { id: 'TYPOGRAPHY', icon: Type, label: t.sidebar.typography },
    { id: 'OPTICS', icon: Sun, label: 'Оптика и Рефракция' },
    { id: 'WATER', icon: Droplets, label: 'Гидростатика' },
    { id: 'GRAVITY', icon: Magnet, label: 'Гравитационные Поля' },
    { id: 'QUANTUM', icon: Infinity, label: 'Квантовые Состояния' },
    { id: 'BIOLOGIC', icon: Leaf, label: 'Биомиметика' },
    { id: 'THERMAL', icon: Flame, label: 'Тепловой След' },
    { id: 'SYSTEM', icon: Terminal, label: 'Системный Анализ' },
    { id: 'NEURAL', icon: Brain, label: 'Нейронные Связи' },
    { id: 'EXPERIMENTS', icon: FlaskRound, label: 'Эксперименты' }
  ];

  return (
    <div className="fixed left-0 top-0 bottom-0 w-24 lg:w-80 bg-surface/80 backdrop-blur-3xl border-r border-black/5 dark:border-white/5 z-[200] flex flex-col transition-all duration-700">
       <div className="p-8 flex items-center gap-4 border-b border-black/5 dark:border-white/5 h-20">
          <div className="w-10 h-10 rounded-xl bg-indigo-600 flex items-center justify-center text-white shadow-xl">
             <Activity className="w-5 h-5" />
          </div>
          <span className="hidden lg:block font-tech text-2xl font-bold tracking-tighter uppercase truncate text-text-main">Showcase_Hub</span>
       </div>

       <div className="flex-1 py-12 px-6 space-y-2 overflow-y-auto custom-scroll no-scrollbar">
          <div className="text-[9px] font-black text-zinc-500 uppercase tracking-widest mb-6 px-4">Research_Sectors</div>
          {tabs.map(tab => (
            <button 
              key={tab.id}
              onMouseEnter={() => playSound('hover')}
              onClick={() => { setActiveTab(tab.id); playSound('click'); }}
              className={`w-full flex items-center gap-6 p-4 rounded-3xl transition-all duration-500 group
                ${activeTab === tab.id 
                  ? 'bg-indigo-600 text-white shadow-2xl shadow-indigo-600/20' 
                  : 'text-zinc-500 hover:bg-black/5 dark:hover:bg-white/5 hover:text-text-main'}
              `}
            >
               <tab.icon className={`w-6 h-6 shrink-0 transition-transform ${activeTab === tab.id ? 'rotate-12 scale-110' : 'group-hover:scale-110'}`} />
               <span className="hidden lg:block text-[10px] font-bold uppercase tracking-widest truncate">{tab.label}</span>
            </button>
          ))}
       </div>

       <div className="p-6 border-t border-black/5 dark:border-white/5 space-y-6">
          <div className="flex gap-2 p-1 bg-black/5 dark:bg-white/5 rounded-2xl border border-black/5 dark:border-white/5">
             <button 
               onClick={() => setTheme('light')}
               className={`flex-1 py-3 rounded-xl flex items-center justify-center transition-all ${theme === 'light' ? 'bg-white text-zinc-950 shadow-md' : 'text-zinc-500 hover:text-zinc-900'}`}
             >
                <Sun className="w-4 h-4" />
             </button>
             <button 
               onClick={() => setTheme('dark')}
               className={`flex-1 py-3 rounded-xl flex items-center justify-center transition-all ${theme === 'dark' ? 'bg-zinc-800 text-white shadow-md' : 'text-zinc-500 hover:text-zinc-100'}`}
             >
                <Moon className="w-4 h-4" />
             </button>
          </div>

          <button 
            onClick={() => setLang(lang === 'ru' ? 'en' : 'ru')}
            className="w-full flex items-center gap-6 p-4 rounded-3xl text-zinc-500 hover:bg-indigo-600/10 hover:text-indigo-600 transition-all group"
          >
             <div className="w-6 h-6 rounded-lg bg-black/5 dark:bg-white/5 flex items-center justify-center text-[10px] font-bold">{lang}</div>
             <span className="hidden lg:block text-[10px] font-black uppercase tracking-widest">Switch_Lang</span>
          </button>
       </div>
    </div>
  );
};

const WoodenRecordApp: React.FC = () => {
  const { lang, t, setLang, theme, setTheme } = useContext(LanguageContext);
  const isDark = theme === 'dark';
  const [activeTab, setActiveTab] = useState<TabID>('STATUS');
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });

  useEffect(() => {
    const handleMouseMove = (e: MouseEvent) => setMousePos({ x: e.clientX, y: e.clientY });
    window.addEventListener('mousemove', handleMouseMove);
    return () => window.removeEventListener('mousemove', handleMouseMove);
  }, []);

  return (
    <GravityContext.Provider value={{ active: true, mass: 0.5, size: 0.5, mousePos }}>
      <div className={`min-h-screen ${isDark ? 'bg-[#030305] text-white' : 'bg-[#fdfdfe] text-black'} transition-colors duration-700 font-sans overflow-hidden flex relative`}>
        <Sidebar 
          activeTab={activeTab} 
          setActiveTab={setActiveTab} 
          theme={theme} 
          setTheme={setTheme} 
          lang={lang} 
          setLang={setLang} 
          t={t} 
        />
        <WoodLattice mousePos={mousePos} theme={theme} />
        
        <div className="flex-1 flex flex-col ml-24 lg:ml-80 transition-all duration-700 overflow-hidden">
           <header className="h-20 border-b border-black/5 dark:border-white/5 backdrop-blur-xl flex items-center justify-between px-12 z-[120]">
              <div className="flex items-center gap-6">
                 <span className="text-[10px] font-mono text-zinc-400 uppercase tracking-widest font-black">Cluster_State: </span>
                 <div className="flex items-center gap-3 px-4 py-1.5 bg-emerald-500/10 rounded-full border border-emerald-500/20">
                    <div className="w-2 h-2 bg-emerald-500 rounded-full animate-ping" />
                    <span className="text-[9px] font-black text-emerald-600 dark:text-emerald-400 uppercase tracking-widest">Observatory_Online</span>
                 </div>
              </div>

              <div className="flex items-center gap-6">
                 <div className="text-[8px] font-mono text-zinc-500 uppercase tracking-[0.4em]">Sector: {activeTab}</div>
              </div>
           </header>

           <main className="flex-1 relative overflow-y-auto no-scrollbar scroll-smooth p-8 lg:p-24">
              <div className="max-w-[1400px] mx-auto">
                 {activeTab === 'STATUS' && <EngineeringReport theme={theme} onNavigate={setActiveTab} />}
                 {activeTab === 'BUILDER' && <LandingBuilder theme={theme} />}
                 
                 {activeTab === 'GENESIS' && (
                    <div className="space-y-40">
                       <GenesisMasterShowcase theme={theme} />
                       <GenesisTimeline theme={theme} />
                       <TechnicalPillars theme={theme} />
                       <ComponentConstructor theme={theme} />
                       <IntegrationFlow theme={theme} />
                    </div>
                 )}

                 {activeTab === 'SHOWCASE_V2' && <UnitShowcase theme={theme} />}
                 {activeTab === 'PRIMITIVES' && <PrimitivesLibrary theme={theme} />}
                 {activeTab === 'ATOMS' && <AtomicLab theme={theme} />}
                 {activeTab === 'ALCHEMY' && <AlchemyLab theme={theme} />}
                 {activeTab === 'MANIFESTO' && <DesignManifesto theme={theme} />}
                 {activeTab === 'INSIGHTS' && <PhysicsInsights theme={theme} />}

                 {activeTab === 'PHYSICS' && (
                    <div className="space-y-40">
                       <NodalSpringStack theme={theme} />
                       <StateMorphStack theme={theme} />
                       <ComponentHistoryDeconstructor theme={theme} />
                    </div>
                 )}

                 {activeTab === 'TYPOGRAPHY' && <TypographyLab theme={theme} />}

                 {activeTab === 'OPTICS' && (
                    <div className="space-y-40">
                       <AnatomyView />
                       <RefractionEngine />
                       <CausticFocus />
                       <SectionStubGroup category="Optics" count={4} />
                    </div>
                 )}

                 {activeTab === 'WATER' && (
                    <div className="space-y-40">
                       <SubmergedRefraction />
                       <BuoyancyLab />
                       <FluidDynamics />
                       <CapillaryFlowSync />
                       <TidalWaveFlow />
                       <SectionStubGroup category="Hydrostatics" count={2} />
                    </div>
                 )}

                 {activeTab === 'GRAVITY' && (
                    <div className="space-y-40">
                       <NodalAttractionLab theme={theme} />
                       <GravitationalNexusHub />
                       <WeightedPressureGrid />
                       <SectionStubGroup category="Gravity" count={3} />
                    </div>
                 )}

                 {activeTab === 'QUANTUM' && (
                    <div className="space-y-40">
                       <QuantumEntanglementLink />
                       <QuantumFlux />
                       <QuantumSuperposition />
                       <SectionStubGroup category="Quantum" count={4} />
                    </div>
                 )}

                 {activeTab === 'BIOLOGIC' && (
                    <div className="space-y-40">
                       <BioMatterLattice />
                       <BioMimeticMesh />
                       <MycelialLink />
                       <RespiratoryLattice />
                       <SectionStubGroup category="Biomimetics" count={2} />
                    </div>
                 )}

                 {activeTab === 'THERMAL' && (
                    <div className="space-y-40">
                       <ThermalExpansionCore />
                       <ThermalTraceSurface />
                       <SectionStubGroup category="Thermodynamics" count={4} />
                    </div>
                 )}

                 {activeTab === 'SYSTEM' && (
                    <div className="space-y-40">
                       <SignalInterferenceBuffer />
                       <KineticReactorDrive />
                       <TopologyOscilloscope />
                       <StructuralLOD />
                       <NeuralDebugger />
                       <SectionStubGroup category="Systems" count={3} />
                    </div>
                 )}

                 {activeTab === 'NEURAL' && (
                    <div className="space-y-40">
                       <SpectralAnalyzer />
                       <NeuralCoreLab theme={theme} />
                       <SectionStubGroup category="Neural" count={6} />
                    </div>
                 )}

                 {activeTab === 'EXPERIMENTS' && <ExperimentalLabs theme={theme} />}
              </div>
           </main>
        </div>
      </div>
    </GravityContext.Provider>
  );
};

export default WoodenRecordApp;


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/AcousticVault.tsx
название файла: wooden/components/AcousticVault.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState } from 'react';
import { Lock, Unlock, ShieldCheck, Zap } from 'lucide-react';

interface Props {
  theme: 'dark' | 'light';
}

export const AcousticVault: React.FC<Props> = ({ theme }) => {
  const [isUnlocked, setIsUnlocked] = useState(false);
  const isDark = theme === 'dark';

  return (
    <div className="scroll-mt-32">
      <div className={`relative h-[650px] rounded-[64px] border overflow-hidden flex items-center justify-center group transition-all duration-1000
        ${isDark ? 'bg-black/40 border-white/5' : 'bg-white border-black/5 shadow-2xl'}
      `}>
         
         {/* THE MECHANICAL DOOR (SIDE PANELS) */}
         <div className={`absolute inset-y-0 left-0 w-1/2 border-r transition-transform duration-[1500ms] cubic-bezier(0.34, 1.56, 0.64, 1) z-40 flex items-center justify-end pr-12
           ${isDark ? 'bg-[#0a0a0a] border-white/10' : 'bg-[#fcfcfc] border-black/5'}
           ${isUnlocked ? '-translate-x-full' : 'translate-x-0'}`}>
            <div className="w-px h-24 bg-current opacity-5" />
         </div>
         <div className={`absolute inset-y-0 right-0 w-1/2 border-l transition-transform duration-[1500ms] cubic-bezier(0.34, 1.56, 0.64, 1) z-40 flex items-center justify-start pl-12
           ${isDark ? 'bg-[#0a0a0a] border-white/10' : 'bg-[#fcfcfc] border-black/5'}
           ${isUnlocked ? 'translate-x-full' : 'translate-x-0'}`}>
            <div className="w-px h-24 bg-current opacity-5" />
         </div>

         {/* CONTENT (INSIDE VAULT) */}
         <div className={`relative w-full max-w-4xl text-center space-y-12 z-10 px-8 transition-all duration-1000 ${isUnlocked ? 'opacity-100 scale-100' : 'opacity-0 scale-95 blur-xl'}`}>
            <div className="space-y-6">
               <ShieldCheck className="w-16 h-16 text-amber-500 mx-auto animate-pulse" />
               <h3 className="text-7xl font-tech font-bold uppercase tracking-tighter">Vault_Access.</h3>
               <p className={`text-lg font-light leading-relaxed max-w-sm mx-auto italic ${isDark ? 'text-zinc-500' : 'text-zinc-400'}`}>
                 Все системы откалиброваны. Терминал готов к приему входящего потока данных.
               </p>
            </div>
            
            <button 
              onClick={() => setIsUnlocked(false)}
              className="px-12 py-5 bg-amber-600 text-white rounded-full font-black text-[10px] uppercase tracking-widest shadow-xl hover:bg-amber-500 transition-all"
            >
              Seal_Structure
            </button>
         </div>

         {/* THE TRIGGER (CENTRAL LOCK) */}
         {!isUnlocked && (
           <div className="absolute z-50 flex flex-col items-center gap-8 animate-in fade-in zoom-in duration-700">
              <button 
                onClick={() => setIsUnlocked(true)}
                className={`w-40 h-40 rounded-full border shadow-2xl flex items-center justify-center transition-all hover:scale-105 active:scale-95 group/lock
                  ${isDark ? 'bg-zinc-900 border-white/10' : 'bg-white border-black/10 shadow-lg'}
                `}
              >
                 <Lock className={`w-12 h-12 text-amber-500 transition-transform duration-700 group-hover/lock:scale-110`} />
              </button>
              <div className="text-[8px] font-mono text-zinc-500 uppercase tracking-[0.8em] font-black animate-pulse">Open_Protocol</div>
           </div>
         )}

         <div className="absolute top-12 left-12 flex items-center gap-4 opacity-10">
            <Zap className="w-4 h-4" />
            <span className="text-[8px] font-mono uppercase tracking-[0.4em]">Seal: {isUnlocked ? 'OFF' : 'ON'}</span>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/AIVisionAnalyzer.tsx
название файла: wooden/components/AIVisionAnalyzer.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect } from 'react';
import { GoogleGenAI } from "@google/genai";
import { Wand2, Loader2, Sparkles, Cpu, Send, MessageSquare, Terminal, Table, CheckCircle2, Activity } from 'lucide-react';
import { playUISound } from './AudioService';

interface StructuredOutput {
  density: string;
  refraction: string;
  kinetics: string;
  blueprint_id: string;
}

export const AIVisionAnalyzer: React.FC<{ theme: 'dark' | 'light' }> = ({ theme }) => {
  const [input, setInput] = useState('');
  const [loading, setLoading] = useState(false);
  const [result, setResult] = useState<StructuredOutput | null>(null);
  const isDark = theme === 'dark';

  const analyzeVision = async () => {
    if (!input.trim() || loading) return;
    setLoading(true);
    setResult(null);
    playUISound('process');
    
    try {
      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
      const response = await ai.models.generateContent({
        model: 'gemini-3-flash-preview',
        contents: `You are a technical architect for a React UI library. Analyze this design idea: "${input}".
        Return ONLY a JSON object with these keys: density (short technical string), refraction (float as string), kinetics (description of motion), blueprint_id (hex string).`,
        config: { responseMimeType: "application/json" }
      });

      const data = JSON.parse(response.text || "{}");
      setTimeout(() => {
        setResult(data);
        playUISound('success');
        setLoading(false);
      }, 1500);
    } catch (error) {
      setLoading(false);
    }
  };

  return (
    <div className="scroll-mt-32">
      <div className="mb-12 space-y-4">
        <span className="px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
          AI_Component_Architect
        </span>
        <h2 className="text-6xl font-tech font-bold uppercase tracking-tighter leading-none text-zinc-900 dark:text-white">
          Лаборатория <br /><span className="text-indigo-500">Видения.</span>
        </h2>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-12 rounded-[48px] border overflow-hidden transition-all duration-1000 h-[550px]
        ${isDark ? 'bg-black/20 border-white/5 shadow-2xl' : 'bg-white border-black/5 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.05)]'}
      `}>
        
        {/* Input Terminal */}
        <div className={`lg:col-span-7 flex flex-col p-12 border-r ${isDark ? 'border-white/5 bg-[#0a0a0c]' : 'border-black/5 bg-zinc-50'}`}>
           <div className="flex items-center gap-3 mb-8 opacity-40">
              <Terminal className="w-4 h-4" />
              <span className="text-[10px] font-bold uppercase tracking-widest">System_Input</span>
           </div>
           
           <textarea 
              value={input}
              onChange={(e) => setInput(e.target.value)}
              placeholder="Опишите желаемый компонент: 'Полупрозрачная панель с эффектом жидкого стекла и инерционным скроллом'..."
              className={`flex-1 bg-transparent border-none outline-none resize-none text-2xl font-light placeholder:opacity-20 ${isDark ? 'text-white' : 'text-zinc-900'}`}
           />

           <button 
             onClick={analyzeVision}
             disabled={loading || !input.trim()}
             className={`w-full py-6 rounded-2xl font-black text-xs uppercase tracking-[0.4em] transition-all flex items-center justify-center gap-4 shadow-xl disabled:opacity-20
               ${isDark ? 'bg-indigo-600 text-white hover:bg-indigo-500' : 'bg-zinc-900 text-white hover:bg-black'}
             `}
           >
             {loading ? <Loader2 className="w-5 h-5 animate-spin" /> : <Wand2 className="w-5 h-5" />}
             Synthesize_Blueprint
           </button>
        </div>

        {/* Structured Output Area */}
        <div className={`lg:col-span-5 flex flex-col relative h-full ${isDark ? 'bg-white/[0.02]' : 'bg-white'}`}>
           {loading && (
              <div className="absolute inset-x-0 h-[2px] bg-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.8)] animate-scan z-50 pointer-events-none" />
           )}

           <div className="p-12 flex-1 flex flex-col">
              <div className="flex items-center gap-3 mb-10 opacity-40">
                 <Table className="w-4 h-4" />
                 <span className="text-[10px] font-bold uppercase tracking-widest">Analysis_Result</span>
              </div>

              {result ? (
                <div className="space-y-8 animate-in fade-in zoom-in-95 duration-500">
                   <div className="space-y-4">
                      {[
                        { label: 'Density', val: result.density, icon: Cpu },
                        { label: 'Refraction', val: result.refraction + 'n', icon: Sparkles },
                        { label: 'Kinetics', val: result.kinetics, icon: Activity },
                        { label: 'Asset_ID', val: result.blueprint_id, icon: CheckCircle2 }
                      ].map((item, i) => (
                        <div key={i} className={`flex items-center justify-between p-4 rounded-2xl border transition-all ${isDark ? 'bg-white/5 border-white/5' : 'bg-zinc-50 border-black/5'}`}>
                           <div className="flex items-center gap-4">
                              <item.icon className="w-4 h-4 text-indigo-500" />
                              <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">{item.label}</span>
                           </div>
                           <span className={`text-xs font-bold uppercase tracking-tight ${isDark ? 'text-white' : 'text-zinc-900'}`}>{item.val}</span>
                        </div>
                      ))}
                   </div>
                </div>
              ) : (
                <div className="flex-1 flex flex-col items-center justify-center text-center opacity-10 italic">
                   <MessageSquare className="w-12 h-12 mb-4" />
                   <p className="text-sm uppercase tracking-widest">Awaiting neural input stream...</p>
                </div>
              )}
           </div>
        </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/AlchemyLab.tsx
название файла: wooden/components/AlchemyLab.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect } from 'react';
import { 
  Beaker, Sparkles, Droplet, Zap, 
  Layers, Target, Sliders, Activity, 
  RefreshCw, Disc, Cpu, Shield, 
  Wind, Hammer, Terminal, Gauge,
  Sun, Maximize2, AlertTriangle, Eye,
  Search, Binary, Radio
} from 'lucide-react';
import { playUISound } from './AudioService';

type MaterialType = 'GLASS' | 'CHROME' | 'CARBON' | 'WAX';

export const AlchemyLab: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';

  return (
    <div className="animate-in fade-in duration-1000 space-y-40 pb-40">
      {/* Intro Header */}
      <div className="text-center space-y-8">
         <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 text-[9px] font-bold uppercase tracking-[0.5em]">
            <Beaker className="w-3 h-3" /> Matter_Alchemy_v4.2
         </div>
         <h2 className="text-8xl font-tech font-bold uppercase text-zinc-900 dark:text-white leading-none tracking-tighter">
            Алхимия <br /><span className="text-emerald-500">Поверхности.</span>
         </h2>
         <p className="max-w-2xl mx-auto text-xl font-light opacity-60">
            Исследование молекулярного состава интерфейса. Мы не просто меняем цвета — мы трансформируем структуру вещества, управляя его плотностью, отражающей способностью и тактильным трением.
         </p>
      </div>

      {/* 01. Transmutation Engine */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">01_ Transmutation Engine</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Фазовый переход. Мгновенная перестройка кристаллической решетки объекта."</p>
         </div>
         <TransmutationVisualizer isDark={isDark} />
      </section>

      {/* 02. Subsurface Scattering */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">02_ Subsurface Glow</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Внутренняя энергия. Рассеивание фотонов данных внутри полупрозрачной среды."</p>
         </div>
         <SubsurfaceVisualizer isDark={isDark} />
      </section>

      {/* 03. Surface Friction */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">03_ Micro-Friction Texture</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Тактильный шум. Визуализация сопротивления материала при взаимодействии."</p>
         </div>
         <FrictionVisualizer isDark={isDark} />
      </section>

      {/* 04. Molecular Density */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">04_ Density Calibration</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Гравитационный вес. Управление массой через глубину блюра и массу теней."</p>
         </div>
         <DensityVisualizer isDark={isDark} />
      </section>
    </div>
  );
};

const TransmutationVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [material, setMaterial] = useState<MaterialType>('GLASS');
  const [isMorphing, setIsMorphing] = useState(false);

  const morphTo = (m: MaterialType) => {
    if (m === material || isMorphing) return;
    setIsMorphing(true);
    playUISound('process');
    setTimeout(() => {
      setMaterial(m);
      setIsMorphing(false);
      playUISound('success');
    }, 1200);
  };

  const matStyles = {
    GLASS: { blur: 'backdrop-blur-3xl', bg: 'bg-white/5', border: 'border-white/20', color: 'text-sky-400', icon: Layers, label: 'Frosted_Lattice' },
    CHROME: { blur: 'backdrop-blur-md', bg: 'bg-zinc-200/20 dark:bg-zinc-100/10', border: 'border-white/40', color: 'text-indigo-400', icon: Disc, label: 'Specular_Reflect' },
    CARBON: { blur: 'backdrop-blur-none', bg: 'bg-zinc-900', border: 'border-zinc-700', color: 'text-emerald-500', icon: Cpu, label: 'Composite_Weave' },
    WAX: { blur: 'backdrop-blur-xl', bg: 'bg-amber-500/10', border: 'border-amber-500/20', color: 'text-amber-500', icon: Droplet, label: 'Organic_Paraffin' }
  };

  const current = matStyles[material];

  return (
    <div className={`relative h-[700px] rounded-[64px] border overflow-hidden flex flex-col lg:flex-row transition-all duration-1000
      ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-white border-black/5'}
    `}>
       <div className="w-full lg:w-80 border-r border-white/5 p-12 space-y-8 bg-panel/30 backdrop-blur-xl shrink-0">
          <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Material_Fleet</div>
          <div className="grid grid-cols-1 gap-3">
             {(['GLASS', 'CHROME', 'CARBON', 'WAX'] as MaterialType[]).map(m => (
               <button 
                 key={m}
                 onClick={() => morphTo(m)}
                 className={`p-6 rounded-[32px] border transition-all duration-700 flex items-center justify-between group
                   ${material === m ? 'bg-indigo-600 border-indigo-400 text-white shadow-xl translate-x-2' : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10'}
                 `}
               >
                  <span className="text-[10px] font-black uppercase tracking-widest">{m}</span>
                  {material === m && <RefreshCw className="w-4 h-4 animate-spin-slow" />}
               </button>
             ))}
          </div>
          
          <div className="pt-10 border-t border-white/5 space-y-4">
             <div className="flex items-center gap-3 text-emerald-500">
                <Activity className="w-4 h-4 animate-pulse" />
                <span className="text-[9px] font-bold uppercase tracking-widest">Coherence_Sync</span>
             </div>
             <div className="text-xl font-tech font-bold text-text-main uppercase tracking-widest">
               {isMorphing ? 'RESTRUCTURING' : 'STABLE_0x88'}
             </div>
          </div>
       </div>

       <div className="flex-1 relative overflow-hidden flex items-center justify-center p-12 bg-[#020203] group">
          {isMorphing && (
             <div className="absolute inset-0 z-50 pointer-events-none overflow-hidden">
                <div className="w-full h-full bg-indigo-500/5 animate-pulse" />
                <div className="absolute top-0 left-0 w-full h-[2px] bg-indigo-500 shadow-[0_0_20px_#6366f1] animate-[scan_1.2s_linear_infinite]" />
             </div>
          )}

          <div className={`absolute inset-0 transition-opacity duration-1000 ${isMorphing ? 'opacity-40' : 'opacity-10'}`} 
               style={{ background: `radial-gradient(circle at center, #6366f1 0%, transparent 70%)` }} />
          
          <div 
            className={`relative w-80 h-96 transition-all duration-1000 ease-out border-2 flex flex-col items-center justify-center p-12 overflow-hidden shadow-2xl
              ${current.blur} ${current.bg} ${current.border}
              ${isMorphing ? 'scale-90 blur-2xl opacity-50 rotate-6 skew-x-12' : 'scale-100 blur-0 opacity-100 rotate-0'}
            `}
            style={{ borderRadius: material === 'CARBON' ? '0px' : material === 'GLASS' ? '80px' : '48px' }}
          >
             {material === 'CARBON' && (
               <div className="absolute inset-0 opacity-[0.1] pointer-events-none" style={{ backgroundImage: 'linear-gradient(45deg, #fff 1px, transparent 1px), linear-gradient(-45deg, #fff 1px, transparent 1px)', backgroundSize: '12px 12px' }} />
             )}
             
             <div className={`w-24 h-24 rounded-[40px] bg-zinc-900 border border-white/10 flex items-center justify-center mb-8 shadow-2xl transition-transform duration-1000 ${isMorphing ? 'rotate-[360deg]' : ''}`}>
                <current.icon className={`w-12 h-12 ${current.color}`} />
             </div>
             
             <div className="text-center relative z-10">
                <div className="text-[10px] font-mono opacity-40 uppercase tracking-[0.5em] mb-2 text-white">Matter_ID: {material}</div>
                <div className="text-3xl font-tech font-bold text-white uppercase tracking-tighter leading-none">{current.label}</div>
             </div>
             <div className="absolute inset-0 border-t border-l border-white/20 rounded-[inherit] pointer-events-none" />
          </div>

          <div className="absolute bottom-12 right-12 text-right">
             <div className="text-[10px] font-mono text-zinc-600 uppercase tracking-widest font-black mb-1">State_Synthesis: OK</div>
             <div className="text-[8px] font-mono text-zinc-800 uppercase">Phase_Calibration_v4</div>
          </div>
       </div>
    </div>
  );
};

const SubsurfaceVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [absorption, setAbsorption] = useState(0.45);
  const [glow, setGlow] = useState(0.6);
  const [mousePos, setMousePos] = useState({ x: 50, y: 50 });
  const containerRef = useRef<HTMLDivElement>(null);

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!containerRef.current) return;
    const rect = containerRef.current.getBoundingClientRect();
    setMousePos({
      x: ((e.clientX - rect.left) / rect.width) * 100,
      y: ((e.clientY - rect.top) / rect.height) * 100
    });
  };

  return (
    <div className={`relative h-[650px] rounded-[64px] border overflow-hidden flex flex-col lg:flex-row transition-all duration-1000
      ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-50 border-black/5'}
    `}>
       <div className="w-full lg:w-80 border-r border-white/5 p-12 space-y-12 bg-panel/30 shrink-0">
          <div className="space-y-4">
             <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">
                <span>Absorption</span>
                <span className="text-emerald-500">{(absorption * 100).toFixed(0)}%</span>
             </div>
             <input type="range" min="0.1" max="0.9" step="0.01" value={absorption} onChange={e => { setAbsorption(parseFloat(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-emerald-500" />
          </div>
          <div className="space-y-4">
             <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">
                <span>Core_Glow</span>
                <span className="text-emerald-500">{(glow * 100).toFixed(0)}%</span>
             </div>
             <input type="range" min="0.1" max="1" step="0.01" value={glow} onChange={e => { setGlow(parseFloat(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-emerald-500" />
          </div>
          <div className="pt-10 border-t border-white/10">
             <div className="flex items-center gap-3 text-emerald-500 mb-2">
                <Target className="w-4 h-4" />
                <span className="text-[9px] font-bold uppercase tracking-widest">Ray_Scanner</span>
             </div>
             <div className="text-xl font-tech font-bold text-text-main">INTERNAL_PHI</div>
          </div>
       </div>

       <div 
         ref={containerRef}
         onMouseMove={handleMouseMove}
         className="flex-1 relative overflow-hidden flex items-center justify-center p-12 bg-[#020504] cursor-crosshair"
       >
          <div className="absolute inset-0 opacity-[0.05] pointer-events-none" style={{ backgroundImage: 'radial-gradient(#10b981 1px, transparent 1px)', backgroundSize: '60px 60px' }} />
          
          <div className="relative w-80 h-96 transition-transform duration-700 ease-out preserve-3d">
             <div 
               className="absolute inset-0 bg-white/[0.05] border-2 border-white/15 rounded-[64px] backdrop-blur-3xl shadow-2xl z-20 flex items-center justify-center"
               style={{ transform: `rotateX(${(mousePos.y - 50) * -0.2}deg) rotateY(${(mousePos.x - 50) * 0.2}deg)` }}
             >
                <div className="text-center opacity-30 group-hover:opacity-100 transition-opacity">
                   <Shield className="w-16 h-16 text-white mb-6 mx-auto" />
                   <div className="text-[10px] font-mono text-white uppercase tracking-[0.5em]">Matter_Core</div>
                </div>
             </div>

             <div 
                className="absolute w-64 h-64 rounded-full blur-[100px] transition-all duration-300 z-10"
                style={{ 
                   left: `${mousePos.x}%`,
                   top: `${mousePos.y}%`,
                   background: `radial-gradient(circle, #10b981 0%, transparent 70%)`,
                   opacity: glow * (1.1 - absorption),
                   transform: `translate(-50%, -50%) scale(${1 + glow * 0.4})`,
                   filter: `blur(${40 + absorption * 120}px)`
                }}
             />
          </div>

          <div className="absolute bottom-12 right-12 flex items-center gap-4">
             <Activity className="w-4 h-4 text-emerald-500 animate-pulse" />
             <span className="text-[10px] font-mono text-zinc-700 uppercase tracking-widest">Ray_Diffusion_Buffer: ACTIVE</span>
          </div>
       </div>
    </div>
  );
};

const FrictionVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [roughness, setRoughness] = useState(0.3);
  const [mousePos, setMousePos] = useState({ x: 50, y: 50 });
  const [isHovered, setIsHovered] = useState(false);
  const containerRef = useRef<HTMLDivElement>(null);

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!containerRef.current) return;
    const rect = containerRef.current.getBoundingClientRect();
    setMousePos({
      x: ((e.clientX - rect.left) / rect.width) * 100,
      y: ((e.clientY - rect.top) / rect.height) * 100
    });
  };

  return (
    <div 
      ref={containerRef}
      onMouseMove={handleMouseMove}
      onMouseEnter={() => { setIsHovered(true); playUISound('hover'); }}
      onMouseLeave={() => setIsHovered(false)}
      className={`relative h-[650px] rounded-[64px] border overflow-hidden flex flex-col lg:flex-row transition-all duration-1000
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-white border-black/5'}
      `}
    >
       <div className="w-full lg:w-80 border-r border-white/5 p-12 space-y-12 bg-panel/30 shrink-0">
          <div className="space-y-4">
             <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">
                <span>Roughness</span>
                <span className="text-amber-500">{(roughness * 100).toFixed(0)}%</span>
             </div>
             <input type="range" min="0" max="1" step="0.01" value={roughness} onChange={e => { setRoughness(parseFloat(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-amber-500" />
          </div>
          <div className="p-6 bg-black/40 border border-white/5 rounded-3xl space-y-3">
             <div className="flex items-center gap-2 text-amber-500">
                <Wind className="w-4 h-4" />
                <span className="text-[9px] font-bold uppercase">Micro_Resistance</span>
             </div>
             <div className="text-2xl font-tech font-bold text-white">{(roughness * 1.42).toFixed(3)}_Mu</div>
          </div>
       </div>

       <div className="flex-1 relative overflow-hidden flex items-center justify-center p-12 bg-black cursor-none">
          <div 
            className="absolute inset-0 opacity-[0.08] pointer-events-none mix-blend-screen"
            style={{ 
               backgroundImage: 'url("https://grainy-gradients.vercel.app/noise.svg")',
               filter: `contrast(${1 + roughness * 4}) brightness(${1 + roughness})`,
               backgroundSize: '120px 120px'
            }}
          />
          
          <div 
             className={`relative w-full max-w-2xl h-80 bg-zinc-900/60 border border-white/10 rounded-[56px] overflow-hidden backdrop-blur-3xl shadow-2xl flex items-center justify-center transition-all duration-500
                ${isHovered ? 'scale-105 border-amber-500/30' : 'scale-100'}
             `}
             style={{ boxShadow: `inset 0 0 ${roughness * 120}px rgba(245, 158, 11, ${roughness * 0.15})` }}
          >
             <h4 className="text-6xl md:text-8xl font-tech font-black text-white/5 uppercase tracking-[0.6em] select-none">TACTILE</h4>
             
             <div className="absolute inset-0 pointer-events-none overflow-hidden">
                {[...Array(8)].map((_, i) => (
                  <div 
                    key={i}
                    className="absolute w-1.5 h-1.5 bg-amber-400 rounded-full animate-ping opacity-0 group-hover:opacity-60"
                    style={{ 
                       left: `${mousePos.x + (Math.random()-0.5) * 8}%`, 
                       top: `${mousePos.y + (Math.random()-0.5) * 8}%`,
                       animationDelay: `${i * 0.12}s`,
                       display: roughness > 0.4 ? 'block' : 'none'
                    }}
                  />
                ))}
             </div>
          </div>

          <div 
             className="absolute w-16 h-16 border-2 border-amber-500/40 rounded-full pointer-events-none flex items-center justify-center transition-transform duration-75"
             style={{ left: `${mousePos.x}%`, top: `${mousePos.y}%`, transform: 'translate(-50%, -50%)' }}
          >
             <div className="w-1 h-1 bg-white rounded-full shadow-[0_0_15px_#fff] animate-pulse" />
             <div className="absolute inset-[-10px] border border-amber-500/10 rounded-full animate-spin-slow" />
          </div>
       </div>
    </div>
  );
};

const DensityVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [mass, setMass] = useState(1.0);
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });
  const [isDragging, setIsDragging] = useState(false);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width - 0.5;
    const y = (e.clientY - rect.top) / rect.height - 0.5;
    setMousePos({ x, y });
  };

  return (
    <div className={`relative h-[700px] rounded-[64px] border overflow-hidden flex flex-col lg:flex-row transition-all duration-1000
      ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-50 border-black/5 shadow-inner'}
    `}>
       <div className="w-full lg:w-80 border-r border-white/5 p-12 space-y-12 bg-panel/30 shrink-0">
          <div className="space-y-6">
             <div className="space-y-4">
                <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">
                   <span>Mass_Weight</span>
                   <span className="text-rose-500">{mass.toFixed(2)} KG</span>
                </div>
                <input type="range" min="0.1" max="5.0" step="0.1" value={mass} onChange={e => { setMass(parseFloat(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-rose-500" />
             </div>
             
             <div className={`p-8 rounded-[36px] border transition-all duration-700 ${mass > 4 ? 'bg-rose-600 border-rose-400 text-white animate-pulse' : 'bg-white/5 border-white/10 text-zinc-500'}`}>
                <div className="flex items-center gap-3 mb-2">
                   <Gauge className="w-5 h-5" />
                   <span className="text-[10px] font-bold uppercase tracking-widest">Gravity_Bias</span>
                </div>
                <div className="text-3xl font-tech font-bold uppercase tracking-tighter">
                   {mass > 4 ? 'CRITICAL' : mass > 2 ? 'HEAVY' : 'AETHER'}
                </div>
             </div>
          </div>
          <div className="mt-auto opacity-20">
             <div className="text-[8px] font-mono uppercase tracking-[0.5em] text-zinc-700">Atomic_Stability_Check: OK</div>
          </div>
       </div>

       <div 
         onMouseMove={handleMouseMove}
         onMouseDown={() => setIsDragging(true)}
         onMouseUp={() => setIsDragging(false)}
         onMouseLeave={() => { setMousePos({x:0, y:0}); setIsDragging(false); }}
         className="flex-1 relative overflow-hidden flex items-center justify-center p-12 bg-[#050505] cursor-grab active:cursor-grabbing"
       >
          <div className="absolute inset-0 opacity-[0.03] transition-transform duration-1000" 
               style={{ 
                 backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', 
                 backgroundSize: '60px 60px',
                 transform: `scale(${1 + mass * 0.05}) translate(${mousePos.x * 20}px, ${mousePos.y * 20}px)`
               }} />
          
          <div 
            className={`relative w-80 h-96 transition-all duration-700 ease-out border-2 shadow-2xl flex flex-col items-center justify-center p-12 overflow-hidden
               ${isDragging ? 'scale-95' : 'scale-100'}
            `}
            style={{ 
               backgroundColor: `rgba(255, 255, 255, ${0.02 + mass * 0.03})`,
               backdropFilter: `blur(${mass * 15}px)`,
               borderColor: `rgba(244, 63, 94, ${0.1 + mass * 0.15})`,
               borderRadius: `${48 - mass * 4}px`,
               transform: `translate(${mousePos.x * (150 / mass)}px, ${mousePos.y * (150 / mass)}px) rotateX(${(mousePos.y * -20) / mass}deg) rotateY(${(mousePos.x * 20) / mass}deg)`,
               boxShadow: `0 ${30 + mass * 20}px ${60 + mass * 40}px -20px rgba(0,0,0,0.8)`
            }}
          >
             <div className={`w-24 h-24 rounded-full transition-all duration-700 flex items-center justify-center
                ${mass > 3 ? 'bg-rose-600 shadow-[0_0_60px_rgba(244,63,94,0.5)]' : 'bg-zinc-900 text-zinc-700'}
             `}>
                {mass > 4 ? <AlertTriangle className="w-12 h-12 text-white animate-bounce" /> : <Hammer className={`w-12 h-12 ${mass > 2.5 ? 'text-rose-400' : ''}`} />}
             </div>
             
             <div className="mt-10 text-center">
                <div className="text-[10px] font-mono opacity-40 uppercase tracking-[0.5em] mb-2 text-white">Weight_Units</div>
                <div className="text-4xl font-tech font-bold text-white uppercase tracking-widest">
                  {mass.toFixed(3)}<span className="text-xs opacity-20 ml-2">P_U</span>
                </div>
             </div>
             <div className="absolute inset-0 border-t border-l border-white/20 rounded-[inherit] pointer-events-none opacity-40" />
          </div>

          {/* HUD Marker */}
          <div className="absolute top-12 left-12 flex items-center gap-4 text-rose-500/40">
             <Eye className="w-5 h-5" />
             <span className="text-[10px] font-mono uppercase tracking-[0.5em]">Mass_Occlusion_Sim</span>
          </div>
       </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/AtomicLab.tsx
название файла: wooden/components/AtomicLab.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useRef, useEffect } from 'react';
import { 
  Atom, Sliders, Zap, MousePointer2, RefreshCw, 
  Layers, Sliders as SlidersIcon, Shield, Box, 
  Activity, Gauge, Target, Sparkles, Wand2,
  ChevronRight, ArrowRight, Loader2, Fingerprint,
  Mail, Search, Command, Layout, Component, Type,
  Cpu, Waves, Wind, AlertTriangle, Radio, Terminal,
  User, Bell, CreditCard, CheckCircle2, Check,
  MoreHorizontal, Share2, Info, ChevronLeft,
  Square, Circle, Play, Pause
} from 'lucide-react';
import { LanguageContext } from '../App';
import { playUISound } from './AudioService';
import { GoogleGenAI } from "@google/genai";

type UnitID = 
  | 'BUTTON' | 'INPUT' | 'BADGE' | 'TOGGLE' | 'SLIDER' | 'PROGRESS' | 'SEGMENT' | 'CHECKBOX'
  | 'AUTH_FORM' | 'SEARCH_BAR' | 'DATA_CARD' | 'PROFILE_CARD' | 'NOTIF_TOAST' | 'PRICING_TABLE';

interface AtomicPhysics {
  blur: number;
  mass: number;
  refraction: number;
  radius: number;
  hue: number;
  aberration: number;
  jitter: number;
  noise: number;
}

export const AtomicLab: React.FC<{ theme: string }> = ({ theme }) => {
  const { t, lang } = useContext(LanguageContext);
  const isDark = theme === 'dark';
  const [activeUnit, setActiveUnit] = useState<UnitID>('BUTTON');
  const [physics, setPhysics] = useState<AtomicPhysics>({
    blur: 24,
    mass: 1.0,
    refraction: 0.1,
    radius: 48,
    hue: 240,
    aberration: 0,
    jitter: 0,
    noise: 0.05
  });
  const [isSynthesizing, setIsSynthesizing] = useState(false);
  const [isPressed, setIsPressed] = useState(false);
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });
  const containerRef = useRef<HTMLDivElement>(null);

  // States for interactive primitives
  const [val, setVal] = useState(65);
  const [toggle, setToggle] = useState(false);
  const [activeSegment, setActiveSegment] = useState(0);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = containerRef.current?.getBoundingClientRect();
    if (rect) {
      setMousePos({
        x: (e.clientX - rect.left) / rect.width - 0.5,
        y: (e.clientY - rect.top) / rect.height - 0.5
      });
    }
  };

  const runAISynthesis = async () => {
    setIsSynthesizing(true);
    playUISound('process');
    try {
      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
      const response = await ai.models.generateContent({
        model: 'gemini-3-flash-preview',
        contents: `Suggest physical parameters for a UI unit: "${activeUnit}". 
        Logic goals: Make it feel tactile, heavy but responsive.
        Return ONLY JSON with keys: blur (0-64), mass (0.1-2.0), refraction (0-1), radius (0-100), hue (0-360), aberration (0-40), jitter (0-10), noise (0-0.2).`,
        config: { responseMimeType: "application/json" }
      });
      const data = JSON.parse(response.text || "{}");
      setPhysics(prev => ({ ...prev, ...data }));
      playUISound('success');
    } catch (e) {
      console.error(e);
    } finally {
      setIsSynthesizing(false);
    }
  };

  const renderUnit = () => {
    const jitterX = (Math.random() - 0.5) * physics.jitter;
    const jitterY = (Math.random() - 0.5) * physics.jitter;

    const baseStyle = {
      backdropFilter: `blur(${physics.blur}px)`,
      borderRadius: `${physics.radius}px`,
      transform: `rotateX(${mousePos.y * 20}deg) rotateY(${mousePos.x * 20}deg) translate(${jitterX}px, ${jitterY}px) ${isPressed ? 'scale(0.95)' : 'scale(1)'}`,
      transition: isPressed ? 'none' : 'transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), border-radius 0.6s ease',
    };

    const coreColor = `hsla(${physics.hue}, 100%, 50%, ${physics.refraction})`;
    const aberrationShift = physics.aberration;

    const renderContent = () => {
      switch(activeUnit) {
        case 'BUTTON':
          return (
            <button 
              onMouseDown={() => { setIsPressed(true); playUISound('click'); }}
              onMouseUp={() => setIsPressed(false)}
              className="px-16 py-8 text-white font-tech font-bold uppercase tracking-[0.4em] relative group overflow-hidden border-2"
              style={{ ...baseStyle, backgroundColor: coreColor, borderColor: `hsla(${physics.hue}, 100%, 70%, 0.2)` }}
            >
              <span className="relative z-10">Initialize_Unit</span>
              <div className="absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity" />
            </button>
          );
        case 'INPUT':
          return (
            <div className="w-full max-w-md space-y-4" style={baseStyle}>
               <div className="p-2 bg-black/40 rounded-[inherit] border border-white/10 relative group overflow-hidden" style={{ backgroundColor: coreColor }}>
                  <input type="text" placeholder="System_Query_..." className="w-full bg-transparent border-none outline-none p-6 text-xl font-light text-white placeholder:opacity-20" />
                  <div className="absolute right-6 top-1/2 -translate-y-1/2 w-10 h-10 bg-indigo-600 rounded-2xl flex items-center justify-center text-white"><Target className="w-5 h-5" /></div>
               </div>
            </div>
          );
        case 'BADGE':
          return (
            <div className="px-6 py-2 border-2 text-[10px] font-black uppercase tracking-[0.3em] text-white flex items-center gap-3" style={{ ...baseStyle, backgroundColor: coreColor, borderColor: `hsla(${physics.hue}, 100%, 70%, 0.3)` }}>
               <div className="w-1.5 h-1.5 rounded-full bg-current animate-pulse" />
               Critical_Tag_v1
            </div>
          );
        case 'TOGGLE':
          return (
            <div onClick={() => { setToggle(!toggle); playUISound('click'); }} className={`w-32 h-16 rounded-full p-2 cursor-pointer transition-all duration-500 flex items-center ${toggle ? 'bg-indigo-600 shadow-[0_0_40px_rgba(99,102,241,0.4)]' : 'bg-zinc-800'}`} style={baseStyle}>
               <div className={`w-12 h-12 rounded-full bg-white shadow-xl transition-all duration-500 ${toggle ? 'translate-x-16' : 'translate-x-0'}`} />
            </div>
          );
        case 'SLIDER':
          return (
            <div className="w-full max-w-md p-10 flex flex-col gap-6" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               <div className="flex justify-between text-[10px] font-mono text-white/40 uppercase tracking-widest"><span>Signal_Level</span> <span>{val}%</span></div>
               <div className="relative h-2 bg-black/40 rounded-full overflow-hidden">
                  <div className="h-full bg-indigo-500 shadow-[0_0_15px_#6366f1]" style={{ width: `${val}%` }} />
                  <input type="range" min="0" max="100" value={val} onChange={e => setVal(parseInt(e.target.value))} className="absolute inset-0 opacity-0 cursor-pointer" />
               </div>
            </div>
          );
        case 'PROGRESS':
          return (
            <div className="w-full max-w-md p-10 flex flex-col gap-4" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               <div className="text-[10px] font-mono text-white/40 uppercase">Sync_Progress</div>
               <div className="h-12 bg-black/40 rounded-2xl border border-white/5 overflow-hidden p-1.5 relative">
                  <div className="h-full bg-gradient-to-r from-indigo-500 to-sky-400 rounded-xl transition-all duration-[2000ms] animate-pulse" style={{ width: '74%' }} />
                  <div className="absolute inset-0 flex items-center justify-center text-[10px] font-black text-white uppercase tracking-widest">74%_Ready</div>
               </div>
            </div>
          );
        case 'SEGMENT':
          return (
            <div className="p-2 flex gap-2" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               {['LOD_1', 'LOD_2', 'LOD_3'].map((s, i) => (
                 <button key={i} onClick={() => { setActiveSegment(i); playUISound('click'); }} className={`px-6 py-3 rounded-xl text-[9px] font-black uppercase transition-all duration-500 ${activeSegment === i ? 'bg-white text-black shadow-lg' : 'text-white/40 hover:bg-white/5'}`}>{s}</button>
               ))}
            </div>
          );
        case 'CHECKBOX':
          return (
            <div onClick={() => { setToggle(!toggle); playUISound('click'); }} className={`w-16 h-16 border-2 transition-all duration-500 flex items-center justify-center cursor-pointer ${toggle ? 'bg-indigo-600 border-white shadow-2xl scale-110' : 'bg-black/40 border-white/10'}`} style={{ borderRadius: `${physics.radius/2}px` }}>
               {toggle && <Check className="w-8 h-8 text-white animate-in zoom-in duration-300" />}
            </div>
          );
        case 'AUTH_FORM':
          return (
            <div className="w-full max-w-sm p-12 space-y-8 shadow-2xl" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               <div className="text-center space-y-2">
                  <Shield className="w-12 h-12 text-white mx-auto mb-4" />
                  <h4 className="text-2xl font-tech font-bold text-white uppercase tracking-widest">Access_Lock</h4>
                  <p className="text-[10px] font-mono text-white/40 uppercase tracking-tighter">Handshake Protocol: 0x88.V2</p>
               </div>
               <div className="space-y-4">
                  <div className="h-12 bg-white/5 border border-white/10 rounded-xl" />
                  <div className="h-12 bg-white/5 border border-white/10 rounded-xl" />
                  <button className="w-full py-4 bg-white text-black rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 hover:text-white transition-colors">Decrypt_Vault</button>
               </div>
            </div>
          );
        case 'PROFILE_CARD':
          return (
            <div className="w-80 p-8 flex flex-col items-center gap-6" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               <div className="w-24 h-24 rounded-full border-4 border-indigo-500/40 p-1 relative">
                  <div className="w-full h-full rounded-full bg-zinc-800 flex items-center justify-center overflow-hidden">
                     <User className="w-12 h-12 text-white/20" />
                  </div>
                  <div className="absolute -bottom-1 -right-1 w-6 h-6 bg-emerald-500 rounded-full border-4 border-black" />
               </div>
               <div className="text-center space-y-1">
                  <h4 className="text-2xl font-tech font-bold text-white uppercase">Architect_01</h4>
                  <p className="text-[10px] font-mono text-indigo-400 uppercase tracking-widest">L7_Verification_OK</p>
               </div>
               <div className="w-full pt-6 border-t border-white/5 grid grid-cols-2 gap-4">
                  <div className="text-center"><div className="text-[8px] text-zinc-500 uppercase">Assets</div><div className="text-xl font-tech font-bold text-white">124</div></div>
                  <div className="text-center"><div className="text-[8px] text-zinc-500 uppercase">Nodes</div><div className="text-xl font-tech font-bold text-white">4.2k</div></div>
               </div>
            </div>
          );
        case 'NOTIF_TOAST':
          return (
            <div className="w-96 p-6 flex items-center gap-6 shadow-2xl animate-in slide-in-from-right-4 duration-500" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.2)' }}>
               <div className="w-12 h-12 rounded-2xl bg-indigo-500 flex items-center justify-center text-white shrink-0 shadow-lg"><Bell className="w-6 h-6" /></div>
               <div className="flex-1">
                  <div className="text-xs font-black uppercase text-white tracking-widest">System_Alert</div>
                  <p className="text-[10px] text-white/60 font-light mt-1">Nodal sync completed in sector 0x88.</p>
               </div>
               <X className="w-4 h-4 text-white/20" />
            </div>
          );
        case 'DATA_CARD':
          return (
            <div className="w-80 h-96 p-10 flex flex-col justify-between shadow-2xl" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               <div className="flex justify-between items-start">
                  <Cpu className="w-10 h-10 text-white/40" />
                  <div className="w-2 h-2 rounded-full bg-emerald-500 animate-ping" />
               </div>
               <div className="space-y-4">
                  <div className="text-[10px] font-mono text-white/40 uppercase tracking-[0.4em]">Node_Identity</div>
                  <div className="text-3xl font-tech font-bold text-white uppercase tracking-tighter leading-none">Quantum_Buffer</div>
                  <div className="h-1 w-full bg-white/10 rounded-full overflow-hidden">
                     <div className="h-full bg-indigo-500 animate-pulse w-3/4" />
                  </div>
               </div>
            </div>
          );
        case 'PRICING_TABLE':
          return (
            <div className="w-80 p-10 border-2 flex flex-col gap-10" style={{ ...baseStyle, backgroundColor: coreColor, borderColor: 'rgba(255,255,255,0.1)' }}>
               <div className="space-y-2">
                  <div className="text-[10px] font-mono text-indigo-400 uppercase tracking-widest">Elite_Tier</div>
                  <h4 className="text-4xl font-tech font-bold text-white uppercase leading-none">0xPRO.</h4>
               </div>
               <ul className="space-y-4">
                  {['Infinite_VRAM', 'Global_Edge', 'L7_Shield'].map((f, i) => (
                    <li key={i} className="flex items-center gap-3 text-[10px] font-mono text-zinc-500 uppercase"><CheckCircle2 className="w-3 h-3 text-emerald-500" /> {f}</li>
                  ))}
               </ul>
               <button className="w-full py-4 bg-white text-black rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-2xl">Initialize_Plan</button>
            </div>
          );
        case 'SEARCH_BAR':
          return (
            <div className="w-full max-w-2xl p-4 flex items-center gap-6 shadow-2xl" style={{ ...baseStyle, backgroundColor: coreColor, border: '1px solid rgba(255,255,255,0.1)' }}>
               <Search className="w-8 h-8 text-white/40 ml-4" />
               <input className="bg-transparent border-none outline-none flex-1 text-2xl font-light text-white placeholder:opacity-20" placeholder="Search_Lattice..." />
               <div className="px-6 py-3 bg-white/10 rounded-2xl border border-white/20 text-[10px] font-mono text-white">⌘ + K</div>
            </div>
          );
        default: return null;
      }
    };

    return (
      <div className="relative group/aberration">
         {/* Aberration Layer: Red */}
         {aberrationShift > 0 && (
           <div className="absolute inset-0 pointer-events-none opacity-40 mix-blend-screen" style={{ ...baseStyle, transform: `translate(${aberrationShift}px, ${aberrationShift}px) rotateX(${mousePos.y * 20}deg) rotateY(${mousePos.x * 20}deg)`, border: '1px solid #ef4444' }}>
              <div className="w-full h-full bg-rose-500/10" style={{ borderRadius: baseStyle.borderRadius }} />
           </div>
         )}
         {/* Aberration Layer: Blue */}
         {aberrationShift > 0 && (
           <div className="absolute inset-0 pointer-events-none opacity-40 mix-blend-screen" style={{ ...baseStyle, transform: `translate(${-aberrationShift}px, ${-aberrationShift}px) rotateX(${mousePos.y * 20}deg) rotateY(${mousePos.x * 20}deg)`, border: '1px solid #0ea5e9' }}>
              <div className="w-full h-full bg-sky-500/10" style={{ borderRadius: baseStyle.borderRadius }} />
           </div>
         )}
         
         {/* Main Component */}
         {renderContent()}

         {/* Noise Overlay */}
         <div className="absolute inset-0 pointer-events-none mix-blend-overlay opacity-30" style={{ 
            borderRadius: baseStyle.borderRadius,
            opacity: physics.noise,
            backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`
         }} />
      </div>
    );
  };

  return (
    <div className="space-y-32">
      {/* Intro */}
      <div className="flex flex-col md:flex-row justify-between items-end gap-12">
        <div className="space-y-6">
           <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
              <Atom className="w-3 h-3" /> {t.atoms.tag}
           </div>
           <h2 className="text-[100px] md:text-[120px] font-tech font-bold text-zinc-900 dark:text-white uppercase leading-[0.8] tracking-tighter">
              {t.atoms.title} <br /><span className="text-indigo-500">{t.atoms.titleAccent}</span>
           </h2>
           <p className="text-xl font-light text-zinc-500 dark:text-zinc-400 max-w-xl">
              {t.atoms.desc}
           </p>
        </div>

        <div className={`p-10 rounded-[48px] border transition-all duration-700 w-full lg:w-72 flex flex-col gap-4 shadow-2xl ${isDark ? 'bg-zinc-900 border-white/5' : 'bg-white border-black/5'}`}>
           <div className="flex items-center justify-between">
              <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Cohesion_v1.2</span>
              <Gauge className="w-4 h-4 text-emerald-500" />
           </div>
           <div className="text-5xl font-tech font-black text-zinc-900 dark:text-white tracking-tighter">
             {(0.992 - (physics.jitter * 0.005)).toFixed(3)}
           </div>
           <div className="text-[10px] font-mono text-indigo-500 uppercase">System_State: {physics.jitter > 5 ? 'STRESS_DET' : 'NOMINAL'}</div>
        </div>
      </div>

      {/* Lab Interface */}
      <div className={`grid grid-cols-1 lg:grid-cols-12 gap-8 h-auto lg:min-h-[850px] p-1 rounded-[80px] border transition-all duration-1000
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-100 border-black/5 shadow-inner'}
      `}>
         
         {/* 1. REGISTRY SELECTOR */}
         <div className={`lg:col-span-3 p-12 border-r flex flex-col gap-10 overflow-y-auto custom-scroll ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'}`}>
            <div className="space-y-12">
               <div className="space-y-6">
                  <div className="flex items-center gap-3 text-zinc-500">
                     <Layout className="w-5 h-5" />
                     <span className="text-[10px] font-bold uppercase tracking-widest">{t.atoms.basic}</span>
                  </div>
                  <div className="grid grid-cols-2 gap-2">
                     {(['BUTTON', 'INPUT', 'BADGE', 'TOGGLE', 'SLIDER', 'PROGRESS', 'SEGMENT', 'CHECKBOX'] as UnitID[]).map(id => (
                       <button key={id} onClick={() => { setActiveUnit(id); playUISound('click'); }} className={`p-4 rounded-2xl border text-left flex justify-between items-center transition-all ${activeUnit === id ? 'bg-indigo-600 border-indigo-400 text-white shadow-xl' : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10'}`}>
                          <span className="text-[9px] font-black uppercase">{id}</span>
                       </button>
                     ))}
                  </div>
               </div>

               <div className="space-y-6">
                  <div className="flex items-center gap-3 text-zinc-500">
                     <Component className="w-5 h-5" />
                     <span className="text-[10px] font-bold uppercase tracking-widest">{t.atoms.compound}</span>
                  </div>
                  <div className="grid grid-cols-1 gap-2">
                     {(['AUTH_FORM', 'SEARCH_BAR', 'DATA_CARD', 'PROFILE_CARD', 'NOTIF_TOAST', 'PRICING_TABLE'] as UnitID[]).map(id => (
                       <button key={id} onClick={() => { setActiveUnit(id); playUISound('click'); }} className={`p-4 rounded-2xl border text-left flex justify-between items-center transition-all ${activeUnit === id ? 'bg-indigo-600 border-indigo-400 text-white shadow-xl' : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10'}`}>
                          <span className="text-[10px] font-black uppercase">{id.replace('_', ' ')}</span>
                          <ChevronRight className={`w-4 h-4 transition-all ${activeUnit === id ? 'opacity-100 translate-x-1' : 'opacity-0'}`} />
                       </button>
                     ))}
                  </div>
               </div>
            </div>

            <div className="mt-auto p-6 bg-black/40 rounded-3xl border border-white/5 space-y-4">
               <div className="flex items-center gap-3 text-indigo-500">
                  <Terminal className="w-4 h-4" />
                  <span className="text-[9px] font-black uppercase tracking-widest">Logic_Kernel</span>
               </div>
               <div className="font-mono text-[8px] text-zinc-600 space-y-1">
                  <div> INIT_UNIT_{activeUnit}</div>
                  <div> SYNC_HUE_{physics.hue}</div>
                  <div className="text-indigo-500 animate-pulse"> AWAITING_AI_CALIB_</div>
               </div>
            </div>
         </div>

         {/* 2. THE VIEWPORT (FORGE) */}
         <div 
           ref={containerRef}
           onMouseMove={handleMouseMove}
           className="lg:col-span-6 bg-black relative overflow-hidden flex items-center justify-center p-12 group cursor-crosshair shadow-inner"
         >
            {/* Background Grid */}
            <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />
            
            <div className="relative w-full h-full flex items-center justify-center perspective-2000 preserve-3d">
               {renderUnit()}

               {/* Force Vector Display */}
               <div className="absolute top-1/2 left-1/2 pointer-events-none opacity-0 group-hover:opacity-40 transition-opacity duration-700">
                  <div className="w-[1px] h-32 bg-gradient-to-t from-indigo-500 to-transparent origin-bottom" style={{ transform: `rotateX(${-mousePos.y * 360}deg) rotateY(${mousePos.x * 360}deg)` }} />
               </div>
            </div>

            {/* Diagnostic HUD Scanline */}
            <div className={`absolute inset-0 z-50 pointer-events-none overflow-hidden transition-opacity duration-1000 ${isSynthesizing ? 'opacity-100' : 'opacity-0'}`}>
               <div className="w-full h-[2px] bg-indigo-500 shadow-[0_0_20px_#6366f1] animate-[scan_2s_linear_infinite]" />
            </div>

            <div className="absolute bottom-12 right-12 text-right opacity-40">
               <div className="text-[10px] font-mono text-indigo-500 uppercase tracking-widest font-black mb-1">Matter_State: {isPressed ? 'ACTIVE_COMP' : 'RESTING'}</div>
               <div className="text-[8px] font-mono text-zinc-700 uppercase">JIT_PTR: [{mousePos.x.toFixed(3)}, {mousePos.y.toFixed(3)}]</div>
            </div>

            <div className="absolute top-12 left-12">
               <div className="flex items-center gap-3 px-4 py-2 bg-zinc-900 border border-white/10 rounded-full shadow-2xl">
                  <Activity className="w-3 h-3 text-indigo-500 animate-pulse" />
                  <span className="text-[8px] font-mono text-zinc-400 uppercase font-black">Lattice_Field: ACTIVE</span>
               </div>
            </div>
         </div>

         {/* 3. CALIBRATION PULPIT */}
         <div className={`lg:col-span-3 p-12 border-l flex flex-col gap-8 ${isDark ? 'bg-[#0a0a0c] border-white/5' : 'bg-zinc-50 border-black/5'}`}>
            <div className="space-y-6">
               <div className="flex items-center gap-3 text-indigo-500">
                  <SlidersIcon className="w-5 h-5" />
                  <span className="text-[10px] font-bold uppercase tracking-widest">{t.atoms.calibration}</span>
               </div>

               <div className="space-y-6 overflow-y-auto max-h-[500px] pr-2 custom-scroll">
                  {[
                    { label: 'Blur_Intensity', key: 'blur', min: 0, max: 64, step: 1, icon: Wind },
                    { label: 'Refraction_Index', key: 'refraction', min: 0, max: 0.8, step: 0.01, icon: Waves },
                    { label: 'Matter_Mass', key: 'mass', min: 0.1, max: 2, step: 0.05, icon: Box },
                    { label: 'Edge_Sharpness', key: 'radius', min: 0, max: 100, step: 1, icon: Target },
                    { label: 'Spectral_Hue', key: 'hue', min: 0, max: 360, step: 1, icon: Sparkles },
                    { label: 'RGB_Aberration', key: 'aberration', min: 0, max: 40, step: 1, icon: AlertTriangle },
                    { label: 'Quantum_Jitter', key: 'jitter', min: 0, max: 10, step: 0.1, icon: Activity },
                    { label: 'Internal_Noise', key: 'noise', min: 0, max: 0.2, step: 0.001, icon: Radio }
                  ].map(ctrl => (
                    <div key={ctrl.key} className="space-y-3 group/ctrl">
                       <div className="flex justify-between text-[8px] font-mono text-zinc-500 uppercase font-black group-hover/ctrl:text-indigo-400 transition-colors">
                          <span className="flex items-center gap-2"><ctrl.icon className="w-3 h-3" /> {ctrl.label}</span>
                          <span className="text-indigo-500">{(physics as any)[ctrl.key]}</span>
                       </div>
                       <input 
                         type="range" min={ctrl.min} max={ctrl.max} step={ctrl.step} value={(physics as any)[ctrl.key]}
                         onChange={e => setPhysics({...physics, [ctrl.key]: parseFloat(e.target.value)})}
                         className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-indigo-500"
                       />
                    </div>
                  ))}
               </div>
            </div>

            <div className="mt-auto pt-8 border-t border-black/5 dark:border-white/5 space-y-4">
               <button 
                 onClick={runAISynthesis}
                 disabled={isSynthesizing}
                 className={`w-full py-5 rounded-[32px] font-black text-[9px] uppercase tracking-[0.4em] transition-all flex items-center justify-center gap-4 shadow-xl active:scale-95
                   ${isSynthesizing ? 'bg-zinc-800 text-zinc-600' : 'bg-indigo-600 text-white hover:bg-indigo-500 shadow-indigo-600/20'}
                 `}
               >
                  {isSynthesizing ? <Loader2 className="w-4 h-4 animate-spin" /> : <Wand2 className="w-4 h-4" />}
                  {t.atoms.aibtn}
               </button>
               <div className="flex items-center gap-3 text-[8px] font-mono text-zinc-700 uppercase tracking-tighter">
                  <Activity className="w-3 h-3" /> System: Gemini-3-Pro-Preview
               </div>
            </div>
         </div>
      </div>

      <style>{`
        @keyframes scan { 0% { top: -10%; } 100% { top: 110%; } }
        .perspective-2000 { perspective: 2000px; }
        .preserve-3d { transform-style: preserve-3d; }
      `}</style>
    </div>
  );
};

const X = ({ className }: { className?: string }) => (
  <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
);


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/AudioService.ts
название файла: wooden/components/AudioService.ts

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

export const playUISound = (type: 'hover' | 'click' | 'success' | 'process' | 'glass' | 'heavy') => {
  const ctx = new (window.AudioContext || (window as any).webkitAudioContext)();
  const osc = ctx.createOscillator();
  const gain = ctx.createGain();

  osc.connect(gain);
  gain.connect(ctx.destination);

  const now = ctx.currentTime;

  if (type === 'hover') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(880, now);
    osc.frequency.exponentialRampToValueAtTime(1200, now + 0.05);
    gain.gain.setValueAtTime(0.015, now);
    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.05);
    osc.start(now);
    osc.stop(now + 0.05);
  } else if (type === 'click') {
    osc.type = 'triangle';
    osc.frequency.setValueAtTime(150, now);
    gain.gain.setValueAtTime(0.08, now);
    gain.gain.linearRampToValueAtTime(0, now + 0.12);
    osc.start(now);
    osc.stop(now + 0.12);
  } else if (type === 'success') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(523, now); 
    osc.frequency.exponentialRampToValueAtTime(1046, now + 0.2); 
    gain.gain.setValueAtTime(0.04, now);
    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.3);
    osc.start(now);
    osc.stop(now + 0.3);
  } else if (type === 'process') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(220, now);
    osc.frequency.linearRampToValueAtTime(440, now + 0.8);
    gain.gain.setValueAtTime(0.01, now);
    osc.start(now);
    osc.stop(now + 0.8);
  } else if (type === 'glass') {
    osc.type = 'sine';
    osc.frequency.setValueAtTime(2000, now);
    osc.frequency.exponentialRampToValueAtTime(3000, now + 0.03);
    gain.gain.setValueAtTime(0.01, now);
    gain.gain.linearRampToValueAtTime(0, now + 0.03);
    osc.start(now);
    osc.stop(now + 0.03);
  } else if (type === 'heavy') {
    osc.type = 'sawtooth';
    osc.frequency.setValueAtTime(60, now);
    osc.frequency.linearRampToValueAtTime(40, now + 0.2);
    gain.gain.setValueAtTime(0.05, now);
    gain.gain.linearRampToValueAtTime(0, now + 0.2);
    osc.start(now);
    osc.stop(now + 0.2);
  }
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/ComponentConstructor.tsx
название файла: wooden/components/ComponentConstructor.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState } from 'react';
import { Layers, Box, Maximize, Zap, Play, Layout } from 'lucide-react';
import { playUISound } from './AudioService';

export const ComponentConstructor: React.FC<{ theme: string }> = ({ theme }) => {
  const [activeLayer, setActiveLayer] = useState<number | null>(null);
  const isDark = theme === 'dark';

  return (
    <div className="scroll-mt-32">
      <div className="mb-20 flex flex-col md:flex-row justify-between items-end gap-8">
        <div className="space-y-4">
           <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Visual_Constructor_v1</span>
           <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
              Сборка <br /><span className="text-indigo-500">Компонента.</span>
           </h2>
        </div>
        <div className="p-8 bg-black/40 border border-white/5 rounded-[40px] flex items-center gap-8">
           <div className="space-y-2">
              <div className="text-[8px] font-mono text-zinc-500 uppercase tracking-widest">SDK_Status</div>
              <div className="text-2xl font-tech font-bold text-white tracking-widest">v2.4.0_Stable</div>
           </div>
           <Layout className="w-8 h-8 text-indigo-500 animate-pulse" />
        </div>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-2 gap-12 p-12 rounded-[64px] border ${isDark ? 'bg-black/20 border-white/5' : 'bg-white border-black/5 shadow-2xl'}`}>
         <div className="space-y-8">
            <p className="text-xl text-zinc-500 font-light leading-relaxed max-w-lg">
               Используйте наш визуальный конструктор для настройки свойств React-компонентов. Изменяйте индекс преломления и массу в реальном времени.
            </p>
            <div className="grid grid-cols-2 gap-4">
               {[
                 { label: 'Surface', icon: Layers },
                 { label: 'Matter', icon: Box },
                 { label: 'Kinetics', icon: Zap },
                 { label: 'Geometry', icon: Maximize }
               ].map((item, i) => (
                 <button 
                   key={i}
                   onMouseEnter={() => playUISound('hover')}
                   onClick={() => { setActiveLayer(i); playUISound('click'); }}
                   className={`p-6 rounded-3xl border flex items-center gap-4 transition-all ${activeLayer === i ? 'bg-indigo-600 border-indigo-400 text-white shadow-xl' : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10'}`}
                 >
                    <item.icon className="w-5 h-5" />
                    <span className="text-[10px] font-bold uppercase tracking-widest">{item.label}</span>
                 </button>
               ))}
            </div>
            <button className="w-full py-8 bg-white/5 border border-white/10 rounded-3xl text-zinc-500 font-mono text-[10px] uppercase tracking-[0.4em] hover:text-white transition-colors">
               Copy_React_Code_Snippet
            </button>
         </div>

         <div className={`relative h-[400px] rounded-[48px] overflow-hidden flex items-center justify-center ${isDark ? 'bg-zinc-950' : 'bg-zinc-100'}`}>
            <div className={`w-64 h-64 bg-indigo-500/10 border-2 border-indigo-500/30 rounded-[40px] flex items-center justify-center transition-all duration-700 ${activeLayer !== null ? 'scale-110 shadow-[0_0_80px_rgba(99,102,241,0.2)]' : 'opacity-40'}`}>
               <Box className={`w-16 h-16 text-indigo-500 transition-all ${activeLayer === 1 ? 'animate-bounce' : ''}`} />
               {activeLayer === 0 && <div className="absolute inset-8 border border-white/40 rounded-[24px] animate-pulse" />}
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/ComponentHistoryDeconstructor.tsx
название файла: wooden/components/ComponentHistoryDeconstructor.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useRef, useEffect } from 'react';
import { History, Clock, Database, Activity, ShieldCheck, Sliders, Maximize2, Gauge, RefreshCw, ChevronRight, Zap } from 'lucide-react';
import { LanguageContext } from '../App';
import { playUISound } from './AudioService';

export const ComponentHistoryDeconstructor: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const isDark = theme === 'dark';
  
  // Состояния для вращения и смещения
  const [rotation, setRotation] = useState({ x: 55, z: -35 });
  const [mouseOffset, setMouseOffset] = useState({ x: 0, y: 0 });
  const [hoveredIdx, setHoveredIdx] = useState<number | null>(null);
  const [explodeScale, setExplodeScale] = useState(1.4);
  const containerRef = useRef<HTMLDivElement>(null);

  const versions = [
    { v: 'v19.4.1', date: '20.05.2025', status: 'HEAD', hash: '0x88F2A', stability: 99.8, load: '142MB' },
    { v: 'v19.4.0', date: '18.05.2025', status: 'STABLE', hash: '0x77E1B', stability: 99.2, load: '138MB' },
    { v: 'v19.3.5', date: '15.05.2025', status: 'DEPRECATED', hash: '0x66D0C', stability: 84.1, load: '156MB' },
    { v: 'v19.0.0', date: '01.05.2025', status: 'ARCHIVE', hash: '0x55C9D', stability: 97.5, load: '120MB' },
  ];

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (!containerRef.current) return;
    const rect = containerRef.current.getBoundingClientRect();
    
    // Координаты относительно центра
    const centerX = rect.width / 2;
    const centerY = rect.height / 2;
    const offX = e.clientX - rect.left - centerX;
    const offY = e.clientY - rect.top - centerY;

    setMouseOffset({ x: offX, y: offY });
    
    // Вращение как в AnatomyView
    setRotation({ 
      x: 55 + (offY / rect.height) * 30, 
      z: -35 + (offX / rect.width) * 30 
    });
  };

  const isAnyHovered = hoveredIdx !== null;

  return (
    <div className="scroll-mt-32 space-y-16 animate-in fade-in duration-1000">
      {/* HEADER */}
      <div className="flex flex-col lg:flex-row justify-between items-end gap-12">
        <div className="space-y-6">
           <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
              <History className="w-3 h-3" /> TEMPORAL_MATTER_SCANNER
           </div>
           <h2 className="text-[80px] md:text-[100px] font-tech font-bold text-zinc-900 dark:text-white uppercase leading-[0.8] tracking-tighter">
              Деконструкция <br /><span className="text-indigo-500">Истории.</span>
           </h2>
           <p className="text-xl font-light text-zinc-500 max-w-xl">
             Протокол временного анализа. Каждая сборка MatterForge сохраняется как пространственный слой. Раздвиньте историю, чтобы исследовать эволюцию архитектуры.
           </p>
        </div>

        <div className={`p-10 rounded-[48px] border w-full lg:w-72 flex flex-col gap-4 shadow-2xl ${isDark ? 'bg-zinc-900 border-white/5' : 'bg-white border-black/5'}`}>
           <div className="flex items-center justify-between">
              <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Снапшоты</span>
              <Database className="w-4 h-4 text-indigo-500" />
           </div>
           <div className="text-5xl font-tech font-black text-zinc-900 dark:text-white tracking-tighter">
             0{versions.length}
           </div>
           <div className="text-[10px] font-mono text-emerald-500 uppercase">Archive_Integrity: 100%</div>
        </div>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-12 gap-8 h-auto lg:h-[800px] p-1 rounded-[80px] border transition-all duration-1000
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-100 border-black/5 shadow-inner'}
      `}>
         
         {/* SIDEBAR SETTINGS */}
         <div className={`lg:col-span-3 p-10 border-r flex flex-col gap-10 ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'}`}>
            <div className="space-y-8">
               <div className="flex items-center gap-3 text-indigo-500">
                  <Sliders className="w-5 h-5" />
                  <span className="text-[10px] font-bold uppercase tracking-widest text-zinc-500">Temporal_Lens</span>
               </div>

               <div className="space-y-4">
                  <div className="flex justify-between text-[9px] font-bold uppercase text-zinc-500">
                     <span>Z-Gap (Explosion)</span>
                     <span className="text-indigo-500">x{explodeScale.toFixed(2)}</span>
                  </div>
                  <input 
                    type="range" min="0.5" max="3" step="0.1" value={explodeScale}
                    onChange={e => setExplodeScale(parseFloat(e.target.value))}
                    className="w-full h-1 bg-black/10 dark:bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-indigo-500"
                  />
               </div>

               <div className="space-y-4">
                  <div className="text-[10px] font-bold uppercase text-zinc-600 tracking-widest mb-4">Временные_Слои</div>
                  {versions.map((v, idx) => (
                    <button 
                      key={idx} 
                      onMouseEnter={() => { setHoveredIdx(idx); playUISound('hover'); }}
                      onMouseLeave={() => setHoveredIdx(null)}
                      className={`w-full flex items-center justify-between p-4 rounded-2xl border transition-all duration-300
                        ${hoveredIdx === idx ? 'bg-indigo-600 border-indigo-400 text-white shadow-xl' : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10'}
                      `}
                    >
                       <div className="flex flex-col items-start">
                          <span className="text-xs font-black uppercase tracking-widest">{v.v}</span>
                          <span className="text-[8px] font-mono opacity-50 uppercase">{v.date}</span>
                       </div>
                       <ChevronRight className={`w-4 h-4 ${hoveredIdx === idx ? 'opacity-100 translate-x-1' : 'opacity-0'} transition-all`} />
                    </button>
                  ))}
               </div>
            </div>

            <div className="mt-auto p-6 bg-black/40 rounded-[32px] border border-white/5 space-y-4">
               <div className="flex items-center gap-2 text-indigo-500">
                  <RefreshCw className="w-4 h-4 animate-spin-slow" />
                  <span className="text-[9px] font-bold uppercase tracking-widest">History_Sync</span>
               </div>
               <div className="text-2xl font-tech font-bold text-white uppercase tracking-tighter">Verified</div>
            </div>
         </div>

         {/* VIEWPORT AREA */}
         <div 
           ref={containerRef}
           onMouseMove={handleMouseMove}
           className="lg:col-span-9 bg-[#050508] relative overflow-hidden flex items-center justify-center p-12 group shadow-inner cursor-none"
         >
            {/* Background Grid */}
            <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />

            {/* THE EXPLODED VERSION STACK */}
            <div 
              className="relative w-full max-w-[420px] h-[300px] preserve-3d transition-transform duration-700 ease-out"
              style={{ transform: `rotateX(${rotation.x}deg) rotateZ(${rotation.z}deg)` }}
            >
              {versions.map((v, index) => {
                const isActive = hoveredIdx === index;
                // Текущая версия (index 0) выше всех
                const reverseIdx = versions.length - 1 - index;
                const zGap = isActive ? 180 : reverseIdx * 50 * explodeScale;

                return (
                  <div
                    key={index}
                    onMouseEnter={() => setHoveredIdx(index)}
                    className="absolute inset-0 rounded-[56px] border border-white/20 flex flex-col items-center justify-center transition-all duration-1000 cubic-bezier(0.16, 1, 0.3, 1) shadow-2xl"
                    style={{
                      backgroundColor: isActive ? 'rgba(99, 102, 241, 0.15)' : isAnyHovered ? 'rgba(255,255,255,0.02)' : index === 0 ? 'rgba(99,102,241,0.1)' : 'rgba(255,255,255,0.05)',
                      backdropFilter: 'blur(30px)',
                      transform: `translateZ(${zGap}px) scale(${isActive ? 1.05 : 1})`,
                      opacity: isAnyHovered && !isActive ? 0.2 : 1 - (index * 0.15),
                      zIndex: versions.length - index,
                      borderColor: isActive ? 'rgba(99, 102, 241, 0.8)' : 'rgba(255,255,255,0.1)'
                    }}
                  >
                    <div className={`text-[10px] font-mono text-white/40 absolute top-10 left-12 uppercase tracking-[0.3em] transition-opacity duration-500 ${isActive || index === 0 ? 'opacity-100' : 'opacity-0'}`}>
                      Build_{v.hash} // {v.v}
                    </div>
                    
                    <div className={`flex flex-col items-center gap-6 transition-all duration-700 ${isActive ? 'scale-110 opacity-100' : 'opacity-20'}`}>
                       <div className={`w-16 h-16 rounded-[24px] flex items-center justify-center transition-all duration-500 ${isActive ? 'bg-indigo-600 text-white shadow-xl' : 'bg-zinc-800 text-zinc-500'}`}>
                          {index === 0 ? <Zap className="w-8 h-8" /> : <Activity className="w-8 h-8" />}
                       </div>
                       {isActive && (
                         <div className="text-center space-y-3">
                           <div className="text-2xl font-tech font-bold text-white uppercase tracking-widest">{v.status}</div>
                           <div className="grid grid-cols-2 gap-4">
                              <div className="flex flex-col">
                                 <span className="text-[7px] text-zinc-500 uppercase">Stability</span>
                                 <span className="text-[10px] font-mono text-emerald-400">{v.stability}%</span>
                              </div>
                              <div className="flex flex-col">
                                 <span className="text-[7px] text-zinc-500 uppercase">VRAM_Load</span>
                                 <span className="text-[10px] font-mono text-indigo-400">{v.load}</span>
                              </div>
                           </div>
                         </div>
                       )}
                    </div>

                    {/* Edge Shimmer */}
                    <div className="absolute inset-0 border-t border-l border-white/10 rounded-[inherit] pointer-events-none" />
                  </div>
                );
              })}
            </div>

            {/* CURSOR CROSSHAIR HUD - Исправлено позиционирование */}
            <div 
              className="absolute pointer-events-none transition-opacity duration-300 z-[100]"
              style={{ 
                left: '50%',
                top: '50%',
                transform: `translate(calc(-50% + ${mouseOffset.x}px), calc(-50% + ${mouseOffset.y}px))`, 
                opacity: 1 
              }}
            >
               <div className="relative flex items-center justify-center">
                  <div className="w-20 h-20 border border-indigo-500/40 rounded-full flex items-center justify-center backdrop-blur-md">
                     <div className="w-1 h-1 bg-white rounded-full animate-ping" />
                     <Maximize2 className="w-5 h-5 text-indigo-500 absolute opacity-40 animate-pulse" />
                  </div>
                  {/* Метка координат */}
                  <div className="absolute top-1/2 left-full ml-4 whitespace-nowrap bg-zinc-900 border border-white/10 px-3 py-1 rounded-lg">
                    <span className="text-[7px] font-mono text-indigo-400 uppercase">SCAN: [{mouseOffset.x.toFixed(0)}, {mouseOffset.y.toFixed(0)}]</span>
                  </div>
               </div>
            </div>

            {/* SYSTEM STATUS OVERLAY */}
            <div className="absolute bottom-12 left-12 flex flex-col gap-2 z-[60]">
               <div className="flex items-center gap-3 px-6 py-2 bg-zinc-900 border border-white/10 rounded-full shadow-2xl">
                  <Activity className="w-4 h-4 text-emerald-500 animate-pulse" />
                  <span className="text-[10px] font-mono text-white uppercase tracking-widest font-black">History_Analysis: ACTIVE</span>
               </div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/DesignManifesto.tsx
название файла: wooden/components/DesignManifesto.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useRef, useEffect } from 'react';
import { Quote, Move, Box, Layers, Activity } from 'lucide-react';
import { LanguageContext } from '../App';

export const DesignManifesto: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });
  const containerRef = useRef<HTMLDivElement>(null);
  const isDark = theme === 'dark';

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = containerRef.current?.getBoundingClientRect();
    if (rect) {
      setMousePos({
        x: (e.clientX - rect.left) / rect.width - 0.5,
        y: (e.clientY - rect.top) / rect.height - 0.5
      });
    }
  };

  return (
    <div 
      ref={containerRef}
      onMouseMove={handleMouseMove}
      className="scroll-mt-32 py-24 space-y-32"
    >
      <div className="flex flex-col items-center text-center space-y-8">
         <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-zinc-900 border border-white/10 text-zinc-400 text-[8px] font-black uppercase tracking-[0.6em]">
            {t.manifesto.tag}
         </div>
         <h2 className="text-[80px] md:text-[120px] font-tech font-bold uppercase leading-[0.8] tracking-tighter text-zinc-900 dark:text-white">
            {t.manifesto.title}<br /><span className="text-indigo-500">{t.manifesto.titleAccent}</span>
         </h2>
         <p className="text-3xl font-light opacity-60 leading-relaxed max-w-3xl font-mono italic">
            "{t.manifesto.quote}"
         </p>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-2 gap-1 rounded-[80px] border overflow-hidden
        ${isDark ? 'bg-zinc-950 border-white/5' : 'bg-zinc-100 border-black/5 shadow-2xl'}
      `}>
         {/* INTERACTIVE TYPOGRAPHY SLAB */}
         <div className="h-[600px] bg-black flex items-center justify-center relative overflow-hidden group">
            <div className="absolute inset-0 opacity-[0.05] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '40px 40px' }} />
            
            <div 
              className="relative transition-all duration-300 ease-out will-change-transform"
              style={{ 
                transform: `rotateX(${mousePos.y * -20}deg) rotateY(${mousePos.x * 20}deg)`,
                textShadow: `${mousePos.x * -20}px ${mousePos.y * -20}px 40px rgba(99, 102, 241, 0.4)`
              }}
            >
               <div className="text-[180px] font-tech font-black text-white leading-none tracking-tighter uppercase select-none">
                 MATTER
               </div>
               {/* 3D Depth Layers for Text */}
               <div className="absolute inset-0 text-[180px] font-tech font-black text-indigo-500/20 leading-none tracking-tighter uppercase select-none -z-10 blur-md translate-z-[-20px]" />
            </div>

            <div className="absolute bottom-12 left-12 flex items-center gap-4 text-white/20">
               <Activity className="w-4 h-4" />
               <span className="text-[9px] font-mono uppercase tracking-[0.3em]">Typographic_Deformation_Active</span>
            </div>
         </div>

         {/* CONTENT BLOCK */}
         <div className={`p-20 flex flex-col justify-center gap-12 ${isDark ? 'bg-zinc-900/50' : 'bg-white'}`}>
            <div className="space-y-6">
               <h3 className="text-4xl font-tech font-bold uppercase tracking-tight text-zinc-900 dark:text-white leading-none">
                  Форма следует <br /><span className="text-indigo-500">физике.</span>
               </h3>
               <p className="text-xl font-light text-zinc-500 dark:text-zinc-400 leading-relaxed">
                  Мы верим в "Цифровую Искренность". Каждый элемент в MatterForge — это не просто CSS-стиль, а результат симуляции. Если кнопка кажется тяжелой, это потому что её инерция рассчитана на основе плотности.
               </p>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
               <div className="space-y-3">
                  <div className="flex items-center gap-3 text-indigo-500">
                     <Box className="w-4 h-4" />
                     <span className="text-[10px] font-black uppercase tracking-widest">Property_A</span>
                  </div>
                  <div className="text-xs text-zinc-500 uppercase font-bold">Осязаемость</div>
               </div>
               <div className="space-y-3">
                  <div className="flex items-center gap-3 text-emerald-500">
                     <Layers className="w-4 h-4" />
                     <span className="text-[10px] font-black uppercase tracking-widest">Property_B</span>
                  </div>
                  <div className="text-xs text-zinc-500 uppercase font-bold">Оптическая Глубина</div>
               </div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/EngineeringReport.tsx
название файла: wooden/components/EngineeringReport.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useEffect } from 'react';
import { HardHat, Activity, Cpu, ShieldAlert, GitBranch, RefreshCw, Terminal, Sliders, ChevronRight, Sparkles, Database, Radio, Share2, Layers, Zap, Link as LinkIcon, Thermometer, Box, Target, Info, MousePointer2, Waves } from 'lucide-react';
import { LanguageContext } from '../App';
import { playUISound } from './AudioService';

const MycelialGrowthSim: React.FC = () => {
  const [nodes, setNodes] = useState<{id: number, x: number, y: number, nutrient: number, isTrunk: boolean}[]>([]);
  
  useEffect(() => {
    const initial = Array.from({ length: 15 }).map((_, i) => ({
      id: i,
      x: 10 + Math.random() * 80,
      y: 10 + Math.random() * 80,
      nutrient: Math.random(),
      isTrunk: Math.random() > 0.7
    }));
    setNodes(initial);

    const interval = setInterval(() => {
      setNodes(prev => prev.map(n => ({
        ...n,
        nutrient: Math.max(0.1, Math.min(1, n.nutrient + (Math.random() - 0.5) * 0.1))
      })));
    }, 1000);
    return () => clearInterval(interval);
  }, []);

  return (
    <div className="relative w-full h-full bg-panel rounded-[40px] border border-black/5 dark:border-white/5 overflow-hidden group/sim shadow-inner">
       <div className="absolute top-6 left-8 flex items-center gap-3 z-10">
          <Share2 className="w-4 h-4 text-emerald-500 animate-pulse" />
          <span className="text-[10px] font-mono text-text-muted uppercase tracking-widest font-black">Mycelium_v3.2_Live_Feed</span>
       </div>
       
       <svg className="absolute inset-0 w-full h-full">
          {nodes.map((node, i) => 
            nodes.slice(i + 1).map((target, j) => {
              const dist = Math.hypot(node.x - target.x, node.y - target.y);
              if (dist > 35) return null;
              
              const avgNutrient = (node.nutrient + target.nutrient) / 2;
              const isHeavy = node.isTrunk && target.isTrunk;
              
              return (
                <line 
                  key={`${i}-${j}`}
                  x1={`${node.x}%`} y1={`${node.y}%`}
                  x2={`${target.x}%`} y2={`${target.y}%`}
                  stroke={isHeavy ? "#10b981" : "#10b981"}
                  strokeWidth={isHeavy ? 2 + avgNutrient * 6 : 0.5 + avgNutrient}
                  strokeDasharray={isHeavy ? "none" : "4 4"}
                  opacity={isHeavy ? 0.4 + avgNutrient * 0.4 : 0.1 + avgNutrient * 0.2}
                  className="transition-all duration-[2000ms]"
                />
              );
            })
          )}
          {nodes.map(n => (
            <circle 
              key={n.id}
              cx={`${n.x}%`} cy={`${n.y}%`}
              r={n.isTrunk ? 4 + n.nutrient * 6 : 2 + n.nutrient * 3}
              fill={n.isTrunk ? "var(--text-main)" : "#10b981"}
              className="transition-all duration-1000"
              style={{ opacity: 0.3 + n.nutrient * 0.7 }}
            />
          ))}
       </svg>
       
       <div className="absolute bottom-6 right-8 text-right opacity-40 group-hover/sim:opacity-100 transition-opacity">
          <div className="text-[8px] font-mono text-emerald-600 dark:text-emerald-400 uppercase">Algorithm: Neural_Mycelial_Synthesis</div>
          <div className="text-[8px] font-mono text-text-muted uppercase">Health: NOMINAL_0x88</div>
       </div>
    </div>
  );
};

export const EngineeringReport: React.FC<{ theme: string; onNavigate: (id: any) => void }> = ({ theme, onNavigate }) => {
  const { t, isDiagnostic } = useContext(LanguageContext);
  const [cohesion, setCohesion] = useState(94.2);
  const isDark = theme === 'dark';

  useEffect(() => {
    const interval = setInterval(() => {
      setCohesion(prev => Math.min(100, Math.max(90, prev + (Math.random() - 0.5) * 1.2)));
    }, 2000);
    return () => clearInterval(interval);
  }, []);

  const directives = [
    { title: "Real-time Caustics", icon: Zap, status: "READY", color: "text-amber-500", desc: "Внедрение динамических каустических бликов для водных модулей." },
    { title: "Adaptive Audio Engine", icon: Waves, status: "PROTOTYPE", color: "text-indigo-500", desc: "Звуковой отклик, меняющийся в зависимости от массы компонента." },
    { title: "Spatial Raycasting", icon: MousePointer2, status: "CALIBRATING", color: "text-emerald-500", desc: "Высокоточное определение глубины клика в 3D стеке слоев." }
  ];

  return (
    <div className="animate-in fade-in duration-1000 space-y-32">
      {/* 1. HEADER & GLOBAL STATUS */}
      <div className="flex flex-col lg:flex-row gap-16 items-center">
        <div className="flex-1 space-y-12">
          <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-orange-500/10 border border-orange-500/20 text-orange-600 dark:text-orange-500 text-[10px] font-bold uppercase tracking-[0.4em]">
             <HardHat className="w-4 h-4" /> System_Integrity_Nexus
          </div>
          <h2 className="text-[80px] md:text-[120px] font-tech font-bold uppercase leading-[0.8] tracking-tighter text-text-main">
            Статус<br /><span className="text-orange-500">Матрицы.</span>
          </h2>
          <div className="space-y-6 max-w-2xl">
            <p className="text-2xl font-light text-text-muted leading-relaxed">
              Система MatterForge функционирует на пиковой когезии {cohesion.toFixed(1)}%. 
              Текущая итерация v19.4.5 подтвердила стабильность <span className="text-indigo-500 font-bold uppercase">Директивы #03</span>.
            </p>
            <div className="flex flex-wrap gap-3">
               <button onClick={() => onNavigate('BUILDER')} className="px-6 py-2.5 bg-orange-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-orange-600 transition-all shadow-xl shadow-orange-500/20 active:scale-95">Запустить Билдер</button>
               <button onClick={() => onNavigate('GENESIS')} className="px-6 py-2.5 glass-panel text-text-main rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-all active:scale-95">Иерархия Генезиса</button>
            </div>
          </div>
        </div>

        {/* Global Stability Gauge */}
        <div className="relative flex items-center justify-center w-80 h-80">
           <svg className="w-full h-full -rotate-90">
              <circle cx="50%" cy="50%" r="48%" fill="none" stroke="currentColor" strokeWidth="2" className="text-zinc-500/10" />
              <circle cx="50%" cy="50%" r="48%" fill="none" stroke="url(#orangeGrad)" strokeWidth="8" strokeDasharray="300" strokeDashoffset={300 - (cohesion/100)*300} className="transition-all duration-[2000ms]" style={{ strokeLinecap: 'round' }} />
              <defs>
                 <linearGradient id="orangeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" stopColor="#f97316" />
                    <stop offset="100%" stopColor="#fb923c" />
                 </linearGradient>
              </defs>
           </svg>
           <div className="absolute inset-0 flex flex-col items-center justify-center text-center">
              <div className="text-[10px] font-mono text-text-muted uppercase mb-1">Cohesion</div>
              <div className="text-6xl font-tech font-black text-text-main">{cohesion.toFixed(0)}%</div>
              <Activity className="w-5 h-5 text-orange-500 mt-4 animate-pulse" />
           </div>
        </div>
      </div>

      {/* 2. OPTIMIZATION DIRECTIVES */}
      <section className="space-y-12">
        <div className="flex items-center gap-4">
           <Sparkles className="w-6 h-6 text-indigo-500" />
           <h3 className="text-4xl font-tech font-bold uppercase text-text-main tracking-widest">Optimization_Directives</h3>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
           {directives.map((d, i) => (
             <div key={i} className="p-10 glass-panel rounded-[48px] space-y-8 group hover:translate-y-[-10px] transition-all duration-500">
                <div className="flex justify-between items-start">
                   <div className={`w-14 h-14 rounded-2xl bg-black/5 dark:bg-white/5 flex items-center justify-center ${d.color}`}>
                      <d.icon className="w-7 h-7" />
                   </div>
                   <span className="text-[8px] font-black px-3 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500">{d.status}</span>
                </div>
                <div className="space-y-3">
                   <h4 className="text-2xl font-tech font-bold uppercase text-text-main">{d.title}</h4>
                   <p className="text-sm font-light text-text-muted leading-relaxed">{d.desc}</p>
                </div>
                <div className="pt-6 border-t border-black/5 dark:border-white/5">
                   <button className="flex items-center gap-2 text-[10px] font-black uppercase text-indigo-500 group-hover:gap-4 transition-all">
                      Deploy_Test_Node <ChevronRight className="w-3 h-3" />
                   </button>
                </div>
             </div>
           ))}
        </div>
      </section>

      {/* 3. DIRECTIVE #03 VISUALIZATION */}
      <section className="space-y-12">
        <div className="flex flex-col md:flex-row justify-between items-end gap-6">
           <div className="flex items-center gap-6">
              <div className="w-16 h-16 rounded-[24px] bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center text-emerald-600">
                 <Share2 className="w-8 h-8" />
              </div>
              <div className="space-y-1">
                 <div className="flex items-center gap-3">
                    <span className="text-emerald-600 dark:text-emerald-400 text-[10px] font-black uppercase tracking-widest">#03_Directive_Organic</span>
                    <span className="px-2 py-0.5 rounded-full bg-emerald-500/20 text-[8px] text-emerald-600 dark:text-emerald-500 font-bold uppercase">Active</span>
                 </div>
                 <h3 className="text-4xl font-tech font-bold uppercase text-text-main">Мицелиальная Сетка Данных</h3>
              </div>
           </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
           <div className="lg:col-span-8 h-[550px]">
              <MycelialGrowthSim />
           </div>
           <div className="lg:col-span-4 flex flex-col gap-8">
              <div className="p-8 glass-panel rounded-[40px] space-y-6">
                 <div className="flex items-center gap-3 text-emerald-500">
                    <Info className="w-5 h-5" />
                    <span className="text-[10px] font-black uppercase tracking-widest">Сводка Директивы</span>
                 </div>
                 <p className="text-lg font-light text-text-muted leading-relaxed">
                   Связи между компонентами теперь являются живыми «дендритами». Они автоматически перераспределяют энергию (VRAM) в зависимости от частоты взаимодействия.
                 </p>
                 <div className="space-y-3 pt-4 border-t border-black/5 dark:border-white/10">
                    <div className="flex justify-between text-[10px] uppercase font-mono">
                       <span className="text-text-muted">Node_Density:</span>
                       <span className="text-text-main">1.24/OBJ</span>
                    </div>
                 </div>
              </div>
           </div>
        </div>
      </section>

      {/* FOOTER INFO */}
      <div className="flex justify-center opacity-20 hover:opacity-100 transition-opacity duration-700">
         <div className="flex items-center gap-8 py-8 border-t border-current/10 w-full max-w-4xl justify-center">
            <div className="text-[10px] font-mono uppercase tracking-[0.4em]">Engine: MATTER_FORGE_X19</div>
            <div className="w-1.5 h-1.5 rounded-full bg-orange-500" />
            <div className="text-[10px] font-mono uppercase tracking-[0.4em]">Protocol: COHERENCE_STB</div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/ExperimentalLabs.tsx
название файла: wooden/components/ExperimentalLabs.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useRef } from 'react';
import { 
  FlaskConical, Sparkles, Activity, Layers, 
  Cpu, Target, Sliders, Palette, Zap, 
  ChevronRight, ArrowRight, Gauge, Database
} from 'lucide-react';
import { LanguageContext } from '../App';
import { playUISound } from './AudioService';
import { BlueprintStub } from './SharedStubs';

// Импорт существующих экспериментов (если они вынесены в отдельные файлы)
// Для примера оставим логику маппинга внутри
import { EntropyFieldDisplacement } from './EntropyFieldDisplacement'; // Допустим, мы вынесли его

export const ExperimentalLabs: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const isDark = theme === 'dark';

  const experiments = [
    { key: 'stackDecon', id: '01' },
    { key: 'depthBuffer', id: '02' },
    { key: 'teleport', id: '03' },
    { key: 'pressure', id: '04' },
    { key: 'spectral', id: '05' },
    { key: 'vortex', id: '06' },
    { key: 'overdrive', id: '07' },
    { key: 'thermal', id: '08' },
    { key: 'mitosis', id: '09' }
  ];

  return (
    <div className="animate-in fade-in duration-1000 space-y-40 pb-40">
      {/* Introduction */}
      <div className="text-center space-y-8">
         <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-fuchsia-600/10 border border-fuchsia-600/20 text-fuchsia-500 text-[9px] font-bold uppercase tracking-[0.5em]">
            <FlaskConical className="w-3 h-3" /> Experimental_Registry_v19.4
         </div>
         <h2 className="text-8xl font-tech font-bold uppercase text-zinc-900 dark:text-white leading-none tracking-tighter">
            {t.experiments.title}<br /><span className="text-fuchsia-600">{t.experiments.titleAccent}</span>
         </h2>
         <p className="max-w-2xl mx-auto text-xl font-light opacity-60">
            {t.experiments.desc}
         </p>
      </div>

      <div className="grid grid-cols-1 gap-32">
         {experiments.map((exp, i) => {
            const data = (t.experiments as any)[exp.key];
            return (
              <section key={exp.key} className="space-y-16">
                 <div className="flex flex-col md:flex-row justify-between items-end gap-6 border-b border-black/5 dark:border-white/5 pb-8">
                    <div className="space-y-4">
                       <div className="text-[10px] font-mono text-fuchsia-500 font-bold uppercase tracking-[0.4em]">Exp_Sequence_{exp.id}</div>
                       <h3 className="text-5xl font-tech font-bold text-zinc-900 dark:text-white uppercase leading-none">{data.title}</h3>
                       <p className="text-xl font-light text-zinc-500 dark:text-zinc-400 max-w-2xl leading-relaxed">{data.desc}</p>
                    </div>
                    <div className="p-6 bg-zinc-900 border border-white/10 rounded-[32px] flex items-center gap-6 shadow-xl">
                       <div className="text-right">
                          <div className="text-[8px] font-mono text-zinc-500 uppercase">Phase</div>
                          <div className="text-xl font-tech font-bold text-fuchsia-500">ALPHA_LOG</div>
                       </div>
                       <div className="w-px h-10 bg-white/10" />
                       <Gauge className="w-8 h-8 text-fuchsia-500 animate-pulse" />
                    </div>
                 </div>

                 {/* Здесь мы рендерим реальный компонент если он есть, иначе заглушку */}
                 <div className="relative">
                    {/* Плейсхолдер для будущей интеграции реальных компонентов */}
                    <BlueprintStub 
                      index={i} 
                      title={`${data.title} // Structural_View`} 
                      desc="Модуль находится в процессе глубокой калибровки. Тестирование кинетических связей и оптических искажений в Z-пространстве." 
                    />
                 </div>
              </section>
            );
         })}
      </div>

      {/* Footer Info */}
      <div className="flex justify-center opacity-20">
         <div className="flex items-center gap-8 py-12 border-t border-current/10 w-full max-w-4xl justify-center text-[10px] font-mono uppercase tracking-[0.5em]">
            <span>Total_Experiments: 09</span>
            <div className="w-1 h-1 rounded-full bg-fuchsia-500" />
            <span>Archive_Access: GRANTED</span>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/GenesisMasterShowcase.tsx
название файла: wooden/components/GenesisMasterShowcase.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect } from 'react';
import { 
  Cpu, Activity, Zap, Shield, Maximize2, 
  Layers, Sliders, Target, Search, Hexagon, 
  Radio, RefreshCw, Sparkles, Crosshair, 
  Terminal, Type, MousePointer2, ChevronRight,
  ShieldCheck, Radar, Grid3X3, Waves, Box,
  Fingerprint, Compass, Database, Network, 
  Binary, Share2, Eye
} from 'lucide-react';
import { playUISound } from './AudioService';

type AtomMode = 
  | 'HEADER' | 'INPUT' | 'METRICS' | 'SHIELD' 
  | 'SCAN' | 'PULSE' | 'LOD' | 'TERMINAL' 
  | 'BIOMETRIC' | 'QUANTUM' | 'DATA' | 'NETWORK';

export const GenesisMasterShowcase: React.FC<{ theme: 'dark' | 'light' }> = ({ theme }) => {
  const [active, setActive] = useState(false);
  const [mode, setMode] = useState<AtomMode>('HEADER');
  const [rotation, setRotation] = useState({ x: 0, y: 0 });
  const [isSyncing, setIsSyncing] = useState(false);
  const [inputValue, setInputValue] = useState('');
  const [lastPulse, setLastPulse] = useState(0);
  
  const cardRef = useRef<HTMLDivElement>(null);
  const isDark = theme === 'dark';

  const physics = {
    stiffness: 0.12,
    damping: 0.85,
    mass: 2.0
  };

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!active || !cardRef.current) return;
    const rect = cardRef.current.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width - 0.5) * (15 / physics.mass);
    const y = ((e.clientY - rect.top) / rect.height - 0.5) * (-15 / physics.mass);
    setRotation({ x: y, y: x });
  };

  const handleNodeClick = (newMode: AtomMode) => {
    if (newMode === mode) return;
    setIsSyncing(true);
    setLastPulse(Date.now());
    playUISound('process');
    
    setTimeout(() => {
      setMode(newMode);
      setIsSyncing(false);
      playUISound('success');
    }, 450);
  };

  const renderModeContent = () => {
    switch(mode) {
      case 'HEADER':
        return (
          <div className="space-y-6 animate-in fade-in slide-in-from-left-4 duration-500">
             <div className="flex items-center gap-3 text-indigo-400">
                <Box className="w-4 h-4" />
                <span className="text-[10px] font-mono uppercase tracking-[0.4em]">Structure_v4</span>
             </div>
             <h1 className="text-5xl md:text-7xl font-tech font-bold text-white uppercase tracking-tighter leading-[0.85]">
               Matter<br /><span className="text-indigo-400">Synthesis_09</span>
             </h1>
             <p className="text-zinc-400 text-lg font-light leading-relaxed max-w-md">
               Универсальный протокол формирования пространственных интерфейсов на основе нейронных паттернов.
             </p>
          </div>
        );
      case 'TERMINAL':
        return (
          <div className="space-y-4 animate-in fade-in duration-500 font-mono">
             <div className="flex items-center gap-2 text-emerald-500 mb-4">
                <Terminal className="w-4 h-4" />
                <span className="text-[10px] uppercase font-bold tracking-widest">Kernel_Access_Console</span>
             </div>
             <div className="text-[11px] text-zinc-500 space-y-1">
                <p className="text-emerald-400/80"> INITIALIZING_ATOMIC_CORE... OK</p>
                <p className="text-indigo-400/80"> MAPPING_Z_STACK_0x882... DONE</p>
                <p className="animate-pulse"> AWAITING_COMMAND_INJECTION_</p>
             </div>
          </div>
        );
      case 'BIOMETRIC':
        return (
          <div className="flex flex-col items-center py-8 animate-in zoom-in-95 duration-500">
             <div className="relative mb-6">
                <Fingerprint className="w-24 h-24 text-indigo-500" />
                <div className="absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse" />
             </div>
             <div className="text-center">
                <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest mb-1">Fingerprint_Scan</div>
                <div className="text-2xl font-tech font-bold text-white uppercase">Identity_Verified</div>
             </div>
          </div>
        );
      case 'QUANTUM':
        return (
          <div className="relative h-40 flex items-center justify-center animate-in fade-in duration-1000">
             <div className="absolute inset-0 border border-dashed border-indigo-500/20 rounded-full animate-spin-slow" />
             <div className="flex gap-4">
                <div className="w-16 h-16 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center animate-bounce">
                   <Zap className="w-8 h-8 text-indigo-400" />
                </div>
                <div className="w-16 h-16 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center animate-pulse delay-150">
                   <Box className="w-8 h-8 text-emerald-400" />
                </div>
             </div>
             <div className="absolute -bottom-4 text-[9px] font-mono text-indigo-500 uppercase tracking-[0.5em] font-black">Superposition_Active</div>
          </div>
        );
      case 'INPUT':
        return (
          <div className="space-y-8 animate-in fade-in zoom-in-95 duration-500 py-4">
             <div className="text-[10px] font-mono text-zinc-500 uppercase font-black tracking-widest">Awaiting_Command_Input...</div>
             <div className="relative group/input">
                <input 
                  type="text"
                  value={inputValue}
                  onChange={(e) => setInputValue(e.target.value)}
                  className="relative w-full bg-white/5 border border-white/10 rounded-2xl p-8 text-3xl font-tech text-white outline-none focus:border-indigo-500/50 transition-all placeholder:opacity-20"
                  placeholder="_EXECUTE_SYSTEM_SCAN"
                />
                <Terminal className="absolute right-8 top-1/2 -translate-y-1/2 w-6 h-6 text-indigo-500 opacity-40" />
             </div>
          </div>
        );
      case 'METRICS':
        return (
          <div className="grid grid-cols-2 gap-10 animate-in fade-in slide-in-from-bottom-4 duration-500">
             <div className="space-y-3">
                <div className="flex items-center gap-2 text-indigo-400">
                   <Activity className="w-4 h-4" />
                   <span className="text-[10px] font-mono uppercase font-black tracking-widest">Coherence_Sync</span>
                </div>
                <div className="text-6xl font-tech font-bold text-white tracking-tighter">0.998</div>
             </div>
             <div className="space-y-3">
                <div className="flex items-center gap-2 text-emerald-400">
                   <Target className="w-4 h-4" />
                   <span className="text-[10px] font-mono uppercase font-black tracking-widest">Runtime_LOD</span>
                </div>
                <div className="text-6xl font-tech font-bold text-white tracking-tighter">ULTRA</div>
             </div>
          </div>
        );
      case 'NETWORK':
        return (
          <div className="space-y-6 animate-in fade-in duration-500">
             <div className="flex justify-between items-center text-indigo-400">
                <span className="text-[10px] font-mono uppercase font-black">Synaptic_Lattice</span>
                <Network className="w-5 h-5 animate-pulse" />
             </div>
             <div className="h-40 bg-indigo-500/5 border border-indigo-500/20 rounded-[40px] relative overflow-hidden flex items-center justify-center">
                <div className="absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,#6366f1_1px,transparent_1px)] bg-[length:20px_20px]" />
                <Share2 className="w-12 h-12 text-indigo-500/40 animate-spin-slow" />
             </div>
          </div>
        );
      case 'DATA':
        return (
          <div className="space-y-4 animate-in slide-in-from-bottom-2 duration-500">
             <div className="flex justify-between font-mono text-[9px] text-zinc-500">
                <span>INCOMING_PACKETS</span>
                <Database className="w-3 h-3" />
             </div>
             <div className="grid grid-cols-4 gap-2">
                {[...Array(8)].map((_, i) => (
                  <div key={i} className="h-12 bg-white/5 rounded-xl border border-white/10 flex items-end p-2">
                     <div className="w-full bg-indigo-500" style={{ height: `${Math.random() * 100}%` }} />
                  </div>
                ))}
             </div>
          </div>
        );
      default:
        return <div className="p-12 text-zinc-500 italic">Sector_In_Development...</div>;
    }
  };

  return (
    <div className="scroll-mt-32 py-24 space-y-12">
      {/* Section Header */}
      <div className="flex flex-col md:flex-row justify-between items-end gap-6 px-4">
        <div className="space-y-4">
           <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[8px] font-bold uppercase tracking-[0.4em]">
              <Hexagon className="w-3 h-3 animate-pulse" /> Master_Blueprint_Reference
           </div>
           <h2 className="text-6xl md:text-8xl font-tech font-bold text-zinc-900 dark:text-white uppercase tracking-tighter leading-none">
              Универсальный <br /><span className="text-indigo-500">Атом.</span>
           </h2>
        </div>
        <div className="flex items-center gap-4 text-right opacity-40">
           <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">Calibration: Matter_Fluid_v4</div>
           <div className="w-px h-12 bg-indigo-500/20" />
           <Radio className={`w-6 h-6 ${isSyncing ? 'text-indigo-500 animate-pulse' : 'text-zinc-800'}`} />
        </div>
      </div>

      <div className={`relative flex flex-col xl:flex-row gap-1 border p-1 rounded-[80px] overflow-hidden transition-all duration-1000
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-100 border-black/5 shadow-inner'}
      `}>
         
         {/* 1. LEFT: DIAGNOSTICS */}
         <div className={`w-full xl:w-96 p-12 flex flex-col gap-12 border-r ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'}`}>
            <div className="space-y-8">
               <div className="flex items-center gap-3 text-indigo-500">
                  <Activity className="w-5 h-5" />
                  <span className="text-[10px] font-black uppercase tracking-widest">Telemetry_Stream</span>
               </div>
               <div className="space-y-6">
                  {[
                    { label: 'Mass', val: '1.24_kg', progress: active ? 82 : 20 },
                    { label: 'Viscosity', val: '0.42_Pa', progress: active ? 45 : 15 },
                    { label: 'Refraction', val: '1.45_n', progress: active ? 94 : 30 }
                  ].map((spec, i) => (
                    <div key={i} className="space-y-3">
                       <div className="flex justify-between text-[10px] font-mono uppercase">
                          <span className="text-zinc-500">{spec.label}</span>
                          <span className="text-text-main dark:text-white font-bold">{spec.val}</span>
                       </div>
                       <div className="h-0.5 bg-black/10 dark:bg-white/5 rounded-full overflow-hidden">
                          <div className="h-full bg-indigo-500 transition-all duration-1000" style={{ width: `${spec.progress}%` }} />
                       </div>
                    </div>
                  ))}
               </div>
            </div>

            <div className="mt-auto p-8 rounded-[40px] bg-black/40 border border-white/5 overflow-hidden group/gauge shadow-inner">
               <div className="relative z-10 space-y-4">
                  <div className="flex items-center gap-3 text-indigo-400">
                     <RefreshCw className={`w-4 h-4 ${isSyncing ? 'animate-spin' : ''}`} />
                     <span className="text-[9px] font-bold uppercase tracking-widest font-mono">Kernel_Status</span>
                  </div>
                  <div className="text-4xl font-tech font-bold text-white uppercase tracking-tighter leading-none">
                    {mode}<span className="text-xs opacity-30 ml-2">v4</span>
                  </div>
               </div>
            </div>
         </div>

         {/* 2. CENTER: THE MATTER ATOM (Universal Container) */}
         <div 
            ref={cardRef}
            onMouseMove={handleMouseMove}
            onMouseEnter={() => { setActive(true); playUISound('hover'); }}
            onMouseLeave={() => { setActive(false); setRotation({ x: 0, y: 0 }); }}
            className="flex-1 min-h-[800px] relative flex items-center justify-center p-12 md:p-24 perspective-2000 overflow-hidden bg-zinc-950 shadow-inner group/viewport cursor-crosshair"
         >
            <div className="absolute inset-0 pointer-events-none opacity-[0.03]" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />
            
            {/* 3D Structure */}
            <div 
              className="relative w-full max-w-2xl transition-all duration-700 ease-out preserve-3d"
              style={{ transform: `rotateX(${rotation.x}deg) rotateY(${rotation.y}deg)` }}
            >
               {/* 3D Glass Stack */}
               {[
                 { z: -60, blur: 40, op: 0.02 },
                 { z: -30, blur: 20, op: 0.05 },
                 { z: 0, blur: 10, op: 0.1 },
               ].map((layer, i) => (
                 <div 
                   key={i}
                   className={`absolute inset-0 border-2 rounded-[64px] transition-all duration-500 border-white/10
                    ${isSyncing ? 'animate-pulse border-indigo-500/50 shadow-[0_0_50px_rgba(99,102,241,0.2)]' : ''}
                   `}
                   style={{ 
                     transform: `translateZ(${layer.z}px)`,
                     backgroundColor: `rgba(255, 255, 255, ${active ? layer.op : 0.01})`,
                     backdropFilter: `blur(${active ? layer.blur : 5}px)`,
                   }}
                 />
               ))}

               {/* MAIN INTERFACE LAYER (Adaptive Height) */}
               <div 
                 className={`relative z-50 border-2 border-white/20 rounded-[64px] p-12 md:p-16 transition-all duration-500
                   ${active ? 'bg-white/5 backdrop-blur-xl shadow-2xl border-white/30' : 'bg-transparent border-white/5 shadow-none'}
                 `}
                 style={{ transform: 'translateZ(60px)' }}
               >
                  <div className="flex flex-col h-full gap-16">
                    <div className="flex justify-between items-start">
                       <div className={`w-24 h-24 rounded-[36px] bg-indigo-600 flex items-center justify-center text-white shadow-2xl transition-all duration-700 ${isSyncing ? 'scale-110 rotate-12 bg-emerald-500' : ''}`}>
                          {mode === 'HEADER' && <Type className="w-12 h-12" />}
                          {mode === 'INPUT' && <Terminal className="w-12 h-12" />}
                          {mode === 'METRICS' && <Activity className="w-12 h-12" />}
                          {mode === 'TERMINAL' && <Binary className="w-12 h-12" />}
                          {mode === 'BIOMETRIC' && <Fingerprint className="w-12 h-12" />}
                          {mode === 'QUANTUM' && <Zap className="w-12 h-12" />}
                          {mode === 'DATA' && <Database className="w-12 h-12" />}
                          {mode === 'NETWORK' && <Network className="w-12 h-12" />}
                          {mode === 'SCAN' && <Radar className="w-12 h-12" />}
                          {mode === 'LOD' && <Grid3X3 className="w-12 h-12" />}
                       </div>
                       <div className="text-right">
                          <div className="text-[10px] font-mono text-indigo-400 font-black uppercase tracking-widest mb-1">Atom_Protocol</div>
                          <div className="text-5xl font-tech font-bold text-white uppercase tracking-widest leading-none">0x88.A</div>
                       </div>
                    </div>
                    
                    <div className="flex-1">
                       {renderModeContent()}
                    </div>

                    <div className="flex justify-between items-end border-t border-white/10 pt-10 mt-auto">
                       <div className="flex gap-12">
                          <div className="space-y-1">
                             <div className="text-[7px] font-mono text-zinc-500 uppercase tracking-widest">Integrity</div>
                             <div className="text-xs font-bold text-emerald-500 font-mono tracking-widest uppercase">Calibrated</div>
                          </div>
                          <div className="space-y-1">
                             <div className="text-[7px] font-mono text-zinc-500 uppercase tracking-widest">Latency</div>
                             <div className="text-xs font-bold text-indigo-400 font-mono">0.04ms</div>
                          </div>
                       </div>
                       <div className={`p-5 rounded-[28px] bg-zinc-900 border transition-all duration-500 ${active ? 'border-indigo-500/50 shadow-xl' : 'border-white/10 shadow-none'}`}>
                          <ShieldCheck className={`w-6 h-6 ${isSyncing ? 'text-emerald-500 animate-pulse' : 'text-indigo-500'}`} />
                       </div>
                    </div>
                  </div>

                  <div key={lastPulse} className="absolute inset-0 rounded-[64px] border-4 border-indigo-500/40 pointer-events-none animate-ping opacity-0" style={{ animationDuration: '1s' }} />

                  {/* Corner Brackets */}
                  <div className={`absolute top-0 left-0 w-12 h-12 border-t-2 border-l-2 border-indigo-500/40 transition-all duration-700 ${active ? 'scale-100 opacity-100' : 'scale-50 opacity-0'}`} />
                  <div className={`absolute bottom-0 right-0 w-12 h-12 border-b-2 border-r-2 border-indigo-500/40 transition-all duration-700 ${active ? 'scale-100 opacity-100' : 'scale-50 opacity-0'}`} />
               </div>
            </div>

            {/* Status Overlay */}
            <div className={`absolute bottom-12 right-12 text-right transition-all duration-500 ${active ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>
               <div className="flex items-center gap-5 justify-end">
                  <div className="space-y-1">
                     <div className="text-[8px] font-mono text-zinc-600 uppercase tracking-widest">Observer_Lock</div>
                     <div className={`text-xl font-tech font-bold uppercase tracking-widest ${isSyncing ? 'text-indigo-400 animate-pulse' : 'text-emerald-500'}`}>
                        {isSyncing ? 'Syncing...' : 'Synchronized'}
                     </div>
                  </div>
                  <div className="p-5 bg-zinc-900 border border-white/10 rounded-[32px] shadow-2xl">
                     <Crosshair className={`w-7 h-7 text-indigo-500 ${isSyncing ? 'animate-spin' : 'animate-spin-slow'}`} />
                  </div>
               </div>
            </div>
         </div>

         {/* 3. RIGHT: LATTICE COMMAND (Mode Selector) */}
         <div className={`w-full xl:w-96 p-12 flex flex-col gap-8 border-l ${isDark ? 'bg-[#0a0a0c] border-white/5' : 'bg-zinc-50 border-black/5'}`}>
            <div className="space-y-4">
               <div className="flex items-center gap-3 text-indigo-500">
                  <Sliders className="w-5 h-5" />
                  <span className="text-[10px] font-black uppercase tracking-widest">Lattice_Command</span>
               </div>
               <p className="text-[10px] font-light text-zinc-500 leading-relaxed uppercase tracking-tight">
                 Выберите узел для перепрошивки сущности «Атома» и изменения его функциональной специализации.
               </p>
            </div>
            
            <div className="flex-1 grid grid-cols-2 gap-3 overflow-y-auto no-scrollbar max-h-[550px] pr-2">
               {[
                 { id: 'HEADER' as AtomMode, icon: Type, label: 'Header' },
                 { id: 'TERMINAL' as AtomMode, icon: Binary, label: 'Kernel' },
                 { id: 'INPUT' as AtomMode, icon: Terminal, label: 'Field' },
                 { id: 'METRICS' as AtomMode, icon: Activity, label: 'Metrics' },
                 { id: 'BIOMETRIC' as AtomMode, icon: Fingerprint, label: 'Scan' },
                 { id: 'QUANTUM' as AtomMode, icon: Zap, label: 'Quantum' },
                 { id: 'DATA' as AtomMode, icon: Database, label: 'Data' },
                 { id: 'NETWORK' as AtomMode, icon: Network, label: 'Net' },
                 { id: 'SCAN' as AtomMode, icon: Radar, label: 'Radar' },
                 { id: 'LOD' as AtomMode, icon: Grid3X3, label: 'Mesh' }
               ].map((node) => (
                 <button 
                   key={node.id} 
                   onClick={() => handleNodeClick(node.id)}
                   className={`p-6 rounded-[32px] border flex flex-col items-center justify-center gap-4 transition-all duration-500 group/node relative overflow-hidden
                    ${mode === node.id 
                      ? 'bg-indigo-600 border-indigo-400 scale-105 shadow-xl' 
                      : 'bg-white/5 border-white/5 hover:border-indigo-500/30'}
                   `}
                 >
                    <div className={`w-12 h-12 rounded-2xl flex items-center justify-center transition-all 
                      ${mode === node.id 
                        ? 'bg-white/20' 
                        : 'bg-zinc-950 group-hover/node:bg-indigo-500/20'}
                    `}>
                       <node.icon className={`w-6 h-6 
                        ${mode === node.id 
                          ? 'text-white' 
                          : 'text-zinc-700 group-hover/node:text-indigo-400'}
                       `} />
                    </div>
                    <span className={`text-[9px] font-mono font-bold uppercase tracking-widest
                      ${mode === node.id 
                        ? 'text-white' 
                        : 'text-zinc-500'}
                    `}>{node.label}</span>
                 </button>
               ))}
            </div>

            <div className="pt-8 border-t border-black/5 dark:border-white/5 space-y-6">
               <div className="flex justify-between items-center">
                  <div className="flex items-center gap-3 text-indigo-500">
                     <MousePointer2 className="w-4 h-4" />
                     <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Registry_Verify</span>
                  </div>
                  {isSyncing && <Sparkles className="w-4 h-4 text-emerald-500 animate-pulse" />}
               </div>
               <div className="h-1 bg-white/5 rounded-full overflow-hidden">
                  <div className={`h-full bg-emerald-500 transition-all duration-1000 ${isSyncing ? 'w-full' : 'w-10%'}`} />
               </div>
               <div className="text-[8px] font-mono text-zinc-700 uppercase tracking-tighter flex justify-between">
                 <span>Status: {isSyncing ? 'CALIBRATING' : 'READY'}</span>
                 <span>P_ID: 0x882{mode[0]}</span>
               </div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/GenesisTimeline.tsx
название файла: wooden/components/GenesisTimeline.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState } from 'react';
import { Target, Zap, Layers, Cpu, Box, CheckCircle2 } from 'lucide-react';
import { playUISound } from './AudioService';

export const GenesisTimeline: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';
  const [hovered, setHovered] = useState<number | null>(null);

  const steps = [
    { date: 'Step_01', title: 'Neural_Seeding', desc: 'Первичный посев нейронных связей в вакуумную среду.', icon: Target },
    { date: 'Step_02', title: 'Mass_Injection', desc: 'Наполнение структуры физической массой и инерцией.', icon: Layers },
    { date: 'Step_03', title: 'Optic_Calibration', desc: 'Настройка индексов преломления и хроматики.', icon: Zap },
    { date: 'Step_04', title: 'Cohesion_Final', desc: 'Стабилизация когезии и выход в рабочую фазу.', icon: CheckCircle2 }
  ];

  return (
    <div className="scroll-mt-32">
      <div className="mb-24 flex flex-col md:flex-row justify-between items-end gap-12">
        <div className="space-y-4">
           <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Development_Roadmap_v2</span>
           <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
              Генезис <br /><span className="text-indigo-500">Системы.</span>
           </h2>
        </div>
      </div>

      <div className="relative">
         {/* Vertical Connector Line */}
         <div className={`absolute left-1/2 -translate-x-1/2 top-0 bottom-0 w-px ${isDark ? 'bg-white/5' : 'bg-black/5'}`} />

         <div className="space-y-32">
            {steps.map((step, i) => (
              <div 
                key={i}
                onMouseEnter={() => { setHovered(i); playUISound('hover'); }}
                onMouseLeave={() => setHovered(null)}
                className={`flex items-center gap-20 transition-all duration-700 ${i % 2 === 0 ? 'flex-row' : 'flex-row-reverse text-right'}`}
              >
                 <div className={`flex-1 space-y-4 transition-all duration-700 ${hovered === i ? 'scale-105' : 'opacity-40 blur-[1px]'}`}>
                    <div className="text-[10px] font-mono text-indigo-500 font-black uppercase tracking-widest">{step.date}</div>
                    <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase tracking-tight">{step.title}</h3>
                    <p className={`text-lg font-light leading-relaxed max-w-sm ${i % 2 !== 0 ? 'ml-auto' : ''}`}>{step.desc}</p>
                 </div>

                 <div className="relative z-10 flex flex-col items-center">
                    <div className={`w-20 h-20 rounded-3xl flex items-center justify-center transition-all duration-700 border-2
                      ${hovered === i ? 'bg-indigo-600 border-white text-white shadow-[0_0_50px_rgba(99,102,241,0.5)] scale-125 rotate-12' : (isDark ? 'bg-zinc-900 border-white/10 text-zinc-700' : 'bg-white border-black/5 text-zinc-300')}
                    `}>
                       <step.icon className="w-8 h-8" />
                    </div>
                 </div>

                 <div className="flex-1 hidden md:block" />
              </div>
            ))}
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/GlassCore.tsx
название файла: wooden/components/GlassCore.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect } from 'react';
import { Target, Zap, Cpu, Aperture, Box } from 'lucide-react';

interface Props {
  theme: 'dark' | 'light';
}

export const GlassCore: React.FC<Props> = ({ theme }) => {
  const [rotation, setRotation] = useState(0);
  const [tilt, setTilt] = useState({ x: 0, y: 0 });
  const isDark = theme === 'dark';

  useEffect(() => {
    const timer = setInterval(() => setRotation(prev => prev + 0.2), 20);
    return () => clearInterval(timer);
  }, []);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width - 0.5;
    const y = (e.clientY - rect.top) / rect.height - 0.5;
    setTilt({ x: y * 40, y: x * -40 });
  };

  return (
    <div 
      onMouseMove={handleMouseMove}
      onMouseLeave={() => setTilt({ x: 0, y: 0 })}
      className="relative w-[500px] h-[500px] flex items-center justify-center perspective-2000 group cursor-crosshair scale-110 md:scale-125"
    >
       {/* Ambient Depth Glow */}
       <div 
         className={`absolute inset-0 rounded-full transition-all duration-1000 blur-[120px] ${isDark ? 'bg-indigo-600 opacity-20' : 'bg-indigo-300 opacity-30'}`}
         style={{ transform: `translate(${tilt.y}px, ${tilt.x}px)` }}
       />

       {/* THE MASTER OBJECT */}
       <div 
         className="relative w-full h-full transition-transform duration-700 ease-out preserve-3d"
         style={{ transform: `rotateX(${15 + tilt.x}deg) rotateY(${tilt.y}deg)` }}
       >
          {/* Main Structural Shell */}
          <div 
            className={`absolute inset-10 rounded-[80px] border transition-all duration-1000 overflow-hidden
              ${isDark ? 'bg-white/5 border-white/20 shadow-2xl' : 'bg-white/80 border-black/5 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.1)]'}
            `}
            style={{ 
              backdropFilter: 'blur(60px)',
              transform: 'translateZ(40px)',
              background: isDark 
                ? `linear-gradient(${45 + rotation}deg, rgba(255,255,255,0.1), transparent)`
                : `linear-gradient(${45 + rotation}deg, rgba(99,102,241,0.05), transparent)`
            }}
          >
             {/* Internal Scanning HUD */}
             <div className={`absolute inset-0 bg-[linear-gradient(to_bottom,transparent_50%,rgba(99,102,241,0.05)_50%)] bg-[length:100%_4px] animate-pulse ${!isDark && 'opacity-20'}`} />
             
             {/* Center Processor */}
             <div className="absolute inset-0 flex flex-col items-center justify-center gap-8">
                <div className={`w-28 h-28 rounded-[40px] flex items-center justify-center transition-all duration-1000 shadow-[0_0_50px_rgba(99,102,241,0.3)]
                  ${isDark ? 'bg-indigo-600 text-white' : 'bg-zinc-900 text-white'}
                `}>
                   <Aperture className="w-14 h-14 animate-spin-slow" />
                </div>
                <div className="text-center">
                   <div className="text-[10px] font-mono text-indigo-500 font-black uppercase tracking-[0.6em] mb-3 animate-pulse">Matter_Core_v4.2</div>
                   <div className={`text-5xl font-tech font-bold uppercase tracking-tighter ${isDark ? 'text-white' : 'text-zinc-900'}`}>0x8892_STB</div>
                </div>
             </div>

             {/* HUD Detail brackets */}
             <div className="absolute top-10 left-10 w-6 h-6 border-t-2 border-l-2 border-indigo-500/30" />
             <div className="absolute bottom-10 right-10 w-6 h-6 border-b-2 border-r-2 border-indigo-500/30" />
          </div>

          {/* External Orbital Elements */}
          <div 
            className={`absolute inset-[-20px] border rounded-full opacity-20 pointer-events-none ${isDark ? 'border-white/5' : 'border-black/5'}`}
            style={{ transform: 'translateZ(-100px)' }}
          />
       </div>

       {/* System Telemetry Labels */}
       <div className="absolute bottom-4 left-4 flex flex-col gap-2 opacity-30">
          <div className="flex items-center gap-3">
             <Zap className="w-4 h-4 text-indigo-500" />
             <span className={`text-[9px] font-mono font-bold uppercase tracking-widest ${isDark ? 'text-white' : 'text-zinc-900'}`}>Energy: 1.21_GW</span>
          </div>
       </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/GlobalLoadMatrix.tsx
название файла: wooden/components/GlobalLoadMatrix.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React from 'react';
import { Activity, Cpu, Shield, Globe } from 'lucide-react';

export const GlobalLoadMatrix: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';
  const nodes = Array.from({ length: 48 });

  return (
    <div className="scroll-mt-32">
      <div className="flex flex-col md:flex-row justify-between items-end gap-12 mb-24">
         <div className="space-y-4">
            <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Realtime_Node_Analytics</span>
            <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
               Глобальный <br /><span className="text-indigo-500">Контур.</span>
            </h2>
         </div>
         <div className="p-8 bg-black/40 border border-white/5 rounded-[40px] flex items-center gap-10">
            <div className="space-y-2">
               <div className="text-[8px] font-mono text-zinc-500 uppercase">Average_Load</div>
               <div className="text-4xl font-tech font-bold text-emerald-500">0.04ms</div>
            </div>
            <div className="w-px h-12 bg-white/5" />
            <div className="space-y-2">
               <div className="text-[8px] font-mono text-zinc-500 uppercase">Uptime</div>
               <div className="text-4xl font-tech font-bold text-white">99.9%</div>
            </div>
         </div>
      </div>

      <div className={`p-12 rounded-[64px] border ${isDark ? 'bg-black/20 border-white/5' : 'bg-white border-black/5 shadow-2xl'} overflow-hidden relative`}>
         <div className="grid grid-cols-4 md:grid-cols-8 lg:grid-cols-12 gap-4 relative z-10">
            {nodes.map((_, i) => {
              const load = Math.random();
              return (
                <div 
                  key={i}
                  className={`aspect-square rounded-xl border transition-all duration-1000 flex items-center justify-center group cursor-crosshair
                    ${isDark ? 'bg-white/5 border-white/5 hover:border-indigo-500/50' : 'bg-black/5 border-black/5 hover:border-indigo-500/50'}
                  `}
                >
                   <div 
                     className={`w-2 h-2 rounded-full transition-all duration-1000 ${load > 0.8 ? 'bg-rose-500 shadow-[0_0_10px_#f43f5e] animate-pulse' : load > 0.4 ? 'bg-indigo-500' : 'bg-zinc-800'}`}
                     style={{ transform: `scale(${0.5 + load * 1.5})` }}
                   />
                   
                   {/* Tooltip Simulation */}
                   <div className="absolute opacity-0 group-hover:opacity-100 transition-opacity bg-zinc-900 text-white text-[7px] font-mono py-1 px-2 rounded -top-8 pointer-events-none whitespace-nowrap z-20">
                      ID: 0x{i.toString(16)} | L: {(load * 100).toFixed(1)}%
                   </div>
                </div>
              );
            })}
         </div>

         {/* Ambient Grid Lines */}
         <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '40px 40px' }} />
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/HapticPhysicsLab.tsx
название файла: wooden/components/HapticPhysicsLab.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect } from 'react';
import { Target, Zap, Waves, Droplets, Sliders, Activity, Gauge, Fingerprint, Move } from 'lucide-react';
import { playUISound } from './AudioService';

export const HapticPhysicsLab: React.FC<{ theme: string }> = ({ theme }) => {
  const [mousePos, setMousePos] = useState({ x: 50, y: 50 });
  const [viscosity, setViscosity] = useState(0.42);
  const [tension, setTension] = useState(0.65);
  const [intensity, setIntensity] = useState(0);
  const containerRef = useRef<HTMLDivElement>(null);

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!containerRef.current) return;
    const rect = containerRef.current.getBoundingClientRect();
    if (rect) {
      const nx = ((e.clientX - rect.left) / rect.width) * 100;
      const ny = ((e.clientY - rect.top) / rect.height) * 100;
      setMousePos({ x: nx, y: ny });
      setIntensity(prev => Math.min(1, prev + 0.05));
    }
  };

  useEffect(() => {
    const decay = setInterval(() => {
      setIntensity(prev => Math.max(0, prev - 0.02));
    }, 50);
    return () => clearInterval(decay);
  }, []);

  return (
    <div className="relative rounded-[48px] border overflow-hidden bg-zinc-950 border-white/5 shadow-2xl p-1">
      {/* HEADER */}
      <div className="px-8 py-4 flex items-center justify-between border-b border-white/5 bg-zinc-900/50">
         <div className="flex gap-2">
            <div className="w-3 h-3 rounded-full bg-indigo-500/50 animate-pulse" />
            <div className="text-[10px] font-mono font-bold uppercase tracking-[0.4em] opacity-40 text-indigo-500">Viscosity_Solvent_Workbench_v4.2</div>
         </div>
         <div className="flex items-center gap-6">
            <div className="text-[8px] font-mono text-zinc-600 uppercase tracking-widest">Solvent_Type: SYNTH_GEL</div>
            <div className="w-12 h-1 bg-indigo-500/20 rounded-full" />
         </div>
      </div>

      <div className="flex flex-col lg:flex-row h-[750px]">
         {/* SETTINGS */}
         <div className="w-full lg:w-80 border-r border-white/5 p-8 flex flex-col gap-10 bg-zinc-900/50">
            <div className="space-y-8">
               <div className="flex items-center gap-3 text-indigo-400">
                  <Sliders className="w-4 h-4" />
                  <span className="text-[10px] font-bold uppercase tracking-widest text-white">Реология_Геля</span>
               </div>

               <div className="space-y-4">
                  <div className="flex justify-between items-center text-[9px] font-bold uppercase text-zinc-500">
                     <span>Вязкость (Viscosity)</span>
                     <span className="text-indigo-400">{(viscosity * 100).toFixed(0)}%</span>
                  </div>
                  <input type="range" min="0.1" max="0.9" step="0.01" value={viscosity} onChange={e => setViscosity(parseFloat(e.target.value))} className="w-full h-1 bg-white/10 rounded-full appearance-none cursor-pointer accent-indigo-500" />
               </div>

               <div className="space-y-4">
                  <div className="flex justify-between items-center text-[9px] font-bold uppercase text-zinc-500">
                     <span>Поверхн_Натяжение</span>
                     <span className="text-indigo-400">{(tension * 100).toFixed(0)}%</span>
                  </div>
                  <input type="range" min="0.1" max="1.5" step="0.05" value={tension} onChange={e => setTension(parseFloat(e.target.value))} className="w-full h-1 bg-white/10 rounded-full appearance-none cursor-pointer accent-indigo-500" />
               </div>
            </div>

            <div className="mt-auto p-6 bg-black/40 rounded-[32px] border border-white/5 space-y-4">
               <div className="flex items-center gap-2 text-emerald-500">
                  <Activity className="w-4 h-4 animate-pulse" />
                  <span className="text-[9px] font-bold uppercase">Shear_Stress</span>
               </div>
               <div className="text-2xl font-tech font-bold text-white uppercase">{(intensity * viscosity * 14.2).toFixed(2)}_PA</div>
            </div>
         </div>

         {/* VIEWPORT */}
         <div 
           ref={containerRef}
           onMouseMove={handleMouseMove}
           className="flex-1 bg-[#050508] relative overflow-hidden flex items-center justify-center group shadow-inner cursor-none"
         >
            <svg className="absolute w-0 h-0">
               <filter id="haptic-goo-refined">
                  <feGaussianBlur in="SourceGraphic" stdDeviation={15 * tension} result="blur" />
                  <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 45 -15" result="goo" />
                  <feComposite in="SourceGraphic" in2="goo" operator="atop" />
               </filter>
            </defs>

            {/* The Fluid Container */}
            <div className="absolute inset-0 flex items-center justify-center pointer-events-none" style={{ filter: 'url(#haptic-goo-refined)' }}>
               {/* Core Attractor (Cursor) - Убрана задержка перемещения для мгновенного отклика */}
               <div 
                 className="absolute w-56 h-56 bg-indigo-600 rounded-full shadow-2xl transition-opacity duration-300 ease-out"
                 style={{ 
                   left: `${mousePos.x}%`, 
                   top: `${mousePos.y}%`, 
                   transform: 'translate(-50%, -50%)',
                   opacity: 0.8 + intensity * 0.2
                 }}
               />
               {/* Distributed Particles */}
               {[...Array(6)].map((_, i) => (
                 <div 
                   key={i}
                   className="absolute w-40 h-40 bg-indigo-500/30 rounded-full transition-all duration-[1500ms] ease-out"
                   style={{ 
                     left: `${50 + (i - 2.5) * 12}%`, 
                     top: `${50 + Math.sin(Date.now()/2000 + i)*5}%`, 
                     transform: `translate(-50%, -50%) scale(${1 + intensity * 0.2})`,
                     transitionDelay: `${i * 100}ms`
                   }}
                 />
               ))}
            </div>

            {/* INTERACTION OVERLAY */}
            <div className="relative z-10 flex flex-col items-center gap-8">
               <div 
                 onClick={() => { playUISound('click'); setIntensity(1); }}
                 className="w-32 h-32 rounded-[40px] bg-white/5 border border-white/20 backdrop-blur-3xl flex items-center justify-center shadow-[0_0_80px_rgba(99,102,241,0.2)] hover:scale-105 active:scale-95 transition-all duration-500 cursor-pointer group/target"
               >
                  <Fingerprint className={`w-12 h-12 transition-all duration-700 ${intensity > 0.5 ? 'text-indigo-400 scale-110' : 'text-zinc-600 group-hover/target:text-white'}`} />
                  <div className="absolute inset-4 border border-indigo-500/20 rounded-[32px] animate-spin-slow opacity-20" />
               </div>
               <div className="text-center">
                  <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-[0.5em] mb-2">Matter_Solvent_0x88</div>
                  <div className="text-4xl font-tech font-bold text-white uppercase tracking-tighter">Liquid_Logic</div>
               </div>
            </div>

            {/* CURSOR HUD - Убрана задержка перемещения */}
            <div 
              className="absolute pointer-events-none"
              style={{ left: `${mousePos.x * 100}%`, top: `${mousePos.y * 100}%`, transform: 'translate(-50%, -50%)' }}
            >
               <div className="w-16 h-16 border border-indigo-500/30 rounded-full flex items-center justify-center">
                  <div className="w-1.5 h-1.5 bg-indigo-500 rounded-full animate-ping shadow-[0_0_15px_#6366f1]" />
               </div>
            </div>

            <div className="absolute bottom-12 left-12">
               <div className="flex items-center gap-3 px-4 py-2 bg-zinc-900/80 border border-white/10 rounded-full">
                  <Waves className="w-3 h-3 text-indigo-400 animate-pulse" />
                  <span className="text-[8px] font-mono text-zinc-400 uppercase tracking-widest">Viscous_Sync: ENABLED</span>
               </div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/IntegrationFlow.tsx
название файла: wooden/components/IntegrationFlow.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React from 'react';
import { Share2, Zap, Activity, Cpu, Code2, Globe } from 'lucide-react';

export const IntegrationFlow: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';

  return (
    <div className="scroll-mt-32">
      <div className="mb-24 flex flex-col md:flex-row justify-between items-end gap-12">
        <div className="space-y-4">
           <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Development_Framework_Integration</span>
           <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
              Бесшовная <br /><span className="text-indigo-500">Интеграция.</span>
           </h2>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-12">
         {[
           { title: 'React SDK', icon: Code2, desc: 'Полная поддержка React 19 с использованием новых хуков и оптимизаций рендеринга.' },
           { title: 'Tailwind JIT', icon: Zap, desc: 'Динамические стили, генерируемые на лету через расширенную конфигурацию Matter_Theme.' },
           { title: 'Edge Sync', icon: Globe, desc: 'Мгновенная синхронизация состояний интерфейса через децентрализованную сеть узлов.' }
         ].map((item, i) => (
           <div 
             key={i}
             className={`p-12 rounded-[56px] border transition-all duration-500 group
               ${isDark ? 'bg-white/[0.02] border-white/5 hover:border-indigo-500/30' : 'bg-white border-black/5 hover:shadow-2xl'}
             `}
           >
              <div className={`w-20 h-20 rounded-[32px] bg-indigo-600/10 flex items-center justify-center text-indigo-500 mb-10 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500`}>
                 <item.icon className="w-10 h-10" />
              </div>
              <h3 className="text-3xl font-tech font-bold uppercase tracking-widest text-zinc-900 dark:text-white mb-6 leading-none">{item.title}</h3>
              <p className="text-lg text-zinc-500 font-light leading-relaxed">{item.desc}</p>
           </div>
         ))}
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/LandingBuilder.tsx
название файла: wooden/components/LandingBuilder.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useEffect, useRef } from 'react';
import { 
  Hammer, Wand2, Loader2, Zap, Layout, 
  ChevronRight, Database, Globe, Sliders,
  CheckCircle2, AlertTriangle, Shield, Activity, 
  Terminal, Monitor, Smartphone, Share2, ArrowRight, RefreshCw,
  Users, Building2, BarChart3, Star, HelpCircle,
  LayoutGrid, ListChecks, MailQuestion, Cpu, Workflow, Layers, Sun, Radio, Move,
  Mic, History, VolumeX, Eye, Server, Radar, HardDrive
} from 'lucide-react';
import { LanguageContext } from '../App';
import { GoogleGenAI, Type } from "@google/genai";
import { playUISound } from './AudioService';

type BuilderStep = 'INTAKE' | 'CONFIG' | 'SYNTHESIS' | 'RESULT';

interface SiteSection {
  type: string;
  data: any;
}

interface SiteContent {
  title: string;
  heroHeadline: string;
  heroSub: string;
  colorScheme: string;
  sections: SiteSection[];
}

export const LandingBuilder: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const isDark = theme === 'dark';
  const [step, setStep] = useState<BuilderStep>('INTAKE');
  const [prompt, setPrompt] = useState('');
  const [refraction, setRefraction] = useState(0.6);
  const [density, setDensity] = useState(0.4);
  const [loadingText, setLoadingText] = useState('');
  const [generatedContent, setGeneratedContent] = useState<SiteContent | null>(null);
  const [logs, setLogs] = useState<string[]>([]);

  const addLog = (msg: string) => {
    setLogs(prev => [`[${new Date().toLocaleTimeString()}] ${msg}`, ...prev.slice(0, 5)]);
  };

  const handleIntake = () => {
    if (!prompt.trim()) return;
    playUISound('click');
    setStep('CONFIG');
    addLog("Brief_Captured: Semantics_Extracted");
  };

  const startSynthesis = async () => {
    playUISound('process');
    setStep('SYNTHESIS');
    
    const steps = [
      "Allocating neural buffers...",
      "Generating high-fidelity copy...",
      "Calibrating refractive indices...",
      "Mapping spatial coordinates...",
      "Forging atomic UI components..."
    ];

    let current = 0;
    const interval = setInterval(() => {
      if (current < steps.length) {
        setLoadingText(steps[current]);
        addLog(`System_Log: ${steps[current]}`);
        current++;
      }
    }, 1000);

    try {
      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
      const response = await ai.models.generateContent({
        model: 'gemini-3-flash-preview',
        contents: `Generate a spatial landing page architecture for: "${prompt}". 
        Return JSON with:
        {
          "title": "String",
          "heroHeadline": "String",
          "heroSub": "String",
          "colorScheme": "Hex",
          "sections": [
            {"type": "feature_grid", "data": {"features": [{"title": "...", "desc": "..."}]}},
            {"type": "process_steps", "data": {"steps": [{"title": "...", "desc": "..."}]}},
            {"type": "newsletter", "data": {"title": "...", "sub": "..."}},
            {"type": "clients", "data": {"logos": ["Brand A", "Brand B"]}},
            {"type": "stats", "data": {"items": [{"label": "Uptime", "value": "99.9%"}]}},
            {"type": "expertise", "data": {"items": [{"title": "...", "desc": "..."}]}},
            {"type": "team", "data": {"members": [{"name": "...", "role": "..."}]}},
            {"type": "pricing", "data": {"plans": [{"name": "...", "price": "..."}]}}
          ]
        }`,
        config: { responseMimeType: "application/json" }
      });

      const data = JSON.parse(response.text || "{}") as SiteContent;
      
      setTimeout(() => {
        clearInterval(interval);
        setGeneratedContent(data);
        setStep('RESULT');
        playUISound('success');
        addLog("Synthesis_Finalized: OBJ_READY");
      }, 5000);

    } catch (err) {
      clearInterval(interval);
      setStep('INTAKE');
      addLog("Critical_Error: Synthesis aborted");
    }
  };

  return (
    <div className="space-y-40 animate-in fade-in duration-700">
      {/* Header */}
      <div className="flex flex-col md:flex-row justify-between items-end gap-12">
        <div className="space-y-6">
           <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
              <Hammer className="w-3 h-3" /> NEURAL_INTERFACE_BUILDER
           </div>
           <h2 className="text-[100px] md:text-[120px] font-tech font-bold text-zinc-900 dark:text-white uppercase leading-[0.8] tracking-tighter">
              Синтез <br /><span className="text-indigo-500">Материи.</span>
           </h2>
           <p className="text-xl font-light text-zinc-500 dark:text-zinc-400 max-w-xl">
             Создайте интерфейс нового поколения. Опишите видение, и система сформирует пространственную структуру с адаптивной физикой.
           </p>
        </div>

        {/* Steps Visualizer */}
        <div className="flex gap-4 p-4 bg-white/5 border border-white/10 rounded-[40px] backdrop-blur-xl shadow-2xl">
           {(['INTAKE', 'CONFIG', 'SYNTHESIS', 'RESULT'] as BuilderStep[]).map((s, i) => (
             <div key={s} className="flex items-center gap-3">
                <div className={`w-10 h-10 rounded-full flex items-center justify-center font-mono text-[10px] transition-all duration-500
                  ${step === s ? 'bg-indigo-600 text-white shadow-lg' : 'bg-white/5 text-zinc-600'}`}>
                   0{i+1}
                </div>
                {i < 3 && <div className="w-4 h-px bg-white/5" />}
             </div>
           ))}
        </div>
      </div>

      {/* Main Stage */}
      <div className={`relative min-h-[700px] rounded-[80px] border overflow-hidden p-1 transition-all duration-1000
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-100 border-black/5 shadow-inner'}
      `}>
         
         {step === 'INTAKE' && (
           <div className="h-full flex flex-col items-center justify-center p-20 animate-in fade-in slide-in-from-bottom-8 duration-700 space-y-40">
              <div className="w-full max-w-3xl space-y-12">
                 <div className="text-center space-y-4">
                    <h3 className="text-5xl font-tech font-bold uppercase text-text-main">Matter_Input</h3>
                    <p className="text-lg opacity-40 italic">Введите описание вашего будущего проекта для инициации синтеза</p>
                 </div>
                 
                 <div className="relative group">
                    <div className="absolute -inset-1 bg-gradient-to-r from-indigo-500 to-sky-500 rounded-[40px] blur opacity-10 group-focus-within:opacity-30 transition-opacity" />
                    <textarea 
                       value={prompt}
                       onChange={(e) => setPrompt(e.target.value)}
                       placeholder="Напр. Агентство для кибер-стартапов в стиле цифрового брутализма..."
                       className="w-full h-48 bg-black/40 border border-white/10 rounded-[40px] p-10 text-2xl font-light text-text-main outline-none focus:border-indigo-500/50 transition-all resize-none custom-scroll"
                    />
                 </div>

                 <div className="flex justify-center">
                    <button 
                      onClick={handleIntake}
                      className="px-16 py-6 bg-indigo-600 hover:bg-indigo-500 text-white rounded-3xl font-black text-xs uppercase tracking-widest transition-all shadow-2xl active:scale-95 flex items-center gap-4"
                    >
                      Продолжить <ArrowRight className="w-5 h-5" />
                    </button>
                 </div>
              </div>

              {/* BLUEPRINT DESCRIPTION SECTIONS - EXPANDED TO 12 */}
              <div className="w-full max-w-6xl space-y-16">
                 <div className="flex flex-col md:flex-row justify-between items-end gap-6 border-b border-white/5 pb-8">
                    <div className="space-y-2">
                       <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.5em]">{t.builder.blueprintTitle}</span>
                       <h4 className="text-3xl font-tech font-bold text-zinc-900 dark:text-white uppercase tracking-widest">{t.builder.blueprintSub}</h4>
                    </div>
                    <div className="flex gap-4 text-[8px] font-mono text-zinc-500 uppercase tracking-widest">
                       <span className="flex items-center gap-2"><div className="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse" /> Cluster_AMS: ONLINE</span>
                       <span className="text-indigo-500">Nodes_Active: 12.0k</span>
                    </div>
                 </div>

                 <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    {[
                      { id: 'neural', icon: Cpu, color: 'indigo' },
                      { id: 'physics', icon: Workflow, color: 'emerald' },
                      { id: 'atomic', icon: Layers, color: 'sky' },
                      { id: 'edge', icon: Globe, color: 'violet' },
                      { id: 'kinetic', icon: Move, color: 'amber' },
                      { id: 'optic', icon: Sun, color: 'indigo' },
                      { id: 'sync', icon: Radio, color: 'emerald' },
                      { id: 'shield', icon: Shield, color: 'rose' },
                      { id: 'vocal', icon: Mic, color: 'sky' },
                      { id: 'temporal', icon: History, color: 'violet' },
                      { id: 'audio', icon: VolumeX, color: 'amber' },
                      { id: 'vision', icon: Eye, color: 'indigo' }
                    ].map((bp) => {
                      const data = (t.builder.blueprints as any)[bp.id];
                      return (
                        <div key={bp.id} className="p-8 glass-panel rounded-[40px] space-y-6 group hover:border-indigo-500/30 transition-all duration-500 relative overflow-hidden">
                           <div className={`absolute -top-12 -right-12 w-24 h-24 blur-3xl opacity-0 group-hover:opacity-20 transition-opacity bg-${bp.color}-500`} />
                           
                           <div className={`w-12 h-12 rounded-2xl bg-${bp.color}-500/10 border border-${bp.color}-500/20 flex items-center justify-center text-${bp.color}-500 group-hover:scale-110 transition-transform`}>
                              <bp.icon className="w-6 h-6" />
                           </div>
                           <div className="space-y-2">
                              <h5 className="text-lg font-tech font-bold text-text-main uppercase tracking-widest leading-none">{data.title}</h5>
                              <p className="text-[10px] font-light text-text-muted leading-relaxed uppercase tracking-tighter opacity-60 group-hover:opacity-100 transition-opacity">{data.desc}</p>
                           </div>
                           <div className="pt-4 border-t border-black/5 dark:border-white/5 flex justify-between items-center opacity-20 group-hover:opacity-100 transition-opacity">
                              <span className="text-[8px] font-mono uppercase">HASH: 0x{bp.id.slice(0,3).toUpperCase()}</span>
                              <Activity className={`w-3 h-3 text-${bp.color}-400`} />
                           </div>
                        </div>
                      );
                    })}
                 </div>

                 {/* NEW PIPELINE VISUALIZATION - 7 STEPS */}
                 <div className="space-y-12 pt-20 border-t border-white/5">
                    <div className="text-center space-y-2">
                       <span className="text-[9px] font-mono text-indigo-500 font-black uppercase tracking-[0.5em] animate-pulse">{t.builder.pipeline.title}</span>
                    </div>
                    
                    <div className="relative flex justify-between items-center max-w-5xl mx-auto px-4 overflow-x-auto no-scrollbar py-10">
                       {/* Line Connector */}
                       <div className="absolute inset-x-0 top-[50%] -translate-y-1/2 h-px bg-white/5 z-0" />
                       
                       {t.builder.pipeline.steps.map((step: any, i: number) => (
                         <div key={i} className="relative z-10 flex flex-col items-center gap-6 group min-w-[120px]">
                            <div className="w-14 h-14 rounded-full bg-zinc-900 border border-white/10 flex items-center justify-center transition-all duration-500 group-hover:border-indigo-500/50 group-hover:scale-110 shadow-xl backdrop-blur-xl">
                               <div className="text-xs font-mono font-black text-indigo-500">0{i+1}</div>
                            </div>
                            <div className="text-center space-y-1">
                               <div className="text-[10px] font-tech font-black text-text-main uppercase tracking-widest">{step.label}</div>
                               <div className="text-[7px] font-mono text-zinc-600 uppercase tracking-tighter leading-tight opacity-0 group-hover:opacity-100 transition-opacity">{step.desc}</div>
                            </div>
                         </div>
                       ))}
                    </div>
                 </div>

                 {/* NEW SPATIAL NODE REGISTRY SECTION */}
                 <div className="pt-20 border-t border-white/5 space-y-12">
                    <div className="flex flex-col md:flex-row justify-between items-center gap-6">
                       <div className="flex items-center gap-4">
                          <Radar className="w-5 h-5 text-indigo-500 animate-pulse" />
                          <h4 className="text-3xl font-tech font-bold text-text-main uppercase tracking-widest">Spatial_Node_Registry</h4>
                       </div>
                       <div className="flex items-center gap-3 px-6 py-2 bg-black/40 rounded-full border border-white/10">
                          <span className="text-[8px] font-mono text-zinc-500 uppercase">Latency_Global:</span>
                          <span className="text-[10px] font-tech font-black text-emerald-500">12.4ms</span>
                       </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                       {[
                         { loc: 'AMS_NORTH', id: '0x882A', load: 42, icon: Server },
                         { loc: 'SFO_WEST', id: '0x771B', load: 84, icon: HardDrive },
                         { loc: 'LND_CORE', id: '0x449F', load: 12, icon: Cpu },
                         { loc: 'TYO_EAST', id: '0x110C', load: 65, icon: Globe }
                       ].map((node) => (
                         <div key={node.loc} className="p-6 bg-black/20 border border-white/5 rounded-3xl flex items-center justify-between group hover:bg-black/40 transition-all">
                            <div className="flex items-center gap-4">
                               <node.icon className="w-5 h-5 text-zinc-600 group-hover:text-indigo-400 transition-colors" />
                               <div>
                                  <div className="text-[9px] font-tech font-bold text-text-main uppercase tracking-widest">{node.loc}</div>
                                  <div className="text-[7px] font-mono text-zinc-600">{node.id}</div>
                               </div>
                            </div>
                            <div className="text-right space-y-1">
                               <div className="text-[8px] font-mono text-emerald-500">{node.load}%</div>
                               <div className="w-12 h-1 bg-white/5 rounded-full overflow-hidden">
                                  <div className="h-full bg-emerald-500/40" style={{ width: `${node.load}%` }} />
                               </div>
                            </div>
                         </div>
                       ))}
                    </div>
                 </div>
              </div>
           </div>
         )}

         {step === 'CONFIG' && (
           <div className="h-full grid grid-cols-1 lg:grid-cols-2 p-1 animate-in fade-in duration-700">
              <div className="p-20 flex flex-col justify-center space-y-12">
                 <div className="space-y-4">
                    <h3 className="text-5xl font-tech font-bold uppercase text-text-main">Calibration</h3>
                    <p className="opacity-40 italic">Настройка физических свойств сгенерированного интерфейса</p>
                 </div>

                 <div className="space-y-10">
                    <div className="space-y-4">
                       <div className="flex justify-between font-mono text-[10px] uppercase text-zinc-500">
                          <span>Refraction_Power</span>
                          <span className="text-indigo-500">{refraction.toFixed(2)}</span>
                       </div>
                       <input type="range" min="0" max="1" step="0.01" value={refraction} onChange={e => setRefraction(parseFloat(e.target.value))} className="w-full h-1 bg-black/10 dark:bg-white/5 rounded-full appearance-none accent-indigo-500" />
                    </div>

                    <div className="space-y-4">
                       <div className="flex justify-between font-mono text-[10px] uppercase text-zinc-500">
                          <span>Mass_Density</span>
                          <span className="text-indigo-500">{density.toFixed(2)}</span>
                       </div>
                       <input type="range" min="0" max="1" step="0.01" value={density} onChange={e => setDensity(parseFloat(e.target.value))} className="w-full h-1 bg-black/10 dark:bg-white/5 rounded-full appearance-none accent-indigo-500" />
                    </div>
                 </div>

                 <button 
                   onClick={startSynthesis}
                   className="w-full py-8 bg-indigo-600 text-white rounded-3xl font-black text-xs uppercase tracking-[0.5em] shadow-xl hover:bg-indigo-500 transition-all active:scale-95 shadow-indigo-600/30"
                 >
                   Запустить Синтез
                 </button>
              </div>

              <div className="bg-black/20 flex items-center justify-center p-20">
                 <div className="relative w-80 h-96">
                    <div 
                      className="absolute inset-0 border-2 rounded-[56px] transition-all duration-700 shadow-2xl"
                      style={{ 
                         backgroundColor: `rgba(255,255,255, ${0.05 + density * 0.1})`,
                         backdropFilter: `blur(${refraction * 60}px)`,
                         borderColor: `rgba(99, 102, 241, ${0.2 + refraction * 0.4})`,
                         transform: 'rotateX(15deg) rotateY(-15deg)'
                      }}
                    >
                       <div className="absolute inset-0 flex items-center justify-center">
                          <Zap className="w-12 h-12 text-indigo-500 animate-pulse" />
                       </div>
                    </div>
                 </div>
              </div>
           </div>
         )}

         {step === 'SYNTHESIS' && (
            <div className="h-full flex flex-col items-center justify-center p-20 space-y-12 animate-in fade-in duration-700">
               <div className="relative">
                  <div className="w-48 h-48 rounded-full border-4 border-white/5 flex items-center justify-center">
                     <div className="w-full h-full border-4 border-indigo-500 rounded-full border-t-transparent animate-spin" />
                  </div>
                  <Wand2 className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-12 text-white animate-pulse" />
               </div>

               <div className="text-center space-y-6">
                  <h3 className="text-4xl font-tech font-bold uppercase tracking-widest text-text-main">{loadingText}</h3>
                  <div className="w-96 h-1.5 bg-white/5 rounded-full overflow-hidden mx-auto">
                     <div className="h-full bg-indigo-500 animate-[progress_5s_linear]" />
                  </div>
               </div>

               <div className="w-full max-w-xl bg-black border border-white/5 rounded-[40px] p-10 shadow-2xl h-56 overflow-hidden font-mono text-[11px] text-indigo-400/60">
                  {logs.map((log, i) => (
                    <div key={i} className="mb-1">{log}</div>
                  ))}
               </div>
            </div>
         )}

         {step === 'RESULT' && generatedContent && (
            <div className="h-full flex flex-col animate-in fade-in duration-1000">
               <div className="p-6 border-b border-white/5 flex items-center justify-between bg-black/40 backdrop-blur-3xl">
                  <div className="flex items-center gap-6">
                     <div className="flex gap-2">
                        <div className="w-3 h-3 rounded-full bg-rose-500" />
                        <div className="w-3 h-3 rounded-full bg-amber-500" />
                        <div className="w-3 h-3 rounded-full bg-emerald-500" />
                     </div>
                     <span className="text-[10px] font-mono text-zinc-500">blueprint://forged_asset_{generatedContent.title.toLowerCase()}</span>
                  </div>
                  <div className="flex gap-3">
                     <button className="p-3 rounded-xl bg-white/5 text-zinc-500 hover:text-white transition-all"><Monitor className="w-4 h-4" /></button>
                     <button className="p-3 rounded-xl bg-white/5 text-zinc-500 hover:text-white transition-all"><Smartphone className="w-4 h-4" /></button>
                     <div className="w-[1px] h-10 bg-white/5 mx-3" />
                     <button className="px-8 py-3 bg-indigo-600 text-white rounded-2xl font-black text-[9px] uppercase tracking-widest shadow-xl active:scale-95 shadow-indigo-600/30">Опубликовать</button>
                  </div>
               </div>

               <div className="flex-1 overflow-y-auto custom-scroll bg-[#030305]">
                  <section className="py-40 px-20 relative overflow-hidden">
                     <div className="absolute inset-0 opacity-10" style={{ background: `radial-gradient(circle at center, ${generatedContent.colorScheme}, transparent 70%)` }} />
                     <div className="relative z-10 max-w-4xl space-y-12">
                        <div className="text-8xl font-tech font-bold text-white uppercase leading-none tracking-tighter">
                           {generatedContent.heroHeadline}
                        </div>
                        <p className="text-2xl font-light opacity-60 max-w-2xl">{generatedContent.heroSub}</p>
                        <button className="px-12 py-5 rounded-2xl font-black text-xs uppercase tracking-widest transition-all bg-white text-black shadow-2xl">
                           Explore_Structure
                        </button>
                     </div>
                  </section>

                  {generatedContent.sections.map((sec, i) => (
                    <div key={i}>
                       {sec.type === 'feature_grid' && (
                         <section className="py-32 px-20 bg-surface/5">
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-12">
                               {sec.data.features.map((f: any, j: number) => (
                                 <div key={j} className="p-12 rounded-[48px] bg-white/5 border border-white/10 hover:-translate-y-2 transition-transform">
                                    <Zap className="w-8 h-8 text-indigo-500 mb-6" />
                                    <h4 className="text-xl font-tech font-bold uppercase text-white mb-4">{f.title}</h4>
                                    <p className="text-sm font-light opacity-40">{f.desc}</p>
                                 </div>
                               ))}
                            </div>
                         </section>
                       )}
                       {sec.type === 'process_steps' && (
                          <section className="py-32 px-20 border-y border-white/5">
                             <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                                {sec.data.steps.map((step: any, j: number) => (
                                  <div key={j} className="p-8 bg-white/[0.02] border border-white/5 rounded-3xl">
                                     <div className="text-3xl font-tech font-black opacity-10 mb-4">0{j+1}</div>
                                     <h5 className="text-sm font-bold uppercase text-white mb-2">{step.title}</h5>
                                     <p className="text-[10px] font-light opacity-30">{step.desc}</p>
                                  </div>
                                ))}
                             </div>
                          </section>
                       )}
                       {sec.type === 'newsletter' && (
                         <section className="py-32 px-20 bg-gradient-to-t from-indigo-500/10 to-transparent">
                            <div className="max-w-2xl mx-auto text-center space-y-12">
                               <h3 className="text-4xl font-tech font-bold uppercase text-white">{sec.data.title}</h3>
                               <div className="flex bg-white/5 border border-white/10 rounded-full p-2">
                                  <input type="email" placeholder="Email_Hash" className="bg-transparent border-none outline-none flex-1 px-8 text-sm" />
                                  <button className="px-10 py-4 bg-white text-black rounded-full font-black text-[10px] uppercase">Join_Fleet</button>
                               </div>
                            </div>
                         </section>
                       )}
                       {sec.type === 'clients' && (
                         <section className="py-16 border-y border-white/5 bg-white/[0.02]">
                            <div className="max-w-6xl mx-auto flex flex-wrap justify-center items-center gap-12 opacity-30">
                               <Building2 className="w-6 h-6" />
                               {sec.data.logos.map((l: string, j: number) => (
                                 <span key={j} className="text-[10px] font-mono font-bold uppercase tracking-[0.4em]">{l}</span>
                               ))}
                            </div>
                         </section>
                       )}
                       {sec.type === 'stats' && (
                         <section className="py-24 px-20 bg-surface">
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-12">
                               {sec.data.items.map((item: any, j: number) => (
                                 <div key={j} className="space-y-2">
                                    <div className="text-5xl font-tech font-bold text-white">{item.value}</div>
                                    <div className="text-[8px] font-mono text-zinc-500 uppercase tracking-[0.5em]">{item.label}</div>
                                 </div>
                               ))}
                            </div>
                         </section>
                       )}
                    </div>
                  ))}
               </div>

               <div className="p-8 bg-zinc-900 border-t border-white/5 flex justify-between items-center">
                  <button onClick={() => setStep('INTAKE')} className="flex items-center gap-3 text-zinc-500 hover:text-white transition-colors uppercase font-bold text-[10px]">
                     <RefreshCw className="w-4 h-4" /> Новый Синтез
                  </button>
                  <button className="flex items-center gap-3 px-6 py-3 bg-white/5 border border-white/10 rounded-xl text-white text-[10px] font-bold uppercase shadow-xl">
                     <Share2 className="w-4 h-4" /> Экспорт_Blueprints
                  </button>
               </div>
            </div>
         )}
      </div>
      <style>{`
        @keyframes progress { from { width: 0%; } to { width: 100%; } }
      `}</style>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/NeuralCoreLab.tsx
название файла: wooden/components/NeuralCoreLab.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect } from 'react';
import { GoogleGenAI, Type } from "@google/genai";
import { Brain, Wand2, Loader2, Sparkles, Cpu, Send, Terminal, Database, Activity, RefreshCw, Layers, ShieldAlert } from 'lucide-react';
import { playUISound } from './AudioService';

interface MatterBlueprint {
  color: string;
  blur: number;
  mass: number;
  friction: number;
  bounce: number;
  labels: string[];
}

export const NeuralCoreLab: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';
  const [prompt, setPrompt] = useState('');
  const [loading, setLoading] = useState(false);
  const [blueprint, setBlueprint] = useState<MatterBlueprint | null>(null);
  const [rotation, setRotation] = useState({ x: 0, y: 0 });
  const [currentPos, setCurrentPos] = useState({ x: 0, y: 0 });
  const velocity = useRef({ x: 0, y: 0 });

  const synthesizeMatter = async () => {
    if (!prompt.trim() || loading) return;
    setLoading(true);
    playUISound('process');

    try {
      const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
      const response = await ai.models.generateContent({
        model: 'gemini-3-flash-preview',
        contents: `Analyze this matter description: "${prompt}". 
        Convert it into physical attributes for a spatial UI system.
        Return ONLY a JSON object with:
        color (hex string),
        blur (number 0 to 60),
        mass (number 0.1 to 2.0),
        friction (number 0 to 0.2),
        bounce (number 0.6 to 0.98),
        labels (array of 3 technical terms describing this state).`,
        config: {
          responseMimeType: "application/json",
          responseSchema: {
            type: Type.OBJECT,
            properties: {
              color: { type: Type.STRING },
              blur: { type: Type.NUMBER },
              mass: { type: Type.NUMBER },
              friction: { type: Type.NUMBER },
              bounce: { type: Type.NUMBER },
              labels: { type: Type.ARRAY, items: { type: Type.STRING } }
            }
          }
        }
      });

      const data = JSON.parse(response.text || "{}") as MatterBlueprint;
      setBlueprint(data);
      playUISound('success');
    } catch (err) {
      console.error(err);
    } finally {
      setLoading(false);
    }
  };

  useEffect(() => {
    let frame: number;
    const update = () => {
      if (blueprint) {
        // Балансировка на основе новых стандартов (0.15 / 0.80)
        const dx = -currentPos.x;
        const dy = -currentPos.y;
        
        // Масса влияет на инерцию: чем тяжелее, тем медленнее отклик
        const stiffness = 0.15 / blueprint.mass;
        const damping = blueprint.bounce; 
        
        velocity.current.x = (velocity.current.x + dx * stiffness) * damping;
        velocity.current.y = (velocity.current.y + dy * stiffness) * damping;
        
        setCurrentPos(prev => ({
          x: prev.x + velocity.current.x,
          y: prev.y + velocity.current.y
        }));
      }
      frame = requestAnimationFrame(update);
    };
    frame = requestAnimationFrame(update);
    return () => cancelAnimationFrame(frame);
  }, [blueprint, currentPos]);

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!blueprint) return;
    const rect = e.currentTarget.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width - 0.5) * 100;
    const y = ((e.clientY - rect.top) / rect.height - 0.5) * 100;
    
    // Внешняя сила прикладывается к вектору скорости
    velocity.current.x += (x - currentPos.x) * 0.05;
    velocity.current.y += (y - currentPos.y) * 0.05;

    setRotation({ x: y * 0.4, y: x * -0.4 });
  };

  return (
    <div className="grid grid-cols-1 lg:grid-cols-12 gap-12 items-stretch h-auto lg:h-[800px]">
      
      {/* 1. INPUT TERMINAL */}
      <div className={`lg:col-span-4 flex flex-col p-1 rounded-[64px] border ${isDark ? 'bg-zinc-950 border-white/5' : 'bg-zinc-100 border-black/5'}`}>
         <div className={`p-8 border-b ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'} rounded-t-[60px] flex items-center justify-between`}>
            <div className="flex items-center gap-3">
               <Terminal className="w-5 h-5 text-violet-500" />
               <span className="text-[10px] font-mono font-bold uppercase tracking-widest text-zinc-500">Matter_Prompt_v1.0</span>
            </div>
            <div className="w-2 h-2 rounded-full bg-violet-500 animate-pulse" />
         </div>

         <div className="flex-1 p-10 flex flex-col gap-10">
            <div className="space-y-4">
               <label className="text-[9px] font-bold text-zinc-500 uppercase tracking-widest">Description_Buffer</label>
               <textarea 
                  value={prompt}
                  onChange={(e) => setPrompt(e.target.value)}
                  placeholder="Describe your matter (e.g., 'A cold obsidian slab with mirror refraction and extreme gravity')..."
                  className="w-full h-40 bg-transparent border-none outline-none resize-none text-2xl font-tech tracking-tight placeholder:opacity-20 text-zinc-900 dark:text-white"
               />
            </div>

            <div className="mt-auto space-y-4">
               <button 
                 onClick={synthesizeMatter}
                 disabled={loading || !prompt.trim()}
                 className={`w-full py-6 rounded-3xl font-black text-xs uppercase tracking-[0.4em] transition-all flex items-center justify-center gap-4 shadow-2xl
                    ${loading ? 'bg-zinc-800 text-zinc-600' : 'bg-violet-600 text-white hover:bg-violet-500'}
                 `}
               >
                 {loading ? <Loader2 className="w-5 h-5 animate-spin" /> : <Wand2 className="w-5 h-5" />}
                 {loading ? 'Synthesizing...' : 'Sinthesize_Matter'}
               </button>
               
               <p className="text-[9px] text-zinc-500 font-mono text-center uppercase tracking-tighter opacity-40">
                 System: Gemini-3-Flash-Preview // Midpoint: 50/50 Calibration
               </p>
            </div>
         </div>
      </div>

      {/* 2. NEURAL VIEWPORT */}
      <div 
        onMouseMove={handleMouseMove}
        className={`lg:col-span-8 relative rounded-[64px] border overflow-hidden flex items-center justify-center perspective-2000 group
           ${isDark ? 'bg-zinc-950 border-white/5' : 'bg-zinc-100 border-black/5 shadow-inner'}
        `}
      >
         {/* Background Grid */}
         <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />

         {/* THE FORGED OBJECT */}
         <div 
           className="relative w-full h-full flex items-center justify-center preserve-3d"
         >
            {blueprint ? (
               <div 
                 className="relative w-80 h-[500px] transition-all duration-300 ease-out shadow-2xl flex flex-col items-center justify-center p-12 overflow-hidden"
                 style={{ 
                    transform: `translate3d(${currentPos.x}px, ${currentPos.y}px, 0px) rotateX(${rotation.x}deg) rotateY(${rotation.y}deg)`,
                    backgroundColor: `${blueprint.color}15`,
                    borderColor: `${blueprint.color}44`,
                    borderWidth: '2px',
                    borderRadius: '80px',
                    backdropFilter: `blur(${blueprint.blur}px)`,
                    boxShadow: `0 40px 100px -20px ${blueprint.color}33, inset 0 0 50px ${blueprint.color}11`
                 }}
               >
                  <div className="absolute inset-0 bg-gradient-to-tr from-white/10 via-transparent to-transparent pointer-events-none" />
                  
                  <div className="relative z-10 flex flex-col items-center gap-10">
                     <div className="w-24 h-24 rounded-[36px] flex items-center justify-center shadow-2xl transition-all duration-1000"
                          style={{ backgroundColor: `${blueprint.color}44`, transform: `rotate(${currentPos.x * 0.5}deg)` }}>
                        <Brain className="w-12 h-12 text-white" />
                     </div>
                     <div className="text-center space-y-4">
                        <div className="text-[10px] font-mono uppercase tracking-[0.5em] opacity-40 text-white">Neural_Forged_State</div>
                        <div className="flex flex-wrap justify-center gap-2">
                           {blueprint.labels.map((l, i) => (
                             <span key={i} className="px-3 py-1 bg-white/5 border border-white/10 rounded-full text-[8px] font-black uppercase text-white">{l}</span>
                           ))}
                        </div>
                     </div>
                  </div>

                  {/* Diagnostic Scanline */}
                  <div className="absolute top-0 left-0 w-full h-full pointer-events-none overflow-hidden">
                     <div className="w-full h-[2px] bg-white/40 animate-scan blur-[2px]" />
                  </div>
               </div>
            ) : (
               <div className="text-center space-y-6 opacity-20 group-hover:opacity-40 transition-opacity">
                  <RefreshCw className="w-20 h-20 mx-auto animate-spin-slow" />
                  <div className="text-2xl font-tech font-bold uppercase tracking-widest">Awaiting_Sintehsis</div>
               </div>
            )}
         </div>

         {/* Floating Metrics HUD */}
         {blueprint && (
            <div className="absolute bottom-12 left-12 grid grid-cols-2 gap-8 z-50">
               <div className="flex flex-col gap-1">
                  <div className="text-[8px] font-mono text-zinc-500 uppercase font-black">Mass_Constant</div>
                  <div className="text-xl font-tech font-bold text-violet-500 uppercase">{blueprint.mass.toFixed(3)}_M☉</div>
               </div>
               <div className="flex flex-col gap-1">
                  <div className="text-[8px] font-mono text-zinc-500 uppercase font-black">Recoil_Bias</div>
                  <div className="text-xl font-tech font-bold text-emerald-500 uppercase">{blueprint.bounce.toFixed(2)}_B</div>
               </div>
            </div>
         )}

         <div className="absolute top-12 right-12 text-right">
            <div className="text-[10px] font-mono text-violet-500 uppercase tracking-widest font-black mb-1">State_Cohesion: {blueprint ? 'LOCKED' : 'NULL'}</div>
            <div className="text-[8px] font-mono text-zinc-700 uppercase">Buffer_Address: 0x882A.F0</div>
         </div>
      </div>

      <style>{`
        @keyframes scan {
          0% { transform: translateY(-100%); }
          100% { transform: translateY(500px); }
        }
        .animate-scan { animation: scan 3s linear infinite; }
      `}</style>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/NeuralLatticeMap.tsx
название файла: wooden/components/NeuralLatticeMap.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React from 'react';
import { Network, Cpu, Activity } from 'lucide-react';

export const NeuralLatticeMap: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';
  const nodes = Array.from({ length: 12 });

  return (
    <div className="scroll-mt-32">
      <div className="flex flex-col md:flex-row justify-between items-end gap-12 mb-24">
         <div className="space-y-4">
            <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Nodal_Connectivity_v8</span>
            <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
               Глобальная <br /><span className="text-indigo-500">Сеть.</span>
            </h2>
         </div>
         <div className="flex items-center gap-6 p-8 bg-indigo-500/5 border border-indigo-500/10 rounded-[32px]">
            <div className="text-right">
               <div className="text-[8px] font-mono text-zinc-500 uppercase mb-1">Global_Sync</div>
               <div className="text-2xl font-tech font-bold text-white tracking-widest">99.8%</div>
            </div>
            <Network className="w-8 h-8 text-indigo-500 animate-pulse" />
         </div>
      </div>

      <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
         {nodes.map((_, i) => (
           <div 
             key={i}
             className={`p-10 rounded-[40px] border transition-all duration-500 flex flex-col items-center gap-8 group
               ${isDark ? 'bg-black/20 border-white/5 hover:border-indigo-500/30' : 'bg-white border-black/5 hover:shadow-2xl'}
             `}
           >
              <div className="relative">
                 <div className="w-14 h-14 rounded-2xl bg-indigo-500/10 flex items-center justify-center text-indigo-500 group-hover:scale-110 transition-transform">
                    <Cpu className="w-6 h-6" />
                 </div>
                 <div className="absolute -top-1 -right-1 w-3 h-3 bg-emerald-500 rounded-full border-2 border-black animate-pulse" />
              </div>
              <div className="text-center">
                 <div className="text-[7px] font-mono text-zinc-500 uppercase mb-1">Sector_0x{i*2}</div>
                 <div className="h-1 w-12 bg-indigo-500/20 rounded-full overflow-hidden mx-auto">
                    <div className="h-full bg-indigo-500 animate-pulse" style={{ width: `${Math.random() * 80 + 20}%` }} />
                 </div>
              </div>
           </div>
         ))}
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/NodalAttractionLab.tsx
название файла: wooden/components/NodalAttractionLab.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect, useContext } from 'react';
import { Target, Move, Activity, Zap, Cpu, MousePointer2, Box, ShieldCheck } from 'lucide-react';
import { GravityContext } from '../App';

interface GravityItemProps {
  icon: any;
  label: string;
  mass: number; // 0.1 to 1.0 (1.0 is heavy)
  mousePos: { x: number, y: number };
}

const GravityItem: React.FC<GravityItemProps> = ({ icon: Icon, label, mass, mousePos }) => {
  const { active, mass: globalMass, size: globalSize } = useContext(GravityContext);
  const itemRef = useRef<HTMLDivElement>(null);
  const [offset, setOffset] = useState({ x: 0, y: 0 });

  useEffect(() => {
    if (!itemRef.current || !active) {
      setOffset({ x: 0, y: 0 });
      return;
    }
    const rect = itemRef.current.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2 - offset.x; 
    const centerY = rect.top + rect.height / 2 - offset.y;
    
    const dx = mousePos.x - centerX;
    const dy = mousePos.y - centerY;
    const dist = Math.sqrt(dx * dx + dy * dy);
    
    // Динамический радиус захвата
    const maxDist = 100 + (globalSize * 500);
    
    if (dist < maxDist) {
       // 1. Плавная кривая силы (Smoothstep)
       const t = Math.max(0, 1 - dist / maxDist);
       const pullPower = t * t * (3 - 2 * t);
       
       // 2. Soft Normalization
       const buffer = 45;
       const smoothDist = dist + buffer;
       
       // 3. Затухание в центре
       const centerDamping = Math.min(1, dist / 20);
       
       // 4. Множитель притяжения (объектная масса * глобальная настройка)
       const attractionMultiplier = mass * globalMass * 300;
       
       setOffset({
          x: (dx / smoothDist) * pullPower * attractionMultiplier * centerDamping,
          y: (dy / smoothDist) * pullPower * attractionMultiplier * centerDamping
       });
    } else {
       setOffset({ x: 0, y: 0 });
    }
  }, [mousePos, mass, active, globalMass, globalSize]);

  return (
    <div 
      ref={itemRef}
      className="relative flex flex-col items-center gap-4 transition-transform duration-500 ease-out will-change-transform"
      style={{ transform: `translate(${offset.x}px, ${offset.y}px)` }}
    >
       <div 
         className={`w-24 h-24 rounded-[32px] flex items-center justify-center border transition-all duration-300
           ${mass > 0.7 ? 'bg-zinc-900 border-white/20' : 'bg-violet-600/10 border-violet-500/30'}
           ${Math.abs(offset.x) > 1 ? 'shadow-[0_15px_40px_rgba(139,92,246,0.25)] scale-105' : 'shadow-none scale-100'}
         `}
       >
          <Icon className={`w-10 h-10 transition-colors duration-500 ${mass > 0.7 ? 'text-zinc-600' : 'text-violet-500'}`} />
          <div className="absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-transparent pointer-events-none rounded-[inherit]" />
       </div>
       <div className="text-center">
          <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">{label}</div>
          <div className="text-[8px] font-mono text-violet-500 opacity-60 font-bold">MASS: {mass.toFixed(1)}</div>
       </div>
    </div>
  );
};

export const NodalAttractionLab: React.FC<{ theme: string }> = ({ theme }) => {
  const { mousePos, size: globalSize } = useContext(GravityContext);
  const containerRef = useRef<HTMLDivElement>(null);
  const isDark = theme === 'dark';

  return (
    <div 
      ref={containerRef}
      className="scroll-mt-32"
    >
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">
         {/* Info Block */}
         <div className="lg:col-span-4 space-y-10">
            <div className="space-y-4">
               <span className="text-[9px] font-mono opacity-40 uppercase tracking-[0.5em] block font-black">Nodal_Attraction_v4.5</span>
               <h3 className="text-5xl font-tech font-bold uppercase tracking-tight text-zinc-900 dark:text-white leading-none">
                  Изолированная <br /><span className="text-violet-500">Масса.</span>
               </h3>
               <p className="text-lg font-light leading-relaxed opacity-60 italic">
                  Настройте глобальные параметры гравитации в хедере, чтобы увидеть как меняется отклик объектов с разной массой.
               </p>
            </div>

            <div className="p-8 bg-violet-600/5 rounded-[40px] border border-violet-500/10 space-y-6">
               <div className="flex items-center justify-between">
                  <span className="text-[10px] font-bold text-zinc-500 uppercase tracking-widest">Field_Coherence</span>
                  <div className="flex gap-1">
                     {[1,2,3].map(i => <div key={i} className="w-1 h-3 bg-violet-500 rounded-full animate-pulse" style={{ animationDelay: `${i*0.2}s` }} />)}
                  </div>
               </div>
               <div className="h-1 w-full bg-black/5 dark:bg-white/5 rounded-full overflow-hidden">
                  <div className="h-full bg-violet-600 w-full" />
               </div>
            </div>
         </div>

         {/* Visual Field */}
         <div className={`lg:col-span-8 h-[650px] rounded-[64px] border relative overflow-hidden flex items-center justify-center p-20 transition-all duration-1000
           ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-50 border-black/5 shadow-inner'}
         `}>
            {/* Grid Pattern that Warps */}
            <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />
            
            <div className="grid grid-cols-3 gap-24 relative z-10">
               <GravityItem icon={Zap} label="Pulse_Node" mass={0.1} mousePos={mousePos} />
               <GravityItem icon={Cpu} label="Logic_Gate" mass={0.5} mousePos={mousePos} />
               <GravityItem icon={Box} label="Matter_Slab" mass={1.0} mousePos={mousePos} />
               <GravityItem icon={Target} label="Lock_Unit" mass={0.3} mousePos={mousePos} />
               <GravityItem icon={Activity} label="Wave_Relay" mass={0.2} mousePos={mousePos} />
               <GravityItem icon={ShieldCheck} label="Safety_Buffer" mass={0.8} mousePos={mousePos} />
            </div>

            {/* Singularity Indicator (Visible range) */}
            <div 
              className="absolute pointer-events-none mix-blend-screen opacity-10 transition-all duration-500"
              style={{ 
                left: mousePos.x - (containerRef.current?.getBoundingClientRect().left || 0), 
                top: mousePos.y - (containerRef.current?.getBoundingClientRect().top || 0), 
                transform: 'translate(-50%, -50%)', 
                width: `${200 + globalSize * 800}px`,
                height: `${200 + globalSize * 800}px`,
                background: 'radial-gradient(circle, rgba(139,92,246,0.4) 0%, transparent 70%)' 
              }}
            />
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/NodalSpringStack.tsx
название файла: wooden/components/NodalSpringStack.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect, useRef, useContext } from 'react';
import { Layers, Zap, Activity, Sliders, Move3d, MousePointer2, RefreshCw, Anchor } from 'lucide-react';
import { playUISound } from './AudioService';

export const NodalSpringStack: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';
  const containerRef = useRef<HTMLDivElement>(null);
  
  // Перекалиброванные параметры: 50% теперь середина (0.15 для жесткости, 0.80 для демпфирования)
  const [stiffness, setStiffness] = useState(0.15);
  const [damping, setDamping] = useState(0.80);
  
  // Состояния слоев (5 слоев)
  const [layers, setLayers] = useState(Array.from({ length: 5 }).map(() => ({ x: 0, y: 0 })));
  const velocities = useRef(Array.from({ length: 5 }).map(() => ({ x: 0, y: 0 })));
  const targetPos = useRef({ x: 0, y: 0 });

  useEffect(() => {
    let frame: number;
    const update = () => {
      setLayers(prev => {
        const next = [...prev];
        
        for (let i = 0; i < 5; i++) {
          // Цель для текущего слоя - позиция слоя выше (или курсор для L0)
          const target = i === 0 ? targetPos.current : next[i - 1];
          
          const dx = target.x - next[i].x;
          const dy = target.y - next[i].y;
          
          const ax = dx * stiffness;
          const ay = dy * stiffness;
          
          velocities.current[i].x = (velocities.current[i].x + ax) * damping;
          velocities.current[i].y = (velocities.current[i].y + ay) * damping;
          
          next[i] = {
            x: next[i].x + velocities.current[i].x,
            y: next[i].y + velocities.current[i].y
          };
        }
        return next;
      });
      frame = requestAnimationFrame(update);
    };
    frame = requestAnimationFrame(update);
    return () => cancelAnimationFrame(frame);
  }, [stiffness, damping]);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = containerRef.current?.getBoundingClientRect();
    if (rect) {
      targetPos.current = {
        x: e.clientX - rect.left - rect.width / 2,
        y: e.clientY - rect.top - rect.height / 2
      };
    }
  };

  // Функции маппинга для слайдеров (чтобы 50% было серединой)
  const getStiffnessPercent = () => ((stiffness - 0.01) / (0.30 - 0.01)) * 100;
  const getDampingPercent = () => ((damping - 0.60) / (0.99 - 0.60)) * 100;

  return (
    <div className="scroll-mt-32">
      <div className="mb-20 flex flex-col md:flex-row justify-between items-end gap-12">
        <div className="space-y-4">
           <span className="px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
             Kinetic_Optical_Chains_v2
           </span>
           <h2 className="text-6xl font-tech font-bold tracking-tight text-zinc-900 dark:text-white uppercase leading-[0.9]">
             Пружинный <br /><span className="text-indigo-500">Стек.</span>
           </h2>
        </div>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-12 gap-8 h-auto lg:h-[750px] p-1 rounded-[64px] border ${isDark ? 'bg-zinc-950 border-white/5' : 'bg-zinc-100 border-black/5'}`}>
         
         {/* SIDEBAR */}
         <div className={`lg:col-span-3 p-8 border-r flex flex-col gap-10 ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'}`}>
            <div className="space-y-8">
               <div className="flex items-center gap-3 text-indigo-500">
                  <Sliders className="w-5 h-5" />
                  <span className="text-[10px] font-bold uppercase tracking-widest">Calibrated_Physics</span>
               </div>

               <div className="space-y-4">
                  <div className="flex justify-between text-[10px] font-bold text-zinc-500 uppercase">
                     <span>Жесткость</span>
                     <span className="text-indigo-500">{getStiffnessPercent().toFixed(0)}%</span>
                  </div>
                  <input 
                    type="range" min="0.01" max="0.30" step="0.005" value={stiffness}
                    onChange={e => setStiffness(parseFloat(e.target.value))}
                    className="w-full h-1 bg-black/10 dark:bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-indigo-500"
                  />
               </div>

               <div className="space-y-4">
                  <div className="flex justify-between text-[10px] font-bold text-zinc-500 uppercase">
                     <span>Баунс (Damping)</span>
                     <span className="text-indigo-500">{getDampingPercent().toFixed(0)}%</span>
                  </div>
                  <input 
                    type="range" min="0.60" max="0.99" step="0.005" value={damping}
                    onChange={e => setDamping(parseFloat(e.target.value))}
                    className="w-full h-1 bg-black/10 dark:bg-zinc-800 rounded-lg appearance-none cursor-pointer accent-indigo-500"
                  />
               </div>
               
               <div className="p-4 bg-indigo-500/5 rounded-2xl border border-indigo-500/10">
                  <p className="text-[8px] text-zinc-500 leading-relaxed uppercase font-mono">
                    Calibration_Notice: 50/50 settings are now established as the system equilibrium for fluid spatiality.
                  </p>
               </div>
            </div>

            <div className="mt-auto p-6 bg-black/40 rounded-3xl border border-white/5 space-y-4">
               <div className="flex items-center gap-2 text-indigo-400">
                  <Activity className="w-4 h-4 animate-pulse" />
                  <span className="text-[9px] font-bold uppercase tracking-widest">Chain_Flow_Rate</span>
               </div>
               <div className="text-3xl font-tech font-bold text-white uppercase tracking-tighter">
                  {((stiffness * damping) * 100).toFixed(2)} <span className="text-xs opacity-30">FLUX</span>
               </div>
            </div>
         </div>

         {/* VIEWPORT */}
         <div 
           ref={containerRef}
           onMouseMove={handleMouseMove}
           className="lg:col-span-9 bg-black relative overflow-hidden flex items-center justify-center group shadow-inner cursor-none"
         >
            {/* Background Grid */}
            <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />

            {/* Connecting Springs SVG */}
            <svg className="absolute inset-0 w-full h-full pointer-events-none overflow-visible z-10 opacity-30">
               {layers.map((layer, i) => {
                 if (i === 0) return null;
                 return (
                   <line 
                     key={i}
                     x1={`calc(50% + ${layers[i-1].x}px)`}
                     y1={`calc(50% + ${layers[i-1].y}px)`}
                     x2={`calc(50% + ${layer.x}px)`}
                     y2={`calc(50% + ${layer.y}px)`}
                     stroke="#6366f1"
                     strokeWidth="2"
                     strokeDasharray="4 4"
                   />
                 );
               })}
            </svg>

            {/* The Chained Glass Layers */}
            <div className="relative w-full h-full flex items-center justify-center perspective-2000 preserve-3d">
               {layers.map((layer, i) => {
                 const zIndex = 50 - i;
                 return (
                   <div 
                     key={i}
                     className="absolute w-[400px] h-[260px] transition-shadow duration-300 border-2 rounded-[56px] shadow-2xl flex flex-col items-center justify-center p-8 backdrop-blur-md"
                     style={{ 
                       transform: `translate3d(${layer.x}px, ${layer.y}px, ${i * -60}px) scale(${1 - i * 0.05})`,
                       zIndex: zIndex,
                       backgroundColor: `rgba(255, 255, 255, ${0.05 + i * 0.02})`,
                       borderColor: `rgba(99, 102, 241, ${0.2 + (5-i) * 0.1})`,
                       backdropFilter: `blur(${20 + (4-i) * 10}px)`
                     }}
                   >
                      <div className="absolute top-6 left-10 flex items-center gap-3">
                         <div className="w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse" />
                         <span className="text-[8px] font-mono text-zinc-500 uppercase tracking-widest">Layer_0{i} // Fluid_Lock</span>
                      </div>
                      
                      <div className={`transition-all duration-700 ${Math.abs(velocities.current[i].x) > 1 ? 'scale-110' : 'scale-100'}`}>
                         {i === 0 ? <Zap className="w-12 h-12 text-indigo-500" /> : <Anchor className="w-8 h-8 text-zinc-700" />}
                      </div>
                   </div>
                 );
               })}
            </div>

            {/* CUSTOM CURSOR HUD */}
            <div 
              className="absolute pointer-events-none z-50 transition-transform duration-75"
              style={{ transform: `translate(calc(50% + ${targetPos.current.x}px - 50%), calc(50% + ${targetPos.current.y}px - 50%))` }}
            >
               <div className="w-10 h-10 border border-indigo-500 rounded-full flex items-center justify-center bg-black/40 backdrop-blur-md">
                  <div className="w-1.5 h-1.5 bg-indigo-500 rounded-full animate-ping" />
               </div>
            </div>

            <div className="absolute bottom-12 right-12 text-right">
               <div className="text-[10px] font-mono text-indigo-500 uppercase tracking-widest font-black mb-1">State: CALIBRATED_SYNC</div>
               <div className="text-[8px] font-mono text-zinc-700 uppercase">Spring_Chain: NOMINAL</div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/PhysicsInsights.tsx
название файла: wooden/components/PhysicsInsights.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect, useRef } from 'react';
import { Sliders, Activity, Zap, RefreshCw, Gauge, Info, ChevronRight } from 'lucide-react';
import { playUISound } from './AudioService';

export const PhysicsInsights: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';
  const [time, setTime] = useState(0);
  const [activePreset, setActivePreset] = useState<'brittle' | 'standard' | 'fluid'>('standard');

  useEffect(() => {
    const interval = setInterval(() => setTime(t => t + 0.1), 20);
    return () => clearInterval(interval);
  }, []);

  const presets = {
    brittle: { stiffness: 0.3, damping: 0.6, label: 'Хрупкая (Brittle)', color: '#f43f5e' },
    standard: { stiffness: 0.15, damping: 0.8, label: 'Баланс 50/50 (Forge)', color: '#6366f1' },
    fluid: { stiffness: 0.05, damping: 0.95, label: 'Жидкая (Fluid)', color: '#10b981' }
  };

  const getWavePath = (p: typeof presets.standard) => {
    let points = [];
    for (let x = 0; x <= 400; x += 2) {
      // Имитация затухающей синусоиды (Underdamped oscillator)
      const t = x / 50;
      const decay = Math.exp(-p.damping * t * 2);
      const y = 100 + Math.sin(t * p.stiffness * 50 + time) * 60 * decay;
      points.push(`${x},${y}`);
    }
    return `M ${points.join(' L ')}`;
  };

  return (
    <div className="scroll-mt-32 py-24 space-y-24">
      <div className="flex flex-col md:flex-row justify-between items-end gap-12">
        <div className="space-y-4">
           <span className="px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/10 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.6em]">
              Physics_Laboratory_Insights
           </span>
           <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
              Инсайты <br /><span className="text-indigo-500">Калибровки.</span>
           </h2>
        </div>
        <div className="p-8 bg-zinc-900 border border-white/5 rounded-[40px] shadow-2xl flex items-center gap-10">
           <div className="space-y-1">
              <div className="text-[8px] font-mono text-zinc-500 uppercase">Equilibrium_State</div>
              <div className="text-4xl font-tech font-bold text-emerald-500">50 / 50</div>
           </div>
           <Gauge className="w-10 h-10 text-emerald-500 animate-pulse" />
        </div>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-12 gap-8 h-auto lg:h-[700px] p-1 rounded-[64px] border ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-100 border-black/5 shadow-inner'}`}>
         
         {/* PRESET CONTROLS */}
         <div className={`lg:col-span-4 p-10 border-r flex flex-col gap-8 ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'}`}>
            <div className="flex items-center gap-3 text-indigo-500">
               <Info className="w-5 h-5" />
               <span className="text-[10px] font-bold uppercase tracking-widest font-mono text-zinc-500 uppercase">Calibration_Guide</span>
            </div>

            <div className="space-y-4 flex-1">
               {(Object.keys(presets) as Array<keyof typeof presets>).map(key => (
                 <button 
                   key={key}
                   onClick={() => { setActivePreset(key); playUISound('click'); }}
                   className={`w-full p-6 rounded-3xl border transition-all duration-500 flex flex-col gap-4 group
                     ${activePreset === key ? 'bg-zinc-900 border-white/10 text-white shadow-xl scale-[1.02]' : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10'}
                   `}
                 >
                    <div className="flex items-center justify-between">
                       <span className="text-xs font-black uppercase tracking-widest">{presets[key].label}</span>
                       <div className="w-2 h-2 rounded-full" style={{ backgroundColor: presets[key].color }} />
                    </div>
                    <div className="flex gap-6 opacity-40 group-hover:opacity-100 transition-opacity">
                       <div className="text-[9px] font-mono uppercase">Stiff: {presets[key].stiffness}</div>
                       <div className="text-[9px] font-mono uppercase">Damp: {presets[key].damping}</div>
                    </div>
                 </button>
               ))}
            </div>

            <div className="p-6 bg-black/40 rounded-3xl border border-white/5 space-y-4">
               <p className="text-[9px] text-zinc-500 leading-relaxed font-mono uppercase italic">
                 "Our golden 50/50 standard represents the perfect balance between reactive impulse and kinetic rest."
               </p>
            </div>
         </div>

         {/* OSCILLOSCOPE VIEWPORT */}
         <div className="lg:col-span-8 bg-black relative overflow-hidden flex items-center justify-center shadow-inner group/crt">
            <div className="absolute inset-0 bg-[linear-gradient(to_bottom,rgba(99,102,241,0.02)_50%,transparent_50%)] bg-[length:100%_4px] pointer-events-none z-30" />
            
            <div className="relative w-full h-full flex items-center justify-center p-20">
               <svg viewBox="0 0 400 200" className="w-full h-full overflow-visible drop-shadow-[0_0_20px_rgba(99,102,241,0.3)]">
                  {/* Grid Lines */}
                  <line x1="0" y1="100" x2="400" y2="100" stroke="rgba(255,255,255,0.05)" strokeWidth="1" />
                  <line x1="200" y1="0" x2="200" y2="200" stroke="rgba(255,255,255,0.05)" strokeWidth="1" />

                  <path 
                    d={getWavePath(presets[activePreset])} 
                    fill="none" 
                    stroke={presets[activePreset].color} 
                    strokeWidth="3" 
                    strokeLinecap="round" 
                    className="transition-all duration-300 ease-in-out"
                  />
                  
                  {/* Traveling Pulse Dot */}
                  <circle r="4" fill="#fff" filter="blur(2px)">
                    <animateMotion dur="2s" repeatCount="indefinite" path={getWavePath(presets[activePreset])} />
                  </circle>
               </svg>
            </div>

            <div className="absolute top-12 left-12 flex flex-col gap-2">
               <div className="flex items-center gap-3 bg-white/5 px-4 py-1.5 rounded-full border border-white/10">
                  <Activity className="w-4 h-4 text-indigo-500 animate-pulse" />
                  <span className="text-[10px] font-mono text-zinc-400 uppercase tracking-widest font-black">Wave_Buffer: {activePreset.toUpperCase()}</span>
               </div>
            </div>

            <div className="absolute bottom-12 right-12 text-right">
               <div className="text-[10px] font-mono text-indigo-500 uppercase tracking-widest font-black mb-1">Physics_Engine: CALIBRATED_0x88</div>
               <div className="text-[8px] font-mono text-zinc-700 uppercase">Snells_Law_V4_Integrated</div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/ServicesGrid.tsx
название файла: wooden/components/ServicesGrid.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState } from 'react';
import { Cpu, Zap, Radio, Globe, ArrowUpRight } from 'lucide-react';
import { playUISound } from './AudioService';

interface Props {
  theme: 'dark' | 'light';
  onSelect: (service: any) => void;
}

export const ServicesGrid: React.FC<Props> = ({ theme, onSelect }) => {
  const isDark = theme === 'dark';
  const services = [
    { title: 'Spatial UI Kit', price: '0x88.A', tag: 'Core_Logic', icon: Cpu, desc: 'Набор высокопроизводительных компонентов с физически корректным стеклом, глубоким блюром и хроматическими аберрациями.' },
    { title: 'Neural Web', price: '0x42.F', tag: 'AI_Driven', icon: Zap, desc: 'Разработка веб-приложений с глубокой интеграцией Gemini AI для адаптивного UX.' },
    { title: 'Optical Motion', price: '0x12.S', tag: 'Physics', icon: Radio, desc: 'Система анимации, основанная на инерции, преломлении световых волн и тактильном отклике.' },
    { title: 'Edge Network', price: '0x99.M', tag: 'Global', icon: Globe, desc: 'Развертывание интерфейсов в децентрализованных узлах с нулевой задержкой и защитой уровня L7.' }
  ];

  return (
    <div className="scroll-mt-32">
      <div className="mb-24 space-y-4">
         <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Inventory_Registry_v4</span>
         <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
            Доступные <br /><span className="text-indigo-500">Модули.</span>
         </h2>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
         {services.map((service, i) => (
           <ServiceCard key={i} service={service} isDark={isDark} index={i} onClick={() => { playUISound('click'); onSelect(service); }} />
         ))}
      </div>
    </div>
  );
};

const ServiceCard: React.FC<{ service: any; isDark: boolean; index: number; onClick: () => void }> = ({ service, isDark, index, onClick }) => {
  const [tilt, setTilt] = useState({ x: 0, y: 0 });

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width - 0.5;
    const y = (e.clientY - rect.top) / rect.height - 0.5;
    setTilt({ x: y * 15, y: x * -15 });
  };

  return (
    <div 
      onMouseMove={handleMouseMove}
      onMouseEnter={() => playUISound('hover')}
      onMouseLeave={() => setTilt({ x: 0, y: 0 })}
      onClick={onClick}
      className="perspective-1000 group cursor-pointer"
    >
       <div 
         className={`relative p-12 rounded-[48px] border transition-all duration-500 ease-out preserve-3d
           ${isDark ? 'bg-white/[0.03] border-white/5 group-hover:border-white/20' : 'bg-white border-black/5 shadow-[0_20px_50px_rgba(0,0,0,0.04)] group-hover:shadow-[0_40px_80px_rgba(0,0,0,0.08)] group-hover:border-black/10'}
         `}
         style={{ transform: `rotateX(${tilt.x}deg) rotateY(${tilt.y}deg)` }}
       >
          <div className="space-y-16 relative z-10">
             <div className="flex justify-between items-start">
                <div className={`w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-500 group-hover:scale-110 shadow-2xl ${isDark ? 'bg-zinc-900 border border-white/10 text-indigo-500' : 'bg-zinc-50 border border-black/5 text-zinc-900'}`}>
                   <service.icon className="w-8 h-8" />
                </div>
                <div className="text-right">
                   <div className="text-[10px] font-mono opacity-20 uppercase tracking-widest font-black">Ref_0{index + 1}</div>
                </div>
             </div>
             
             <div className="space-y-6">
                <h3 className="text-4xl font-tech font-bold uppercase tracking-widest text-zinc-900 dark:text-white leading-none group-hover:text-indigo-500 transition-colors">{service.title}</h3>
                <p className="text-lg font-light leading-relaxed max-w-sm opacity-50 text-zinc-600 dark:text-zinc-400">
                  {service.desc}
                </p>
             </div>

             <div className="flex justify-between items-end border-t border-current/5 pt-10">
                <div>
                   <div className="text-3xl font-tech font-bold text-zinc-900 dark:text-white">{service.price}</div>
                </div>
                <div className={`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-500 border ${isDark ? 'bg-white/5 border-white/10 group-hover:bg-indigo-600 group-hover:text-white' : 'bg-black/5 border-black/10 group-hover:bg-zinc-900 group-hover:text-white'}`}>
                   <ArrowUpRight className="w-6 h-6" />
                </div>
             </div>
          </div>
       </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/SharedStubs.tsx
название файла: wooden/components/SharedStubs.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React from 'react';
import { Box, Layers, Zap, Activity, Cpu, Shield, Search, Grid3X3, Radio, Database } from 'lucide-react';

const ICONS = [Box, Layers, Zap, Activity, Cpu, Shield, Search, Grid3X3, Radio, Database];

interface BlueprintStubProps {
  title: string;
  desc: string;
  index: number;
}

export const BlueprintStub: React.FC<BlueprintStubProps> = ({ title, desc, index }) => {
  const Icon = ICONS[index % ICONS.length];
  
  return (
    <div className="relative group p-12 rounded-[56px] border border-black/5 dark:border-white/5 bg-white/[0.02] dark:bg-black/20 overflow-hidden transition-all duration-700 hover:border-indigo-500/30 hover:translate-y-[-8px]">
       {/* Background Grid inside stub */}
       <div className="absolute inset-0 opacity-[0.03] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '30px 30px' }} />
       
       {/* Scanner Animation */}
       <div className="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-1000 overflow-hidden pointer-events-none">
          <div className="w-full h-[1px] bg-indigo-500/40 shadow-[0_0_15px_#6366f1] animate-[scan_3s_linear_infinite]" />
       </div>

       <div className="relative z-10 space-y-8">
          <div className="flex justify-between items-start">
             <div className="w-14 h-14 rounded-2xl bg-zinc-900 border border-white/10 flex items-center justify-center text-zinc-500 group-hover:text-indigo-400 group-hover:scale-110 transition-all duration-500">
                <Icon className="w-6 h-6" />
             </div>
             <div className="text-[8px] font-mono text-zinc-600 uppercase tracking-widest font-black">
                Phase: Blueprint_v{index + 1}
             </div>
          </div>

          <div className="space-y-3">
             <h4 className="text-2xl font-tech font-bold text-zinc-900 dark:text-white uppercase tracking-widest leading-none">{title}</h4>
             <p className="text-sm font-light text-zinc-500 dark:text-zinc-400 leading-relaxed">{desc}</p>
          </div>

          <div className="pt-8 border-t border-black/5 dark:border-white/5 flex justify-between items-center opacity-30 group-hover:opacity-100 transition-opacity duration-700">
             <div className="flex items-center gap-2">
                <Activity className="w-3 h-3 text-indigo-500" />
                <span className="text-[7px] font-mono uppercase">LOD_Mapping: PENDING</span>
             </div>
             <span className="text-[7px] font-mono">HASH: 0x{Math.random().toString(16).slice(2, 6).toUpperCase()}</span>
          </div>
       </div>
       
       <style>{`
          @keyframes scan { 0% { top: 0%; } 100% { top: 100%; } }
       `}</style>
    </div>
  );
};

export const SectionStubGroup: React.FC<{ category: string, count?: number }> = ({ category, count = 4 }) => {
  return (
    <div className="space-y-16">
       <div className="flex items-center gap-4 border-b border-black/5 dark:border-white/5 pb-8">
          <Cpu className="w-6 h-6 text-zinc-500" />
          <h3 className="text-3xl font-tech font-bold uppercase text-zinc-400 tracking-widest">{category}_Architectural_Nodes</h3>
       </div>
       <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
          {Array.from({ length: count }).map((_, i) => (
             <BlueprintStub 
               key={i}
               index={i}
               title={`Module_Node_0x${i}${category[0]}`}
               desc={`Архитектурный чертеж подсистемы ${category}. Данный узел находится в фазе калибровки нейронных весов.`}
             />
          ))}
       </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/StateMorphStack.tsx
название файла: wooden/components/StateMorphStack.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect, useRef, useContext } from 'react';
import { 
  Layers, Cpu, Zap, Activity, Shield, ShieldAlert, 
  Box, Share2, Move, Layout, Radio, Terminal, 
  Sliders, Target, Gauge, Aperture, CheckCircle2, 
  AlertTriangle, Palette, Fingerprint, RefreshCw,
  Anchor, MousePointer2
} from 'lucide-react';
import { playUISound } from './AudioService';
import { LanguageContext } from '../App';

type SystemState = 'STATIONARY' | 'ISOLATED' | 'IDLE' | 'FOCUS' | 'PROCESSING' | 'SUCCESS' | 'ERROR' | 'CHROMATIC' | 'SURGE';

export const StateMorphStack: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const isDark = theme === 'dark';
  const [systemState, setSystemState] = useState<SystemState>('IDLE');
  const containerRef = useRef<HTMLDivElement>(null);
  
  const [layers, setLayers] = useState([
    { x: 0, y: 0, z: -100, scale: 1, blur: 20, opacity: 0.1, label: 'Matter_L0', radius: 48 },
    { x: 0, y: 0, z: 0, scale: 1, blur: 10, opacity: 0.3, label: 'Logic_L1', radius: 48 },
    { x: 0, y: 0, z: 100, scale: 1, blur: 0, opacity: 0.8, label: 'UI_L2', radius: 48 }
  ]);

  const targetPos = useRef({ x: 0, y: 0 });
  const velocities = useRef([{ x: 0, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 0 }]);
  const [coherence, setCoherence] = useState(100);

  useEffect(() => {
    let frame: number;
    const update = () => {
      const configs: Record<SystemState, any> = {
        STATIONARY: { stiffness: 0.2, damping: 0.7, zGap: 10, jitter: 0 },
        ISOLATED: { stiffness: 0.25, damping: 0.82, zGap: 40, jitter: 0 },
        IDLE: { stiffness: 0.05, damping: 0.9, zGap: 40, jitter: 0 },
        FOCUS: { stiffness: 0.4, damping: 0.6, zGap: 20, jitter: 0 },
        PROCESSING: { stiffness: 0.1, damping: 0.8, zGap: 60, jitter: 0.5 },
        SUCCESS: { stiffness: 0.05, damping: 0.95, zGap: 80, jitter: 0 },
        ERROR: { stiffness: 0.8, damping: 0.3, zGap: 50, jitter: 12 },
        CHROMATIC: { stiffness: 0.15, damping: 0.85, zGap: 100, jitter: 0 },
        SURGE: { stiffness: 0.4, damping: 0.5, zGap: 140, jitter: 15 }
      };

      const cfg = configs[systemState];

      setLayers(prev => {
        const next = [...prev];
        let totalDeviation = 0;

        for (let i = 0; i < 3; i++) {
          // В STATIONARY цель всегда центр
          const currentTarget = systemState === 'STATIONARY' ? { x: 0, y: 0 } : targetPos.current;
          const localTarget = i === 2 ? currentTarget : next[i + 1];
          
          const dx = localTarget.x - next[i].x;
          const dy = localTarget.y - next[i].y;
          
          const jitterX = (systemState === 'SURGE' || systemState === 'ERROR') ? (Math.random() - 0.5) * cfg.jitter : 0;
          const jitterY = (systemState === 'SURGE' || systemState === 'ERROR') ? (Math.random() - 0.5) * cfg.jitter : 0;

          velocities.current[i].x = (velocities.current[i].x + dx * cfg.stiffness) * cfg.damping;
          velocities.current[i].y = (velocities.current[i].y + dy * cfg.stiffness) * cfg.damping;

          totalDeviation += Math.abs(velocities.current[i].x) + Math.abs(velocities.current[i].y);

          next[i] = {
            ...next[i],
            x: next[i].x + velocities.current[i].x + jitterX,
            y: next[i].y + velocities.current[i].y + jitterY,
            z: (i - 1) * cfg.zGap,
            scale: (systemState === 'FOCUS' || systemState === 'ISOLATED') && i === 2 ? 1.05 : 1 - (i * 0.05),
            opacity: i === 2 ? 0.9 : 0.2 + (i * 0.1)
          };
        }

        setCoherence(prev => {
           const targetCoherence = systemState === 'ERROR' ? 12 : systemState === 'SURGE' ? 45 : 100 - (totalDeviation * 0.5);
           return prev + (targetCoherence - prev) * 0.1;
        });
        return next;
      });
      frame = requestAnimationFrame(update);
    };
    frame = requestAnimationFrame(update);
    return () => cancelAnimationFrame(frame);
  }, [systemState]);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = containerRef.current?.getBoundingClientRect();
    if (!rect) return;

    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    const offX = e.clientX - centerX;
    const offY = e.clientY - centerY;
    const rawDist = Math.sqrt(offX * offX + offY * offY);

    if (systemState === 'STATIONARY') {
      targetPos.current = { x: 0, y: 0 };
      return;
    }

    if (systemState === 'ISOLATED') {
      const activeRadius = 300; // Порог активации притяжения
      if (rawDist < activeRadius) {
        // Магнитная логика: чем ближе, тем сильнее тянет
        const pull = Math.max(0, 1 - rawDist / activeRadius);
        targetPos.current = { x: offX * pull * 0.8, y: offY * pull * 0.8 };
      } else {
        targetPos.current = { x: 0, y: 0 };
      }
      return;
    }

    // Обычная глобальная логика для остальных состояний
    const moveScale = systemState === 'IDLE' ? 0.1 : systemState === 'FOCUS' ? 1.2 : 0.8;
    targetPos.current = { x: offX * moveScale, y: offY * moveScale };
  };

  const toggleState = (s: SystemState) => {
    setSystemState(s);
    if (s === 'ERROR') playUISound('process');
    else if (s === 'STATIONARY') playUISound('click');
    else playUISound('click');
  };

  const getIcon = () => {
    switch(systemState) {
      case 'STATIONARY': return <Anchor className="w-8 h-8 text-zinc-400" />;
      case 'ISOLATED': return <Fingerprint className="w-8 h-8 text-emerald-400" />;
      case 'FOCUS': return <Aperture className="w-8 h-8 text-sky-400" />;
      case 'SUCCESS': return <CheckCircle2 className="w-8 h-8 text-emerald-500" />;
      case 'ERROR': return <AlertTriangle className="w-8 h-8 text-rose-500 animate-pulse" />;
      case 'CHROMATIC': return <Palette className="w-8 h-8 text-indigo-400" />;
      case 'PROCESSING': return <Activity className="w-8 h-8 text-indigo-400 animate-spin-slow" />;
      default: return <Zap className={`w-8 h-8 ${systemState === 'SURGE' ? 'text-rose-500 animate-bounce' : 'text-indigo-500'}`} />;
    }
  };

  return (
    <div className="scroll-mt-32 space-y-16 animate-in fade-in duration-1000">
      {/* HEADER SECTION */}
      <div className="flex flex-col lg:flex-row justify-between items-end gap-12">
        <div className="space-y-6">
           <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
              <Cpu className="w-3 h-3" /> SYSTEM_BEHAVIOR_ORCHESTRATOR
           </div>
           <h2 className="text-[80px] md:text-[100px] font-tech font-bold text-zinc-900 dark:text-white uppercase leading-[0.8] tracking-tighter">
              Матрица <br /><span className="text-indigo-500">Состояний.</span>
           </h2>
           <p className="text-xl font-light text-zinc-500 max-xl">
             Калибровка отклика материи. Выберите режим, чтобы изменить физические константы, рефракцию и инерцию всего стека компонентов.
           </p>
        </div>

        {/* Coherence Gauge */}
        <div className={`p-10 rounded-[48px] border transition-all duration-700 w-full lg:w-72 flex flex-col gap-4 shadow-2xl
          ${isDark ? 'bg-zinc-900 border-white/5' : 'bg-white border-black/5'}
          ${systemState === 'ERROR' ? 'border-rose-500/50' : ''}
        `}>
           <div className="flex items-center justify-between">
              <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Когезия</span>
              <Gauge className={`w-4 h-4 ${coherence < 50 ? 'text-rose-500 animate-pulse' : 'text-emerald-500'}`} />
           </div>
           <div className="text-5xl font-tech font-black text-zinc-900 dark:text-white tracking-tighter">
             {coherence.toFixed(1)}%
           </div>
           <div className="h-1 w-full bg-black/10 dark:bg-white/5 rounded-full overflow-hidden">
              <div className={`h-full transition-all duration-300 ${coherence < 50 ? 'bg-rose-500' : 'bg-indigo-500'}`} style={{ width: `${coherence}%` }} />
           </div>
        </div>
      </div>

      <div className={`grid grid-cols-1 lg:grid-cols-12 gap-8 h-auto lg:min-h-[750px] p-1 rounded-[80px] border transition-all duration-1000
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-zinc-100 border-black/5 shadow-inner'}
      `}>
         
         {/* SIDEBAR CONTROLS */}
         <div className={`lg:col-span-3 p-12 border-r flex flex-col gap-10 overflow-y-auto custom-scroll ${isDark ? 'bg-zinc-900/50 border-white/5' : 'bg-white border-black/5'}`}>
            <div className="space-y-6">
               <div className="flex items-center gap-3 text-indigo-500">
                  <Sliders className="w-5 h-5" />
                  <span className="text-[10px] font-bold uppercase tracking-widest text-zinc-500">Библиотека_Состояний</span>
               </div>

               <div className="grid grid-cols-1 gap-2">
                  {/* Новые состояния STATIONARY и ISOLATED на порядок выше */}
                  {(['STATIONARY', 'ISOLATED', 'IDLE', 'FOCUS', 'PROCESSING', 'SUCCESS', 'ERROR', 'CHROMATIC', 'SURGE'] as SystemState[]).map(s => (
                    <button 
                      key={s}
                      onClick={() => toggleState(s)}
                      className={`p-4 rounded-2xl border transition-all duration-300 flex items-center justify-between group relative overflow-hidden
                        ${systemState === s ? (
                          s === 'ERROR' ? 'bg-rose-600 border-rose-400 text-white shadow-lg' :
                          s === 'SUCCESS' ? 'bg-emerald-600 border-emerald-400 text-white shadow-lg' :
                          s === 'STATIONARY' ? 'bg-zinc-800 border-zinc-600 text-white shadow-lg' :
                          'bg-indigo-600 border-indigo-400 text-white shadow-xl'
                        ) : 'bg-white/5 border-transparent text-zinc-500 hover:bg-white/10 hover:translate-x-1'}
                      `}
                    >
                       <div className="flex items-center gap-3">
                          {s === 'STATIONARY' && <Anchor className="w-3 h-3" />}
                          {s === 'ISOLATED' && <Fingerprint className="w-3 h-3" />}
                          <span className="text-[10px] font-black uppercase tracking-widest relative z-10">{s}</span>
                       </div>
                       <div className={`w-1.5 h-1.5 rounded-full transition-all ${systemState === s ? 'bg-white scale-125' : 'bg-zinc-800'}`} />
                    </button>
                  ))}
               </div>
            </div>

            <div className="mt-auto space-y-4 bg-black/20 p-6 rounded-[32px] border border-white/5">
               <div className="flex items-center gap-4 text-indigo-400">
                  <Terminal className="w-4 h-4" />
                  <span className="text-[9px] font-bold uppercase tracking-widest">Physics_Log</span>
               </div>
               <div className="space-y-2 font-mono text-[8px] text-zinc-600 uppercase">
                  <div>Bias: {systemState}</div>
                  <div>Sync: {coherence > 90 ? 'LOCKED' : 'CALIBRATING'}</div>
                  <div className="text-indigo-500 animate-pulse"> Listening for input...</div>
               </div>
            </div>
         </div>

         {/* VISUAL VIEWPORT */}
         <div 
           ref={containerRef}
           onMouseMove={handleMouseMove}
           className="lg:col-span-9 bg-[#050508] relative overflow-hidden flex items-center justify-center group shadow-inner cursor-none"
         >
            {/* Environmental Glow */}
            <div className={`absolute inset-0 transition-all duration-1000 opacity-20
              ${systemState === 'ERROR' ? 'bg-rose-500 blur-[150px]' : systemState === 'SUCCESS' ? 'bg-emerald-500 blur-[150px]' : 'bg-indigo-500 blur-[150px]'}
            `} />

            {/* THE SPATIAL STACK */}
            <div className="relative w-full h-full flex items-center justify-center perspective-2000 preserve-3d">
               
               {layers.map((layer, i) => {
                 const isTop = i === 2;
                 const isMid = i === 1;
                 
                 // Эффекты специфичные для состояний
                 const chromaticShadow = systemState === 'CHROMATIC' && isTop 
                   ? '10px 0 30px rgba(244,63,94,0.4), -10px 0 30px rgba(56,189,248,0.4)' 
                   : 'none';
                 
                 const errorFilter = systemState === 'ERROR' ? `hue-rotate(${Math.random()*90}deg) contrast(1.5)` : 'none';

                 return (
                   <div 
                     key={i}
                     className={`absolute transition-all duration-[50ms] border-2 flex flex-col items-center justify-center p-8 overflow-hidden
                        ${isTop ? 'w-[380px] h-[240px] z-50 bg-white/5 border-white/20' : ''}
                        ${isMid ? 'w-[420px] h-[280px] z-40 bg-indigo-500/5 border-indigo-500/20' : ''}
                        ${i === 0 ? 'w-[480px] h-[340px] z-30 bg-white/[0.01] border-white/5 opacity-40' : ''}
                        ${systemState === 'ERROR' ? 'border-rose-500/40 bg-rose-500/5' : ''}
                        ${systemState === 'SUCCESS' && isTop ? 'border-emerald-500/50 bg-emerald-500/5' : ''}
                        ${systemState === 'STATIONARY' ? 'grayscale opacity-60' : ''}
                     `}
                     style={{ 
                       transform: `translate3d(${layer.x}px, ${layer.y}px, ${layer.z}px) rotateX(45deg) rotateZ(-15deg) scale(${layer.scale})`,
                       borderRadius: `${(systemState === 'FOCUS' || systemState === 'ISOLATED') && isTop ? 12 : layer.radius}px`,
                       backdropFilter: `blur(${(systemState === 'FOCUS' || systemState === 'ISOLATED') && isTop ? 40 : layer.blur}px)`,
                       boxShadow: chromaticShadow,
                       filter: errorFilter
                     }}
                   >
                      {/* Internal Data Visuals */}
                      <div className="absolute top-6 left-8 flex items-center gap-2 opacity-20">
                         <Box className="w-3 h-3" />
                         <span className="text-[7px] font-mono uppercase tracking-[0.4em]">{layer.label}</span>
                      </div>

                      {isTop && (
                        <div className="flex items-center gap-6 z-10 animate-in zoom-in duration-500">
                           <div className={`w-20 h-20 rounded-[32px] flex items-center justify-center transition-all duration-500 shadow-2xl
                             ${systemState === 'SUCCESS' ? 'bg-emerald-500 text-white' : 
                               systemState === 'ERROR' ? 'bg-rose-600 text-white' : 
                               systemState === 'STATIONARY' ? 'bg-zinc-700 text-white' :
                               'bg-zinc-800 text-zinc-500'}
                           `}>
                              {getIcon()}
                           </div>
                           <div>
                              <div className={`text-[10px] font-mono font-black uppercase transition-colors ${systemState === 'ERROR' ? 'text-rose-500' : 'text-indigo-400'}`}>
                                 {systemState}_LINK_0x14
                              </div>
                              <div className="text-4xl font-tech font-bold text-white uppercase tracking-tighter">
                                 {systemState === 'FOCUS' ? 'Aperture' : 
                                  systemState === 'CHROMATIC' ? 'Spectral' :
                                  systemState === 'STATIONARY' ? 'Inert' :
                                  systemState === 'ERROR' ? 'Critical' : 'Surface'}
                              </div>
                           </div>
                        </div>
                      )}

                      {isMid && systemState === 'PROCESSING' && (
                         <div className="flex flex-col items-center gap-4 opacity-40 animate-pulse">
                            <RefreshCw className="w-12 h-12 text-indigo-400 animate-spin-slow" />
                            <div className="text-[8px] font-mono uppercase tracking-widest text-indigo-400">Logic_Restructuring...</div>
                         </div>
                      )}

                      {/* Diagnostic HUD lines */}
                      <div className="absolute inset-0 border-t border-l border-white/5 pointer-events-none rounded-[inherit]" />
                   </div>
                 );
               })}
            </div>

            {/* CURSOR CROSSHAIR */}
            <div 
              className="absolute pointer-events-none z-[100] transition-transform duration-[50ms]"
              style={{ transform: `translate(calc(50% + ${targetPos.current.x}px - 50%), calc(50% + ${targetPos.current.y}px - 50%))` }}
            >
               <div className="relative">
                  <div className={`w-14 h-14 border rounded-full flex items-center justify-center backdrop-blur-md transition-colors duration-500
                    ${systemState === 'ERROR' ? 'border-rose-500/60' : 'border-indigo-500/40'}
                    ${systemState === 'STATIONARY' ? 'opacity-0' : 'opacity-100'}
                  `}>
                     <div className={`w-1 h-1 rounded-full shadow-[0_0_15px_#6366f1] ${systemState === 'ERROR' ? 'bg-rose-500' : 'bg-indigo-500'}`} />
                  </div>
                  <div className={`absolute top-1/2 left-full ml-4 whitespace-nowrap bg-zinc-900 border border-white/10 px-3 py-1 rounded-lg transition-opacity ${systemState === 'STATIONARY' ? 'opacity-0' : 'opacity-100'}`}>
                     <span className="text-[7px] font-mono text-indigo-400 uppercase">PTR: [{(targetPos.current.x).toFixed(0)}, {(targetPos.current.y).toFixed(0)}]</span>
                  </div>
               </div>
            </div>

            {/* SYSTEM STATUS OVERLAY */}
            <div className="absolute bottom-12 left-12 flex flex-col gap-2 z-[60]">
               <div className={`flex items-center gap-3 px-6 py-2 bg-zinc-900 border border-white/10 rounded-full shadow-2xl transition-colors duration-500
                 ${systemState === 'ERROR' ? 'border-rose-500/40' : ''}
               `}>
                  <Radio className={`w-4 h-4 ${systemState === 'IDLE' ? 'text-zinc-600' : systemState === 'ERROR' ? 'text-rose-500 animate-bounce' : 'text-emerald-500 animate-pulse'}`} />
                  <span className="text-[10px] font-mono text-white uppercase tracking-widest font-black">Mode: {systemState}</span>
               </div>
            </div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/TactileMixingConsole.tsx
название файла: wooden/components/TactileMixingConsole.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------


import React, { useState } from 'react';
import { Volume2, Radio } from 'lucide-react';

interface Props {
  theme: 'dark' | 'light';
}

// Fixed: Added Props generic to React.FC to define the theme prop type
export const TactileMixingConsole: React.FC<Props> = ({ theme }) => {
  const [channels, setChannels] = useState([80, 40, 60, 20]);
  const isDark = theme === 'dark';

  const updateChannel = (i: number, val: number) => {
    const next = [...channels];
    next[i] = val;
    setChannels(next);
  };

  return (
    <div className="scroll-mt-32">
      <div className="mb-20">
         <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] mb-4 block">Analog_Signal_Path</span>
         <h2 className="text-6xl font-tech font-bold uppercase tracking-tighter">Микшер.</h2>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
         {channels.map((val, i) => (
           <div 
             key={i}
             className={`rounded-[48px] border p-12 flex flex-col items-center justify-between transition-all duration-500 overflow-hidden relative
               ${isDark ? 'bg-black/20 border-white/5 hover:border-white/10' : 'bg-white border-black/5 shadow-lg hover:shadow-xl'}
             `}
           >
              <div className="text-center relative z-10">
                 <div className="text-[8px] font-mono text-zinc-500 uppercase mb-2">Ch_0{i+1}</div>
                 <div className="text-xl font-tech font-bold uppercase tracking-widest">{['Vocals', 'Drums', 'Synth', 'Master'][i]}</div>
              </div>

              {/* TACTILE SLIDER - ULTRA MINIMAL */}
              <div className="relative h-64 flex justify-center w-full my-8">
                 <div className={`w-0.5 h-full rounded-full relative overflow-hidden ${isDark ? 'bg-white/10' : 'bg-black/10'}`}>
                    <div 
                      className="absolute bottom-0 w-full bg-amber-600"
                      style={{ height: `${val}%` }}
                    />
                 </div>
                 <input 
                   type="range" min="0" max="100" value={val}
                   onChange={e => updateChannel(i, parseInt(e.target.value))}
                   className="absolute inset-0 opacity-0 cursor-ns-resize"
                   style={{ writingMode: 'bt-lr' as any }}
                 />
                 {/* FADER KNOB */}
                 <div 
                    className={`absolute left-1/2 -translate-x-1/2 w-14 h-8 rounded-lg shadow-xl pointer-events-none transition-all duration-300 flex items-center justify-center border
                      ${isDark ? 'bg-zinc-800 border-white/10' : 'bg-white border-black/10'}
                    `}
                    style={{ bottom: `calc(${val}% - 16px)` }}
                 >
                    <div className="w-8 h-[1px] bg-amber-500 opacity-40" />
                 </div>
              </div>

              <div className="flex justify-between w-full relative z-10 text-[9px] font-mono opacity-20">
                 <Radio className="w-4 h-4" />
                 <span>{val}%</span>
              </div>
           </div>
         ))}
      </div>
    </div>
  );
};

________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/TechnicalPillars.tsx
название файла: wooden/components/TechnicalPillars.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useContext } from 'react';
import { Sun, Zap, Brain, Leaf, ArrowRight } from 'lucide-react';
import { LanguageContext } from '../App';

export const TechnicalPillars: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const isDark = theme === 'dark';

  const pillars = [
    { id: 'optics', icon: Sun, color: 'sky' },
    { id: 'kinetics', icon: Zap, color: 'amber' },
    { id: 'neural', icon: Brain, color: 'indigo' },
    { id: 'biological', icon: Leaf, color: 'emerald' }
  ];

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mt-24">
      {pillars.map((p) => {
        const content = (t.genesis.pillars as any)[p.id];
        return (
          <div 
            key={p.id}
            className={`p-10 rounded-[48px] border transition-all duration-500 group relative overflow-hidden
              ${isDark ? 'bg-zinc-900 border-white/5 hover:border-white/10' : 'bg-white border-black/5 shadow-lg hover:shadow-xl'}
            `}
          >
            {/* Background Accent */}
            <div className={`absolute -top-24 -right-24 w-64 h-64 blur-[80px] opacity-10 transition-opacity duration-700 group-hover:opacity-20 bg-${p.color}-500`} />
            
            <div className="relative z-10 space-y-8">
              <div className={`w-16 h-16 rounded-2xl flex items-center justify-center transition-transform duration-500 group-hover:scale-110 shadow-2xl ${isDark ? 'bg-zinc-950 border border-white/10 text-white' : 'bg-zinc-50 border border-black/5 text-zinc-900'}`}>
                <p.icon className={`w-8 h-8 text-${p.color}-500`} />
              </div>
              
              <div className="space-y-4">
                <h3 className="text-3xl font-tech font-bold uppercase tracking-widest text-zinc-900 dark:text-white leading-none">{content.title}</h3>
                <p className="text-lg font-light leading-relaxed opacity-60 text-zinc-600 dark:text-zinc-400">
                  {content.desc}
                </p>
              </div>

              <div className="pt-8 border-t border-current/5 flex items-center gap-3 text-[10px] font-mono font-black uppercase tracking-[0.4em] opacity-30 group-hover:opacity-100 transition-opacity">
                Module_Analysis <ArrowRight className="w-4 h-4" />
              </div>
            </div>
          </div>
        );
      })}
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/TopTracks.tsx
название файла: wooden/components/TopTracks.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useRef, useEffect } from 'react';
import { Play, Pause, Activity, Radio, MoveRight } from 'lucide-react';
import { playUISound } from './AudioService';

interface Props {
  theme: 'dark' | 'light';
}

export const TopTracks: React.FC<Props> = ({ theme }) => {
  const [playing, setPlaying] = useState<number | null>(null);
  const audioRef = useRef<HTMLAudioElement | null>(null);
  const isDark = theme === 'dark';

  const tracks = [
    { 
      title: 'Neural Symphony', 
      category: 'Spatial Sound', 
      url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
      bpm: 124, dur: '3:42' 
    },
    { 
      title: 'Obsidian Flow', 
      category: 'Techno Minimalism', 
      url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
      bpm: 128, dur: '6:12' 
    },
    { 
      title: 'Alabaster Echo', 
      category: 'Ambient Texture', 
      url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',
      bpm: 90, dur: '5:04' 
    }
  ];

  const toggleTrack = (i: number) => {
    if (playing === i) {
      audioRef.current?.pause();
      setPlaying(null);
      playUISound('click');
    } else {
      setPlaying(i);
      playUISound('success');
      if (audioRef.current) {
        audioRef.current.src = tracks[i].url;
        audioRef.current.play();
      }
    }
  };

  return (
    <div className="scroll-mt-32">
      <audio ref={audioRef} />
      <div className="mb-24 flex flex-col md:flex-row justify-between items-end gap-12">
         <div className="space-y-4">
            <span className="text-[9px] font-mono opacity-30 uppercase tracking-[0.6em] block">Production_Showcase_v0.2</span>
            <h2 className="text-7xl font-tech font-bold uppercase tracking-tighter text-zinc-900 dark:text-white leading-none">
               Топ <br /><span className="text-indigo-500">Релизов.</span>
            </h2>
         </div>
      </div>

      <div className={`rounded-[64px] border overflow-hidden transition-all duration-1000
        ${isDark ? 'bg-black/20 border-white/5 shadow-2xl' : 'bg-white border-black/5 shadow-[0_40px_100px_-20px_rgba(0,0,0,0.05)]'}
      `}>
         <div className="divide-y divide-current divide-opacity-5">
            {tracks.map((track, i) => (
              <div 
                key={i}
                onClick={() => toggleTrack(i)}
                onMouseEnter={() => playUISound('hover')}
                className={`relative p-12 transition-all duration-500 flex flex-col md:flex-row items-center gap-12 group cursor-pointer
                  ${playing === i ? (isDark ? 'bg-white/[0.02]' : 'bg-indigo-50/30') : ''}
                `}
              >
                 <div className="flex items-center gap-10 w-full md:w-1/3">
                    <div className={`w-20 h-20 rounded-[32px] flex items-center justify-center transition-all duration-700 shadow-2xl
                      ${playing === i ? 'bg-indigo-600 text-white scale-110 rotate-12' : (isDark ? 'bg-zinc-900 text-zinc-600' : 'bg-zinc-100 text-zinc-400')}
                    `}>
                       {playing === i ? <Pause className="w-8 h-8 fill-current" /> : <Play className="w-8 h-8 fill-current translate-x-0.5" />}
                    </div>
                    <div>
                       <h4 className={`text-2xl font-tech font-bold uppercase tracking-widest ${isDark ? 'text-white' : 'text-zinc-900'}`}>{track.title}</h4>
                       <div className="text-[10px] font-mono opacity-30 uppercase tracking-[0.3em] mt-1">{track.category}</div>
                    </div>
                 </div>

                 {/* WAVEFORM */}
                 <div className="flex-1 flex items-center gap-1 h-12 opacity-20 group-hover:opacity-100 transition-opacity duration-700">
                    {[...Array(50)].map((_, j) => (
                      <div 
                        key={j}
                        className={`w-px rounded-full transition-all duration-300 ${playing === i ? 'bg-indigo-500' : (isDark ? 'bg-white' : 'bg-black')}`}
                        style={{ 
                          height: playing === i ? `${Math.random() * 100}%` : '20%',
                          transitionDelay: `${j * 10}ms`
                        }}
                      />
                    ))}
                 </div>

                 <div className="flex items-center gap-12 w-full md:w-auto text-right">
                    <div className="whitespace-nowrap">
                       <div className="text-[8px] font-mono opacity-20 uppercase tracking-widest">BPM / Length</div>
                       <div className={`text-sm font-tech font-bold ${isDark ? 'text-white' : 'text-zinc-900'}`}>{track.bpm} / {track.dur}</div>
                    </div>
                 </div>
              </div>
            ))}
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/TypographyLab.tsx
название файла: wooden/components/TypographyLab.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect, useRef } from 'react';
import { 
  Type, Zap, Activity, Sliders, 
  Maximize2, MousePointer2, RefreshCw, 
  Terminal, Share2, Compass, Move,
  Sparkles, Gauge, LayoutTemplate, Scale,
  Monitor, Smartphone, Tablet, ChevronRight,
  Sun, Target, BarChart, Binary
} from 'lucide-react';
import { playUISound } from './AudioService';

export const TypographyLab: React.FC<{ theme: string }> = ({ theme }) => {
  const isDark = theme === 'dark';

  return (
    <div className="animate-in fade-in duration-1000 space-y-40 pb-40">
      {/* Intro Header */}
      <div className="text-center space-y-8">
         <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
            <Type className="w-3 h-3" /> Matter_Typography_v12.4
         </div>
         <h2 className="text-8xl font-tech font-bold uppercase text-zinc-900 dark:text-white leading-none tracking-tighter">
            Текст как <br /><span className="text-indigo-500">Материя.</span>
         </h2>
         <p className="max-w-2xl mx-auto text-xl font-light opacity-60">
            В пространственном дизайне текст — это физическое тело. Он обладает массой, преломляет свет и реагирует на движение пользователя через инерцию и спектральный дрейф.
         </p>
      </div>

      {/* 01. Glitch Phase Transition */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">01_ Glitch Phase Shift</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Деконструкция символа. Текст распадается на фазовые слои при переходе."</p>
         </div>
         <GlitchTypeVisualizer isDark={isDark} />
      </section>

      {/* 02. Viscous Fluid Type */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">02_ Viscous Fluid Dynamics</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Тягучесть смысла. Буквы связаны невидимым полем вязкости."</p>
         </div>
         <FluidTypeVisualizer isDark={isDark} />
      </section>

      {/* 03. Volumetric Weight Depth */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">03_ Volumetric Extrusion</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Топология веса. Начертание как геометрический объем."</p>
         </div>
         <VolumetricTypeVisualizer isDark={isDark} />
      </section>

      {/* 04. Spectral Kerning */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">04_ Spectral Interaction</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Спектральное отталкивание. Текст раздвигается под давлением внимания."</p>
         </div>
         <SpectralKerningVisualizer isDark={isDark} />
      </section>

      {/* 05. Fluid Scaling Architecture */}
      <section className="space-y-24">
         <div className="space-y-6 max-w-xl">
            <h3 className="text-4xl font-tech font-bold text-zinc-900 dark:text-white uppercase">05_ Fluid Scaling Logic</h3>
            <p className="text-lg font-light text-zinc-500 italic">"Математика адаптивности. Автоматический расчет кегля на основе вьюпорта и золотого сечения."</p>
         </div>
         <FluidScalingVisualizer isDark={isDark} />
      </section>
    </div>
  );
};

const GlitchTypeVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [isHovered, setIsHovered] = useState(false);
  const [glitch, setGlitch] = useState(0);

  useEffect(() => {
    if (isHovered) {
      const interval = setInterval(() => {
        setGlitch(Math.random());
        if (Math.random() > 0.8) playUISound('click');
      }, 60);
      return () => clearInterval(interval);
    } else {
      setGlitch(0);
    }
  }, [isHovered]);

  return (
    <div 
      onMouseEnter={() => { setIsHovered(true); playUISound('process'); }}
      onMouseLeave={() => setIsHovered(false)}
      className={`relative h-[500px] rounded-[64px] border flex items-center justify-center overflow-hidden transition-all duration-1000 group
        ${isDark ? 'bg-zinc-950 border-white/5' : 'bg-white border-black/5 shadow-2xl'}
      `}
    >
       {/* Diagnostic HUD Scanline */}
       <div className={`absolute inset-0 z-50 pointer-events-none overflow-hidden transition-opacity duration-500 ${isHovered ? 'opacity-100' : 'opacity-0'}`}>
          <div className="w-full h-[2px] bg-rose-500/30 shadow-[0_0_20px_#f43f5e] animate-[scan_2s_linear_infinite]" />
       </div>

       <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '40px 40px' }} />
       
       <div className="relative text-center select-none cursor-crosshair">
          <h4 
            className="text-8xl md:text-[140px] font-tech font-black uppercase tracking-tighter leading-none transition-all duration-500"
            style={{ 
              color: isHovered ? 'transparent' : (isDark ? '#fff' : '#000'),
              WebkitTextStroke: isHovered ? (isDark ? '1px rgba(255,255,255,0.1)' : '1px rgba(0,0,0,0.05)') : 'none'
            }}
          >
            GLITCH
          </h4>
          
          {isHovered && (
            <div className="absolute inset-0 flex items-center justify-center">
              <h4 className="absolute text-8xl md:text-[140px] font-tech font-black uppercase tracking-tighter text-rose-500 mix-blend-screen opacity-60 transition-transform duration-75"
                  style={{ transform: `translate(${glitch * 30}px, ${glitch * -15}px)` }}>GLITCH</h4>
              <h4 className="absolute text-8xl md:text-[140px] font-tech font-black uppercase tracking-tighter text-sky-500 mix-blend-screen opacity-60 transition-transform duration-75"
                  style={{ transform: `translate(${glitch * -30}px, ${glitch * 15}px)` }}>GLITCH</h4>
            </div>
          )}
       </div>

       <div className="absolute top-12 right-12 flex items-center gap-3">
          <div className={`w-2 h-2 rounded-full ${isHovered ? 'bg-rose-500 animate-ping' : 'bg-zinc-800'}`} />
          <span className="text-[10px] font-mono text-zinc-500 uppercase font-black">Entropy_Lost: {isHovered ? glitch.toFixed(4) : '0.0000'}</span>
       </div>

       <style>{`
          @keyframes scan { 0% { top: -10%; } 100% { top: 110%; } }
       `}</style>
    </div>
  );
};

const FluidTypeVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const [viscosity, setViscosity] = useState(0.4);
  const letters = "FLUID".split("");

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!containerRef.current) return;
    const rect = containerRef.current.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width - 0.5;
    const y = (e.clientY - rect.top) / rect.height - 0.5;
    
    containerRef.current.style.setProperty('--mx', x.toString());
    containerRef.current.style.setProperty('--my', y.toString());
  };

  return (
    <div 
      ref={containerRef}
      onMouseMove={handleMouseMove}
      onMouseEnter={() => playUISound('hover')}
      className={`relative h-[600px] rounded-[64px] border flex flex-col lg:flex-row transition-all duration-1000 overflow-hidden
        ${isDark ? 'bg-[#050508] border-white/5' : 'bg-zinc-50 border-black/5 shadow-2xl'}
        [--mx:0] [--my:0]
      `}
    >
       <div className="w-full lg:w-80 border-r border-white/5 p-12 space-y-10 bg-panel/30 backdrop-blur-xl z-20">
          <div className="space-y-4">
             <div className="flex items-center gap-3 text-indigo-500">
                <Sliders className="w-4 h-4" />
                <span className="text-[10px] font-mono uppercase tracking-[0.4em] font-black">Viscosity_Control</span>
             </div>
             <div className="space-y-4">
                <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase font-bold">
                   <span>Натяжение</span>
                   <span className="text-indigo-500">{(viscosity * 100).toFixed(0)}%</span>
                </div>
                <input type="range" min="0.1" max="0.9" step="0.01" value={viscosity} onChange={e => { setViscosity(parseFloat(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-indigo-500" />
             </div>
          </div>
          <div className="pt-8 border-t border-white/5 space-y-4">
             <div className="flex items-center gap-2 text-indigo-400">
                <BarChart className="w-3 h-3" />
                <span className="text-[8px] font-mono uppercase font-black">Surface_Stress</span>
             </div>
             <div className="text-xl font-tech font-bold text-text-main">{(1.5 - viscosity).toFixed(3)}_PA</div>
          </div>
       </div>

       <div className="flex-1 relative flex items-center justify-center bg-black overflow-hidden group">
          <svg className="absolute w-0 h-0">
            <filter id="gooey-type-lux">
               <feGaussianBlur in="SourceGraphic" stdDeviation={12 * viscosity} result="blur" />
               <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 25 -12" result="goo" />
               <feComposite in="SourceGraphic" in2="goo" operator="atop" />
            </filter>
          </svg>

          <div className="flex gap-4 items-center justify-center select-none pointer-events-none" style={{ filter: 'url(#gooey-type-lux)' }}>
            {letters.map((char, i) => (
              <div 
                key={i}
                className="text-8xl md:text-[160px] font-tech font-black text-indigo-500 transition-transform duration-1000 ease-out will-change-transform"
                style={{ 
                  transform: `translate(calc(var(--mx) * ${100 + i * 40}px), calc(var(--my) * ${100 + i * 40}px)) scaleX(calc(1 + abs(var(--mx)) * 0.5))`
                }}
              >
                {char}
              </div>
            ))}
          </div>

          <div className="absolute bottom-12 right-12 text-right opacity-20 group-hover:opacity-100 transition-opacity">
             <div className="text-[10px] font-mono text-indigo-500 uppercase tracking-widest font-black">Viscosity_Buffer_Active</div>
             <div className="text-[8px] font-mono text-zinc-700 uppercase tracking-widest">Force_Multiplier: {(1 + viscosity).toFixed(2)}x</div>
          </div>
       </div>
    </div>
  );
};

const VolumetricTypeVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [weight, setWeight] = useState(400);
  const [depth, setDepth] = useState(24);
  const [lightPos, setLightPos] = useState({ x: 50, y: 50 });

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    setLightPos({
      x: ((e.clientX - rect.left) / rect.width) * 100,
      y: ((e.clientY - rect.top) / rect.height) * 100
    });
  };

  return (
    <div className={`relative h-[650px] rounded-[64px] border flex flex-col lg:flex-row overflow-hidden transition-all duration-1000
      ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-white border-black/5'}
    `}>
       <div className="w-full lg:w-80 border-r border-black/5 dark:border-white/5 p-12 space-y-12 bg-panel/30 backdrop-blur-xl">
          <div className="space-y-4">
             <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase font-black tracking-widest">
                <span>Weight</span>
                <span className="text-indigo-500">{weight}</span>
             </div>
             <input type="range" min="100" max="900" step="10" value={weight} onChange={e => { setWeight(parseInt(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-indigo-500" />
          </div>
          <div className="space-y-4">
             <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase font-black tracking-widest">
                <span>Z_Extrusion</span>
                <span className="text-indigo-500">{depth}PX</span>
             </div>
             <input type="range" min="0" max="60" step="1" value={depth} onChange={e => { setDepth(parseInt(e.target.value)); playUISound('click'); }} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none cursor-pointer accent-indigo-500" />
          </div>
          <div className="pt-10 border-t border-black/5 dark:border-white/10">
             <div className="flex items-center gap-3 text-emerald-500 mb-4">
                <Gauge className="w-4 h-4 animate-pulse" />
                <span className="text-[9px] font-bold uppercase tracking-widest">Mapping_Stable</span>
             </div>
             <div className="text-2xl font-tech font-bold text-text-main uppercase tracking-widest">0xSTABLE_3D</div>
          </div>
       </div>

       <div 
         onMouseMove={handleMouseMove}
         className="flex-1 relative overflow-hidden flex items-center justify-center p-12 bg-[#020202] group cursor-none"
       >
          <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: 'radial-gradient(#fff 1px, transparent 1px)', backgroundSize: '40px 40px' }} />
          
          {/* Light source hint */}
          <div 
            className="absolute w-64 h-64 bg-indigo-500/10 rounded-full blur-[100px] transition-transform duration-300"
            style={{ left: `${lightPos.x}%`, top: `${lightPos.y}%`, transform: 'translate(-50%, -50%)' }}
          />

          <div className="relative perspective-2000 preserve-3d transition-transform duration-1000 group-hover:rotate-X-12">
             <h4 
               className="text-[120px] md:text-[180px] font-tech font-bold text-white uppercase leading-none tracking-tighter select-none transition-all duration-300"
               style={{ 
                 fontWeight: weight,
                 textShadow: Array.from({length: depth}).map((_, i) => (
                   `${(lightPos.x - 50) * 0.05 * i}px ${(lightPos.y - 50) * 0.05 * i}px 0px rgba(99, 102, 241, ${0.4 - i/depth})`
                 )).join(', ')
               }}
             >
                HEAVY
             </h4>
          </div>

          <div className="absolute bottom-12 right-12 text-right">
             <div className="text-[10px] font-mono text-zinc-700 uppercase tracking-widest font-black">Shadow_Raycast: ENABLED</div>
          </div>
       </div>
    </div>
  );
};

const SpectralKerningVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const containerRef = useRef<HTMLDivElement>(null);
  const text = "KERNING";
  const letters = text.split("");

  const handleMouseMove = (e: React.MouseEvent) => {
    if (!containerRef.current) return;
    const rect = containerRef.current.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width;
    const y = (e.clientY - rect.top) / rect.height;
    
    containerRef.current.style.setProperty('--mx', x.toString());
    containerRef.current.style.setProperty('--my', y.toString());
  };

  const handleMouseLeave = () => {
    if (!containerRef.current) return;
    containerRef.current.style.setProperty('--mx', '0.5');
    containerRef.current.style.setProperty('--my', '0.5');
  };

  return (
    <div 
      ref={containerRef}
      onMouseMove={handleMouseMove}
      onMouseLeave={handleMouseLeave}
      className={`relative h-[550px] rounded-[64px] border flex items-center justify-center overflow-hidden transition-all duration-1000 group/kern
        ${isDark ? 'bg-zinc-950 border-white/5 shadow-2xl' : 'bg-white border-black/5'}
        [--mx:0.5] [--my:0.5]
      `}
    >
       <div className="absolute inset-0 bg-gradient-to-tr from-indigo-500/5 via-transparent to-rose-500/5 opacity-50" />

       <div className="flex items-center justify-center gap-0 group/text select-none cursor-none z-10">
          {letters.map((char, i) => {
            const charPos = (i / (letters.length - 1));
            return (
              <div 
                key={i}
                className="text-7xl md:text-9xl font-tech font-black transition-all duration-500 ease-out will-change-transform"
                style={{ 
                  margin: `0 calc(max(0, 1.2 - abs(var(--mx) - ${charPos}) * 3.5) * 65px)`,
                  color: `color-mix(in srgb, #6366f1 calc(max(0, 1 - abs(var(--mx) - ${charPos}) * 3) * 100%), ${isDark ? '#fff' : '#000'})`,
                  transform: `translateY(calc(max(0, 1 - abs(var(--mx) - ${charPos}) * 3) * -40px)) scale(calc(1 + max(0, 1 - abs(var(--mx) - ${charPos}) * 3) * 0.15))`,
                }}
              >
                {char}
              </div>
            );
          })}
       </div>

       {/* Floating HUD Cursor */}
       <div 
         className="absolute w-24 h-24 border border-indigo-500/30 rounded-full flex items-center justify-center pointer-events-none transition-transform duration-75"
         style={{ left: `calc(var(--mx) * 100%)`, top: `calc(var(--my) * 100%)`, transform: 'translate(-50%, -50%)' }}
       >
          <div className="w-1.5 h-1.5 bg-indigo-500 rounded-full animate-ping shadow-[0_0_15px_#6366f1]" />
          <div className="absolute inset-0 border-2 border-dashed border-indigo-500/10 rounded-full animate-spin-slow" />
       </div>

       <div className="absolute bottom-12 left-12 flex items-center gap-4 text-zinc-500 opacity-40 group-hover/kern:opacity-100 transition-opacity">
          <Compass className="w-4 h-4 animate-spin-slow" />
          <span className="text-[10px] font-mono uppercase tracking-widest font-black">Spectral_Repulsion_Active</span>
       </div>
    </div>
  );
};

const FluidScalingVisualizer: React.FC<{ isDark: boolean }> = ({ isDark }) => {
  const [viewportWidth, setViewportWidth] = useState(1440);
  const [ratio, setRatio] = useState(1.618); 
  const baseSize = 16;
  const minVW = 320;
  const maxVW = 1920;

  const calculateSize = (base: number, multiplier: number) => {
    const minSize = base * multiplier;
    const maxSize = base * multiplier * 1.5;
    const preferred = minSize + (maxSize - minSize) * ((viewportWidth - minVW) / (maxVW - minVW));
    return Math.min(Math.max(minSize, preferred), maxSize);
  };

  const hierarchy = [
    { label: 'H1_Display', multiplier: Math.pow(ratio, 3) },
    { label: 'H2_Headline', multiplier: Math.pow(ratio, 2) },
    { label: 'H3_Subhead', multiplier: ratio },
    { label: 'Body_Main', multiplier: 1 }
  ];

  return (
    <div className={`relative min-h-[700px] rounded-[64px] border overflow-hidden flex flex-col lg:flex-row transition-all duration-1000
      ${isDark ? 'bg-[#020204] border-white/5 shadow-2xl' : 'bg-zinc-50 border-black/5'}
    `}>
       <div className="w-full lg:w-96 border-r border-white/5 p-10 flex flex-col gap-8 bg-panel/30 backdrop-blur-xl shrink-0">
          <div className="space-y-2">
             <div className="flex items-center gap-3 text-indigo-500">
                <Scale className="w-4 h-4" />
                <span className="text-[10px] font-mono uppercase tracking-[0.4em] font-black">Ratio_Architect</span>
             </div>
             <h4 className="text-2xl font-tech font-bold text-text-main uppercase">Масштаб</h4>
          </div>

          <div className="space-y-8">
             <div className="space-y-4">
                <div className="flex justify-between text-[10px] font-mono text-zinc-500 uppercase font-bold">
                   <span>Viewport</span>
                   <span className="text-indigo-500">{viewportWidth}px</span>
                </div>
                <div className="flex gap-1">
                   {[
                     { icon: Smartphone, w: 375 },
                     { icon: Tablet, w: 768 },
                     { icon: Monitor, w: 1440 }
                   ].map(d => (
                     <button key={d.w} onClick={() => { setViewportWidth(d.w); playUISound('click'); }} className={`flex-1 py-3 rounded-xl transition-all ${viewportWidth === d.w ? 'bg-indigo-600 text-white shadow-lg' : 'bg-white/5 text-zinc-500 hover:bg-white/10'}`}>
                        <d.icon className="w-4 h-4 mx-auto" />
                     </button>
                   ))}
                </div>
                <input type="range" min={minVW} max={maxVW} value={viewportWidth} onChange={e => setViewportWidth(parseInt(e.target.value))} className="w-full h-1 bg-black/10 dark:bg-white/10 rounded-full appearance-none accent-indigo-500" />
             </div>

             <div className="space-y-4">
                <div className="text-[10px] font-mono text-zinc-500 uppercase font-bold">Harmony_Interval</div>
                <div className="grid grid-cols-2 gap-2">
                   {[
                     { name: 'Golden', val: 1.618 },
                     { name: 'Perfect 5th', val: 1.500 },
                     { name: 'Major 3rd', val: 1.250 },
                     { name: 'Minor 3rd', val: 1.200 }
                   ].map(r => (
                     <button 
                       key={r.name} 
                       onClick={() => { setRatio(r.val); playUISound('click'); }}
                       className={`px-3 py-3 rounded-xl text-[8px] font-black uppercase transition-all border ${ratio === r.val ? 'bg-indigo-600 border-indigo-400 text-white' : 'bg-white/5 border-white/5 text-zinc-500 hover:bg-white/10'}`}
                     >
                       {r.name}
                     </button>
                   ))}
                </div>
             </div>
          </div>

          <div className="mt-auto p-6 bg-black/40 rounded-3xl font-mono text-[9px] text-indigo-400/60 space-y-1 border border-white/5">
             <p className="flex justify-between"><span>Ratio_Bias:</span> <span>{ratio.toFixed(3)}</span></p>
             <p className="flex justify-between"><span>Scaling_LOD:</span> <span>STABLE</span></p>
          </div>
       </div>

       <div className="flex-1 relative overflow-hidden flex items-center justify-center p-12 bg-black">
          {/* Fibonacci spiral visual hint */}
          <div className="absolute inset-0 opacity-[0.02] pointer-events-none flex items-center justify-center">
             <div className="w-[800px] h-[800px] border border-white rounded-full animate-spin-slow" />
          </div>
          
          <div 
            className="bg-zinc-900/40 border border-white/10 rounded-[48px] p-12 transition-all duration-1000 ease-out shadow-2xl relative overflow-hidden flex flex-col justify-center"
            style={{ width: `${Math.max(320, (viewportWidth / maxVW) * 100)}%`, maxWidth: '900px' }}
          >
             <div className="space-y-10 relative z-10">
                {hierarchy.map((item, i) => {
                  const size = calculateSize(baseSize, item.multiplier);
                  return (
                    <div key={i} className="group/item">
                       <div className="flex items-baseline gap-4 mb-2 opacity-0 group-hover/item:opacity-40 transition-opacity">
                          <span className="text-[8px] font-mono text-indigo-400 uppercase tracking-widest">{item.label}</span>
                          <span className="text-[8px] font-mono text-zinc-500">{size.toFixed(1)}PX</span>
                       </div>
                       <h4 
                         className="font-tech font-bold text-white uppercase tracking-tighter leading-none transition-all duration-700"
                         style={{ fontSize: `${size}px` }}
                       >
                         {item.label.split('_')[0]} Matter
                       </h4>
                    </div>
                  );
                })}
             </div>
             <div className="absolute inset-0 pointer-events-none border-x border-white/[0.03]" />
          </div>
       </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/VinylCore.tsx
название файла: wooden/components/VinylCore.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useEffect } from 'react';
import { Disc, Activity } from 'lucide-react';

interface Props {
  theme: 'dark' | 'light';
}

export const VinylCore: React.FC<Props> = ({ theme }) => {
  const [rotation, setRotation] = useState(0);
  const [tilt, setTilt] = useState({ x: 0, y: 0 });
  const isDark = theme === 'dark';

  useEffect(() => {
    const timer = setInterval(() => setRotation(prev => prev + 0.5), 20);
    return () => clearInterval(timer);
  }, []);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width - 0.5;
    const y = (e.clientY - rect.top) / rect.height - 0.5;
    setTilt({ x: y * 30, y: x * -30 });
  };

  return (
    <div 
      onMouseMove={handleMouseMove}
      className="relative w-[450px] h-[450px] flex items-center justify-center perspective-2000 group"
    >
       <div 
         className="relative w-full h-full transition-transform duration-500 ease-out preserve-3d"
         style={{ transform: `rotateX(${10 + tilt.x}deg) rotateY(${tilt.y}deg)` }}
       >
          {/* Main Disc - Ультра-минималистичный стиль */}
          <div 
            className={`absolute inset-4 rounded-full border transition-all duration-1000 ${isDark ? 'border-white/10' : 'border-black/5'}`}
            style={{ 
              background: isDark 
                ? `conic-gradient(from ${rotation}deg, #0a0a0a, #1a1a1a, #0a0a0a)`
                : `conic-gradient(from ${rotation}deg, #fdfdfd, #ececec, #fdfdfd)`,
              boxShadow: isDark 
                ? 'inset 0 0 80px rgba(0,0,0,0.5), 0 30px 60px rgba(0,0,0,0.4)'
                : 'inset 0 0 40px rgba(0,0,0,0.05), 0 20px 40px rgba(0,0,0,0.1)'
            }}
          >
             {/* Subtle Grooves */}
             <div className="absolute inset-12 rounded-full border border-current opacity-[0.03]" />
             <div className="absolute inset-24 rounded-full border border-current opacity-[0.03]" />

             {/* Minimal Center Label */}
             <div className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full flex flex-col items-center justify-center border transition-all duration-700 group-hover:scale-110
               ${isDark ? 'bg-zinc-900 border-white/10 text-white' : 'bg-white border-black/10 text-black shadow-xl'}
             `}>
                <Disc className="w-10 h-10 opacity-40" />
                <div className="mt-4 text-[7px] font-mono opacity-40 uppercase tracking-[0.4em]">Node_Core</div>
             </div>
          </div>

          {/* Floating HUD Ring */}
          <div 
            className={`absolute inset-0 border border-current rounded-full opacity-[0.05] animate-pulse`} 
            style={{ transform: 'translateZ(60px) scale(1.05)' }}
          />
       </div>

       {/* HUD Labels */}
       <div className="absolute bottom-4 left-4 flex items-center gap-3 opacity-20">
          <Activity className="w-3 h-3 text-amber-500" />
          <span className="text-[8px] font-mono uppercase tracking-widest font-black">Sync: 33.3_RPM</span>
       </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/components/WoodLattice.tsx
название файла: wooden/components/WoodLattice.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React from 'react';

interface Props {
  mousePos: { x: number; y: number };
  theme: 'dark' | 'light';
}

export const WoodLattice: React.FC<Props> = ({ mousePos, theme }) => {
  const isDark = theme === 'dark';
  
  return (
    <div className={`fixed inset-0 pointer-events-none z-0 overflow-hidden transition-opacity duration-1000 ${isDark ? 'opacity-10' : 'opacity-5'}`}>
      <svg className="w-full h-full">
        <defs>
          <radialGradient id="woodGlow" cx="50%" cy="50%" r="50%">
            <stop offset="0%" stopColor={isDark ? "#ffffff" : "#000000"} stopOpacity="0.1" />
            <stop offset="100%" stopColor="transparent" />
          </radialGradient>
        </defs>
        
        {Array.from({ length: 40 }).map((_, i) => {
          const x = (i / 39) * 100;
          const dist = Math.abs(mousePos.x - (x * window.innerWidth) / 100);
          const pull = Math.max(0, 1 - dist / 600);
          
          return (
            <path 
              key={`fiber-${i}`}
              d={`M ${x}% 0 L ${x + (mousePos.x / window.innerWidth - x/100)*pull*2}% 100%`}
              fill="none"
              stroke={isDark ? "#ffffff" : "#000000"}
              strokeWidth="0.3"
              opacity={0.1 + pull * 0.2}
            />
          );
        })}

        <circle 
          cx={mousePos.x} 
          cy={mousePos.y} 
          r="600" 
          fill="url(#woodGlow)" 
        />
      </svg>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/library/PrimitivesLibrary.tsx
название файла: wooden/library/PrimitivesLibrary.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useRef, useEffect } from 'react';
import { 
  Zap, Target, Activity, Sliders, Box, Layers, 
  Cpu, Shield, Radio, Search, Bell, User,
  CheckCircle2, AlertTriangle, Fingerprint,
  RefreshCw, Layout, Smartphone, Monitor,
  Compass, Command, Share2, MoreHorizontal,
  Mail, Play, Pause, ChevronRight, X, Check, Atom,
  Volume2, Disc, Navigation, List, Hash, 
  Eye, Thermometer, Battery, Signal, Wifi,
  Move, RotateCcw, RotateCw, Map
} from 'lucide-react';
import { LanguageContext } from '../App';
import { playUISound } from '../components/AudioService';

const GlassPrimitive: React.FC<{ children: React.ReactNode; className?: string; mass?: number }> = ({ children, className = "", mass = 1 }) => {
  const [tilt, setTilt] = useState({ x: 0, y: 0 });
  const [isPressed, setIsPressed] = useState(false);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const x = ((e.clientX - rect.left) / rect.width - 0.5) * (15 / mass);
    const y = ((e.clientY - rect.top) / rect.height - 0.5) * (-15 / mass);
    setTilt({ x: y, y: x });
  };

  return (
    <div 
      onMouseMove={handleMouseMove}
      onMouseEnter={() => playUISound('hover')}
      onMouseLeave={() => setTilt({ x: 0, y: 0 })}
      onMouseDown={() => { setIsPressed(true); playUISound('click'); }}
      onMouseUp={() => setIsPressed(false)}
      className={`relative transition-all duration-500 ease-out preserve-3d cursor-pointer ${className}`}
      style={{ 
        transform: `rotateX(${tilt.x}deg) rotateY(${tilt.y}deg) ${isPressed ? 'scale(0.97) translateZ(-10px)' : 'scale(1) translateZ(0)'}`,
      }}
    >
       <div className="absolute inset-0 bg-white/5 border border-white/10 rounded-[inherit] backdrop-blur-2xl shadow-2xl" />
       <div className="relative z-10 w-full h-full flex items-center justify-center">
          {children}
       </div>
       <div className="absolute inset-0 border-t border-l border-white/20 rounded-[inherit] pointer-events-none opacity-40" />
    </div>
  );
};

export const PrimitivesLibrary: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const isDark = theme === 'dark';

  // State for analog primitives
  const [knobRot, setKnobRot] = useState(45);
  const [xyPos, setXyPos] = useState({ x: 50, y: 50 });
  const [verticalFader, setVerticalFader] = useState(60);

  return (
    <div className="space-y-48 animate-in fade-in duration-1000 pb-40">
      {/* 1. HERO SECTION */}
      <div className="flex flex-col lg:flex-row justify-between items-end gap-12 px-4">
        <div className="space-y-6">
           <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
              <Layers className="w-3 h-3" /> {t.library.tag}
           </div>
           <h2 className="text-[100px] md:text-[120px] font-tech font-bold text-zinc-900 dark:text-white uppercase leading-[0.8] tracking-tighter">
              {t.library.title} <br /><span className="text-indigo-500">{t.library.titleAccent}</span>
           </h2>
           <p className="text-xl font-light text-zinc-500 dark:text-zinc-400 max-w-xl leading-relaxed">
              {t.library.desc}
           </p>
        </div>

        <div className="p-10 bg-zinc-900/40 rounded-[56px] border border-white/5 flex items-center gap-12 shadow-2xl backdrop-blur-3xl">
           <div className="space-y-1">
              <div className="text-[9px] font-mono text-zinc-500 uppercase font-black">Registry_Sync</div>
              <div className="text-3xl font-tech font-bold text-emerald-500 tracking-widest">STABLE_V1.4</div>
           </div>
           <div className="w-px h-16 bg-white/5" />
           <Cpu className="w-12 h-12 text-indigo-500 animate-pulse" />
        </div>
      </div>

      {/* 2. CATEGORY: STATUS EMITTERS */}
      <section className="space-y-16">
         <div className="flex items-center justify-between px-4 border-b border-white/5 pb-8">
            <div className="flex items-center gap-4">
               <Radio className="w-8 h-8 text-emerald-500" />
               <h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">{t.library.categories.status}</h3>
            </div>
            <span className="text-[10px] font-mono text-zinc-600 uppercase tracking-widest">Emitter_Group_0x08</span>
         </div>

         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <GlassPrimitive className="h-40 rounded-[32px]">
               <div className="flex flex-col items-center gap-4">
                  <div className="w-4 h-4 bg-emerald-500 rounded-full animate-ping" />
                  <span className="text-[10px] font-mono text-emerald-500 uppercase font-black">Pulse_Beacon</span>
               </div>
            </GlassPrimitive>

            <GlassPrimitive className="h-40 rounded-[32px]">
               <div className="relative w-24 h-24">
                  <svg className="w-full h-full -rotate-90">
                     <circle cx="50%" cy="50%" r="40%" fill="none" stroke="rgba(16,185,129,0.1)" strokeWidth="6" />
                     <circle cx="50%" cy="50%" r="40%" fill="none" stroke="#10b981" strokeWidth="6" strokeDasharray="100" strokeDashoffset="25" className="animate-pulse" />
                  </svg>
                  <div className="absolute inset-0 flex items-center justify-center text-[10px] font-tech font-black text-white">75%</div>
               </div>
            </GlassPrimitive>

            <GlassPrimitive className="h-40 rounded-[32px]">
               <div className="flex flex-col items-center gap-6">
                  <div className="flex gap-1.5">
                     {[1,2,3,4,5].map(i => <div key={i} className={`w-1.5 h-6 rounded-full ${i < 4 ? 'bg-amber-500' : 'bg-white/10'}`} />)}
                  </div>
                  <span className="text-[9px] font-mono text-zinc-500 uppercase tracking-widest">Battery_Lvl</span>
               </div>
            </GlassPrimitive>

            <GlassPrimitive className="h-40 rounded-[32px]">
               <div className="flex flex-col items-center gap-4">
                  <Signal className="w-8 h-8 text-sky-500 animate-pulse" />
                  <div className="text-[8px] font-mono text-zinc-500 uppercase">Uplink: AMS_NORTH</div>
               </div>
            </GlassPrimitive>
         </div>
      </section>

      {/* 3. CATEGORY: ANALOG SURFACES */}
      <section className="space-y-16">
         <div className="flex items-center justify-between px-4 border-b border-white/5 pb-8">
            <div className="flex items-center gap-4">
               <Sliders className="w-8 h-8 text-amber-500" />
               <h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">{t.library.categories.analog}</h3>
            </div>
         </div>

         <div className="grid grid-cols-1 lg:grid-cols-12 gap-8">
            {/* XY Pad */}
            <div className="lg:col-span-5 h-[400px] bg-black/40 border border-white/10 rounded-[56px] relative overflow-hidden group cursor-crosshair shadow-2xl"
                 onMouseMove={(e) => {
                    const rect = e.currentTarget.getBoundingClientRect();
                    setXyPos({
                       x: ((e.clientX - rect.left) / rect.width) * 100,
                       y: ((e.clientY - rect.top) / rect.height) * 100
                    });
                 }}>
               <div className="absolute inset-0 opacity-10" style={{ backgroundImage: 'linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)', backgroundSize: '40px 40px' }} />
               <div className="absolute top-8 left-10 text-[10px] font-mono text-zinc-600 uppercase tracking-widest font-black">X-Y_Control_Surface</div>
               
               <div className="absolute transition-all duration-75 pointer-events-none" style={{ left: `${xyPos.x}%`, top: `${xyPos.y}%`, transform: 'translate(-50%, -50%)' }}>
                  <div className="w-12 h-12 border border-amber-500/50 rounded-full flex items-center justify-center backdrop-blur-xl">
                     <div className="w-2 h-2 bg-amber-500 rounded-full shadow-[0_0_20px_#f59e0b]" />
                  </div>
                  <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-[1px] bg-amber-500/10 -z-10" />
                  <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[1px] h-48 bg-amber-500/10 -z-10" />
               </div>
               
               <div className="absolute bottom-8 right-10 text-right font-mono text-[9px] text-zinc-500">
                  X: {xyPos.x.toFixed(2)}% | Y: {xyPos.y.toFixed(2)}%
               </div>
            </div>

            {/* Knob & Fader */}
            <div className="lg:col-span-7 grid grid-cols-2 gap-8">
               <div className="bg-white/5 border border-white/10 rounded-[56px] flex flex-col items-center justify-center gap-10 shadow-2xl group relative overflow-hidden">
                  <div className="text-[9px] font-mono text-zinc-600 uppercase tracking-[0.5em] mb-4">Rotary_Encoder</div>
                  <div 
                    className="w-32 h-32 rounded-full bg-zinc-900 border-4 border-zinc-800 shadow-2xl cursor-ns-resize relative flex items-center justify-center transition-transform active:scale-95"
                    style={{ transform: `rotate(${knobRot}deg)` }}
                    onMouseMove={(e) => e.buttons === 1 && setKnobRot(prev => prev + e.movementX)}
                  >
                     <div className="absolute top-4 w-1.5 h-4 bg-indigo-500 rounded-full shadow-[0_0_15px_#6366f1]" />
                     <RotateCw className="w-10 h-10 text-zinc-800" />
                  </div>
                  <div className="text-3xl font-tech font-bold text-white uppercase">{knobRot.toFixed(0)}°</div>
               </div>

               <div className="bg-white/5 border border-white/10 rounded-[56px] flex items-center justify-center gap-12 p-12">
                  <div className="relative h-full w-2 bg-zinc-900 rounded-full overflow-hidden border border-white/5">
                     <div 
                        className="absolute bottom-0 w-full bg-indigo-500 shadow-[0_0_20px_#6366f1] transition-all"
                        style={{ height: `${verticalFader}%` }}
                     />
                     <input 
                        type="range" min="0" max="100" value={verticalFader}
                        onChange={e => setVerticalFader(parseInt(e.target.value))}
                        className="absolute inset-0 opacity-0 cursor-ns-resize"
                        style={{ writingMode: 'bt-lr' as any }}
                     />
                  </div>
                  <div className="flex flex-col gap-6 text-center">
                     <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">Master_Gain</div>
                     <div className="text-5xl font-tech font-bold text-white uppercase">{verticalFader}%</div>
                     <Volume2 className="w-8 h-8 text-indigo-500 mx-auto animate-pulse" />
                  </div>
               </div>
            </div>
         </div>
      </section>

      {/* 4. CATEGORY: NAVIGATION ANCHORS */}
      <section className="space-y-16">
         <div className="flex items-center justify-between px-4 border-b border-white/5 pb-8">
            <div className="flex items-center gap-4">
               <Navigation className="w-8 h-8 text-sky-500" />
               <h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">{t.library.categories.navigation}</h3>
            </div>
         </div>

         <div className="space-y-12">
            {/* Spatial Tabs */}
            <div className="p-4 bg-zinc-900 rounded-[32px] border border-white/5 flex gap-4 max-w-2xl mx-auto shadow-2xl">
               {['DASHBOARD', 'MATTER_CALIB', 'SPECTRAL_SCAN', 'KINETIC_LOG'].map((label, i) => (
                 <button 
                    key={label}
                    onClick={() => playUISound('click')}
                    className={`flex-1 py-4 rounded-2xl text-[9px] font-black uppercase tracking-widest transition-all duration-500 relative overflow-hidden group
                      ${i === 1 ? 'bg-white text-black shadow-[0_20px_40px_rgba(0,0,0,0.5)] translate-y-[-10px] z-10' : 'text-zinc-600 hover:text-white hover:bg-white/5'}
                    `}
                 >
                    {label}
                    {i === 1 && <div className="absolute bottom-0 left-0 w-full h-1 bg-indigo-600" />}
                 </button>
               ))}
            </div>

            {/* Path Breadcrumb */}
            <div className="flex items-center gap-6 px-12 py-8 bg-black/40 border border-white/5 rounded-full max-w-4xl mx-auto overflow-hidden group">
               <div className="flex items-center gap-4">
                  <Map className="w-4 h-4 text-sky-500" />
                  <span className="text-[10px] font-mono text-zinc-500 uppercase font-black">Path:</span>
               </div>
               <div className="flex items-center gap-8 overflow-x-auto no-scrollbar">
                  {['Root', 'Architect', 'Genesis_v4', 'Active_Node_0x88'].map((crumb, i, arr) => (
                    <div key={crumb} className="flex items-center gap-8 shrink-0 animate-in slide-in-from-left-4" style={{ animationDelay: `${i * 150}ms` }}>
                       <span className={`text-[10px] font-tech font-bold uppercase tracking-widest transition-colors ${i === arr.length - 1 ? 'text-white' : 'text-zinc-700 hover:text-sky-400 cursor-pointer'}`}>{crumb}</span>
                       {i < arr.length - 1 && <ChevronRight className="w-3 h-3 text-zinc-800" />}
                    </div>
                  ))}
               </div>
            </div>
         </div>
      </section>

      {/* 5. CATEGORY: ACTION UNITS (Existing, enriched) */}
      <section className="space-y-16">
         <div className="flex items-center gap-4 px-4 border-b border-white/5 pb-8">
            <Zap className="w-8 h-8 text-amber-500" />
            <h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">{t.library.categories.actions}</h3>
         </div>

         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <GlassPrimitive className="h-32 rounded-[24px]" mass={0.5}>
               <span className="font-tech font-bold text-white uppercase tracking-[0.4em]">Primary_Unit</span>
            </GlassPrimitive>
            
            <div className="relative group cursor-pointer">
               <div className="absolute inset-0 bg-indigo-600 rounded-[24px] blur-xl opacity-0 group-hover:opacity-20 transition-opacity" />
               <button className="relative w-full h-32 bg-indigo-600 text-white rounded-[24px] font-tech font-black uppercase tracking-widest flex items-center justify-center gap-4 overflow-hidden shadow-2xl active:scale-95 transition-all">
                  <Play className="w-5 h-5 fill-current" /> Initialize_Core
                  <div className="absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent" />
               </button>
            </div>

            <GlassPrimitive className="h-32 rounded-[24px] border-dashed" mass={1.2}>
               <div className="flex items-center gap-4 text-zinc-500 group-hover:text-white transition-colors">
                  <RefreshCw className="w-5 h-5" />
                  <span className="text-[10px] font-black uppercase tracking-widest">Refine_Matter</span>
               </div>
            </GlassPrimitive>

            <button className="h-32 bg-black/5 dark:bg-white/5 border border-black/5 dark:border-white/10 rounded-[24px] flex items-center justify-center gap-4 hover:bg-rose-500/10 hover:text-rose-500 transition-all active:scale-95">
               <X className="w-5 h-5" /> <span className="text-[10px] font-black uppercase">Terminate</span>
            </button>
         </div>
      </section>

      {/* 6. CATEGORY: DATA CHANNELS (Existing, enriched) */}
      <section className="space-y-16">
         <div className="flex items-center gap-4 px-4 border-b border-white/5 pb-8">
            <Search className="w-8 h-8 text-sky-500" />
            <h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">{t.library.categories.inputs}</h3>
         </div>

         <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div className="p-10 bg-black/20 dark:bg-black/40 rounded-[56px] border border-white/5 space-y-6 group hover:border-sky-500/30 transition-all">
               <div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">Search_Vector_Input</div>
               <div className="relative">
                  <input type="text" placeholder="Scan_Lattice..." className="w-full bg-white/5 border border-white/10 rounded-2xl p-6 text-xl font-light text-white outline-none focus:border-sky-500/50 transition-all" />
                  <div className="absolute right-6 top-1/2 -translate-y-1/2 w-10 h-10 bg-sky-600 rounded-xl flex items-center justify-center text-white shadow-xl"><Search className="w-5 h-5" /></div>
               </div>
            </div>

            <div className="p-10 bg-black/20 dark:bg-black/40 rounded-[56px] border border-white/5 flex flex-col justify-between group hover:border-indigo-500/30 transition-all">
               <div className="flex justify-between items-center text-[10px] font-mono text-zinc-500 uppercase tracking-widest">
                  <span>Numeric_Modulator</span>
                  <span className="text-indigo-400">0x88.A</span>
               </div>
               <div className="flex items-center gap-6">
                  <div className="flex-1 h-1.5 bg-white/5 rounded-full overflow-hidden">
                     <div className="h-full bg-indigo-500 animate-pulse w-3/4" />
                  </div>
                  <div className="text-2xl font-tech font-bold text-white">74.2%</div>
               </div>
            </div>
         </div>
      </section>

      {/* 7. SYSTEM FOOTER */}
      <div className="flex justify-center pt-20">
         <div className="flex items-center gap-12 text-zinc-500 opacity-20">
            <div className="flex items-center gap-4"><Compass className="w-4 h-4" /> <span className="text-[10px] font-mono uppercase tracking-[0.4em]">Navigator_Stable</span></div>
            <div className="w-1.5 h-1.5 rounded-full bg-indigo-500" />
            <div className="flex items-center gap-4"><Target className="w-4 h-4" /> <span className="text-[10px] font-mono uppercase tracking-[0.4em]">Unit_Precision: HIGH</span></div>
         </div>
      </div>
    </div>
  );
};


________________________________________________________________________________

АБСОЛЮТНЫЙ ПУТЬ: /Users/vladimirmazyrec/Documents/library/wooden/library/UnitShowcase.tsx
название файла: wooden/library/UnitShowcase.tsx

СОДЕРЖИМОЕ ФАЙЛА:
----------------------------------------

import React, { useState, useContext, useRef, useEffect } from 'react';
import { 
  Zap, Maximize2, Shield, X, AlertTriangle, 
  ChevronDown, ChevronUp, Bell, Info, 
  Settings, Sliders, Activity, MousePointer2,
  CheckCircle2, Share2, Layers, Cpu, Target, Sparkle,
  MoreVertical, Plus, Minus, Command, LayoutGrid, 
  Droplets, Waves, Box, ArrowRight, Compass,
  Check, Search, ListTodo, Layers3, Fingerprint,
  Radio, Database, Workflow, Smartphone, Monitor,
  Sun, Moon, Globe, Wind, Gauge, Disc, RefreshCw,
  Lock, Unlock, Target as TargetIcon, Magnet, 
  ArrowLeftRight, ZapOff, Fingerprint as TouchIcon,
  SearchCode, Ghost, Key,
  ChevronRight, ShieldCheck, Terminal, 
  Binary, MoveVertical, RotateCw, Orbit, 
  Eye, Scan, Dna, Flame, Heart, Atom,
  Cloud, Filter, Scissors, Diamond, Pocket,
  SunMedium, Radiation, Ghost as GhostIcon
} from 'lucide-react';
import { LanguageContext } from '../App';
import { playUISound } from '../components/AudioService';

// --- v2.9 SHARED COMPONENTS ---

const SpatialSearch: React.FC<{ isOpen: boolean; onClose: () => void }> = ({ isOpen, onClose }) => {
  if (!isOpen) return null;
  return (
    <div className="fixed inset-0 z-[1000] flex items-center justify-center p-6 animate-in fade-in duration-300">
      <div className="absolute inset-0 bg-black/60 backdrop-blur-xl" onClick={onClose} />
      <div className="relative w-full max-w-2xl bg-zinc-900/80 border border-white/10 rounded-[40px] p-8 shadow-2xl animate-in zoom-in-95 duration-300">
         <div className="flex items-center gap-4 mb-8 text-indigo-500">
            <Search className="w-6 h-6" />
            <span className="text-[10px] font-mono uppercase tracking-[0.4em] font-black">Spatial_Registry_Search</span>
         </div>
         <input 
           autoFocus
           type="text" 
           placeholder="Search_Nodes..." 
           className="w-full bg-white/5 border border-white/10 rounded-2xl p-6 text-2xl font-light text-white outline-none focus:border-indigo-500/50 transition-all"
         />
         <div className="mt-8 flex justify-between items-center text-[8px] font-mono text-zinc-500 uppercase tracking-widest">
            <span>Press ESC to exit</span>
            <span>Refraction: ACTIVE</span>
         </div>
      </div>
    </div>
  );
};

// --- v2.9 NEW: SPECULAR LUSTER CORE ---
const SpecularLusterCore: React.FC = () => {
  const [mousePos, setMousePos] = useState({ x: 500, y: 250 });
  const [shininess, setShininess] = useState(40);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    setMousePos({
      x: e.clientX - rect.left,
      y: e.clientY - rect.top
    });
  };

  return (
    <div 
      onMouseMove={handleMouseMove}
      className="w-full h-[500px] bg-[#020204] rounded-[64px] border border-white/5 relative overflow-hidden flex items-center justify-center shadow-2xl group cursor-crosshair"
    >
       <svg className="absolute w-0 h-0">
          <filter id="specular-luster">
             <feSpecularLighting surfaceScale="5" specularConstant="1.2" specularExponent={shininess} lightingColor="#fff" result="specOut">
                <fePointLight x={mousePos.x} y={mousePos.y} z="150" />
             </feSpecularLighting>
             <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0" />
          </filter>
       </svg>

       <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: 'radial-gradient(#6366f1 1.5px, transparent 1px)', backgroundSize: '40px 40px' }} />

       <div className="relative" style={{ filter: 'url(#specular-luster)' }}>
          <div className="w-80 h-80 bg-indigo-900/40 border border-indigo-500/30 rounded-[100px] flex flex-col items-center justify-center p-12 transition-all duration-700">
             <Diamond className="w-20 h-20 text-indigo-400 mb-6 drop-shadow-[0_0_20px_rgba(129,140,248,0.4)]" />
             <div className="text-center space-y-2">
                <div className="text-[10px] font-mono text-indigo-300 uppercase tracking-[0.4em] font-black">Reflective_Matter</div>
                <div className="text-3xl font-tech font-bold text-white uppercase tracking-tighter">Polished_Slab</div>
             </div>
          </div>
       </div>

       <div className="absolute bottom-12 left-12 space-y-4">
          <div className="flex items-center gap-3">
             <SunMedium className="w-4 h-4 text-amber-500 animate-pulse" />
             <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Light_Source_Z: 150u</span>
          </div>
          <div className="w-48">
             <input type="range" min="10" max="120" value={shininess} onChange={e => setShininess(parseInt(e.target.value))} className="w-full h-1 bg-white/10 rounded-full appearance-none accent-amber-500" />
          </div>
       </div>
    </div>
  );
};

// --- v2.9 NEW: QUANTIZED LOGIC FIELD ---
const QuantizedLogicField: React.FC = () => {
  const [steps, setSteps] = useState(4);

  const tableValues = Array.from({ length: steps }).map((_, i) => (i / (steps - 1)).toFixed(2)).join(' ');

  return (
    <div className="w-full h-[500px] bg-zinc-950 rounded-[64px] border border-white/5 relative overflow-hidden flex items-center justify-center shadow-2xl group">
       <svg className="absolute w-0 h-0">
          <filter id="quantize-filter">
             <feComponentTransfer>
                <feFuncR type="discrete" tableValues={tableValues} />
                <feFuncG type="discrete" tableValues={tableValues} />
                <feFuncB type="discrete" tableValues={tableValues} />
             </feComponentTransfer>
          </filter>
       </svg>

       <div className="absolute inset-0 opacity-20" style={{ 
          background: 'radial-gradient(circle at 30% 30%, #4f46e5 0%, transparent 60%), radial-gradient(circle at 70% 70%, #ec4899 0%, transparent 60%)',
          filter: 'url(#quantize-filter)' 
       }} />

       <div className="relative z-10 space-y-12 text-center" style={{ filter: 'url(#quantize-filter)' }}>
          <div className="w-32 h-32 bg-white rounded-3xl flex items-center justify-center mx-auto shadow-2xl rotate-12 group-hover:rotate-[102deg] transition-transform duration-1000">
             <Binary className="w-16 h-16 text-black" />
          </div>
          <div className="space-y-4">
             <h4 className="text-6xl font-tech font-bold text-white uppercase tracking-tighter">DISCRETE_LOGIC</h4>
             <div className="text-[10px] font-mono text-indigo-400 uppercase tracking-[0.6em] font-black">Bit_Depth_Reduction: {steps} Levels</div>
          </div>
       </div>

       <div className="absolute top-12 right-12 flex flex-col items-end gap-6">
          <button onClick={() => setSteps(Math.max(2, steps - 1))} className="p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-indigo-600 transition-colors"><Minus className="w-4 h-4 text-white" /></button>
          <button onClick={() => setSteps(Math.min(10, steps + 1))} className="p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-indigo-600 transition-colors"><Plus className="w-4 h-4 text-white" /></button>
       </div>
    </div>
  );
};

// --- v2.9 NEW: SPECTRAL SHADOW STACK ---
const SpectralShadowStack: React.FC = () => {
  const [offset, setOffset] = useState(20);

  return (
    <div className="w-full h-[550px] bg-[#fdfdfe] dark:bg-[#08080a] rounded-[64px] border border-black/5 dark:border-white/5 relative overflow-hidden flex items-center justify-center shadow-2xl transition-colors duration-1000">
       <svg className="absolute w-0 h-0">
          <filter id="spectral-shadow">
             <feDropShadow dx={offset} dy={offset} stdDeviation="15" floodColor="#6366f1" floodOpacity="0.4" result="shadow1" />
             <feDropShadow dx={-offset} dy={-offset} stdDeviation="15" floodColor="#f43f5e" floodOpacity="0.4" result="shadow2" />
             <feBlend in="shadow1" in2="shadow2" mode="screen" />
          </filter>
       </svg>

       <div className="absolute inset-0 opacity-[0.02] dark:opacity-[0.05] pointer-events-none" style={{ backgroundImage: 'linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)', backgroundSize: '60px 60px' }} />

       <div className="relative" style={{ filter: 'url(#spectral-shadow)' }}>
          <div className="w-64 h-64 bg-zinc-900 dark:bg-white rounded-[48px] flex flex-col items-center justify-center p-8 transition-transform duration-700 hover:scale-105">
             <GhostIcon className="w-16 h-16 text-white dark:text-zinc-900 mb-4 animate-bounce" />
             <div className="text-center">
                <div className="text-[9px] font-mono text-zinc-500 uppercase tracking-widest font-black">Occlusion_v2.4</div>
                <div className="text-xl font-tech font-bold text-zinc-400 dark:text-zinc-600 uppercase tracking-tighter">Phasing_Object</div>
             </div>
          </div>
       </div>

       <div className="absolute bottom-12 right-12 w-64 space-y-4">
          <div className="flex justify-between items-center text-[10px] font-mono text-zinc-500 uppercase font-black tracking-widest">
             <span>Shadow_Drift</span>
             <span className="text-rose-500">{offset}px</span>
          </div>
          <input type="range" min="5" max="80" value={offset} onChange={e => setOffset(parseInt(e.target.value))} className="w-full h-1 bg-black/5 dark:bg-white/10 rounded-full appearance-none accent-rose-500 cursor-pointer" />
       </div>
    </div>
  );
};

// --- v2.9 NEW: CHROMATIC DISPLACEMENT FIELD ---
const ChromaticDisplacementField: React.FC = () => {
  const [velocity, setVelocity] = useState(0);
  const lastPos = useRef({ x: 0, y: 0 });

  const handleMouseMove = (e: React.MouseEvent) => {
    const dx = e.clientX - lastPos.current.x;
    const dy = e.clientY - lastPos.current.y;
    const v = Math.sqrt(dx * dx + dy * dy);
    setVelocity(prev => Math.min(prev + v * 0.1, 40));
    lastPos.current = { x: e.clientX, y: e.clientY };
  };

  useEffect(() => {
    const decay = setInterval(() => setVelocity(v => Math.max(0, v - 1.5)), 30);
    return () => clearInterval(decay);
  }, []);

  return (
    <div 
      onMouseMove={handleMouseMove}
      className="w-full h-[500px] bg-zinc-950 rounded-[64px] border border-white/5 relative overflow-hidden flex items-center justify-center group cursor-none shadow-2xl"
    >
       <svg className="absolute w-0 h-0">
          <filter id="chromatic-split">
             <feOffset in="SourceGraphic" dx={velocity * 0.4} dy="0" result="red" />
             <feColorMatrix in="red" type="matrix" values="1 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 0" result="redOnly" />
             
             <feOffset in="SourceGraphic" dx={-velocity * 0.2} dy="0" result="blue" />
             <feColorMatrix in="blue" type="matrix" values="0 0 0 0 0  0 0 0 0 0  0 0 1 0 0  0 0 0 1 0" result="blueOnly" />

             <feBlend in="redOnly" in2="blueOnly" mode="screen" result="split" />
             <feBlend in="split" in2="SourceGraphic" mode="screen" />
          </filter>
       </svg>

       <div className="absolute inset-0 opacity-10 pointer-events-none" style={{ backgroundImage: 'radial-gradient(#6366f1 1px, transparent 1px)', backgroundSize: '30px 30px' }} />
       
       <div className="text-center space-y-8" style={{ filter: 'url(#chromatic-split)' }}>
          <div className="w-32 h-32 rounded-[40px] bg-indigo-600 flex items-center justify-center text-white shadow-2xl mx-auto transition-transform duration-75" style={{ transform: `scale(${1 + velocity * 0.005})` }}>
             <Zap className="w-12 h-12" />
          </div>
          <h4 className="text-6xl font-tech font-bold text-white uppercase tracking-widest">KINETIC_SPECTRUM</h4>
       </div>

       <div className="absolute bottom-12 left-12 flex items-center gap-4">
          <div className={`w-2 h-2 rounded-full ${velocity > 10 ? 'bg-rose-500 animate-ping' : 'bg-emerald-500'}`} />
          <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Spectral_Drift: {velocity.toFixed(2)}nm</span>
       </div>
    </div>
  );
};

// --- v2.9 NEW: REFRACTIVE TURBULENCE CORE ---
const RefractiveTurbulenceCore: React.FC = () => {
  const [intensity, setIntensity] = useState(20);

  return (
    <div className="w-full h-[600px] bg-[#050507] rounded-[64px] border border-white/5 relative overflow-hidden flex items-center justify-center shadow-2xl">
       <svg className="absolute w-0 h-0">
          <filter id="refractive-turb">
             <feTurbulence type="fractalNoise" baseFrequency="0.01 0.05" numOctaves="2" result="noise">
                <animate attributeName="baseFrequency" dur="10s" values="0.01 0.05; 0.02 0.1; 0.01 0.05" repeatCount="indefinite" />
             </feTurbulence>
             <feDisplacementMap in="SourceGraphic" in2="noise" scale={intensity} />
          </filter>
       </svg>

       {/* Background Grid that gets distorted */}
       <div className="absolute inset-0 opacity-20" style={{ 
          backgroundImage: 'linear-gradient(#6366f1 1px, transparent 1px), linear-gradient(90deg, #6366f1 1px, transparent 1px)', 
          backgroundSize: '40px 40px',
          filter: 'url(#refractive-turb)'
       }} />

       <div className="relative z-10 space-y-12 text-center">
          <div className="w-24 h-24 rounded-full bg-white/5 border border-white/20 backdrop-blur-3xl flex items-center justify-center mx-auto shadow-2xl" style={{ filter: 'url(#refractive-turb)' }}>
             <Droplets className="w-10 h-10 text-sky-400" />
          </div>
          <div className="space-y-4">
             <div className="text-[9px] font-mono text-sky-500 uppercase tracking-[0.5em] font-black">Refraction_Engine_v12</div>
             <div className="text-4xl font-tech font-bold text-white uppercase tracking-tighter">Liquid_Lattice_0x88</div>
          </div>
          <div className="max-w-xs mx-auto">
             <input type="range" min="0" max="100" value={intensity} onChange={e => setIntensity(parseInt(e.target.value))} className="w-full h-1 bg-white/10 rounded-full appearance-none accent-sky-500 cursor-pointer" />
          </div>
       </div>
    </div>
  );
};

// --- v2.9 NEW: MORPHOLOGY FORGE ---
const MorphologyForge: React.FC = () => {
  const [growth, setGrowth] = useState(0); // -10 to 10

  return (
    <div className="w-full h-[500px] bg-zinc-900 rounded-[64px] border border-white/5 relative overflow-hidden flex items-center justify-center shadow-2xl">
       <svg className="absolute w-0 h-0">
          <filter id="morph-forge">
             <feMorphology operator={growth >= 0 ? "dilate" : "erode"} radius={Math.abs(growth)} />
          </filter>
       </svg>

       <div className="absolute inset-0 opacity-[0.02]" style={{ backgroundImage: 'radial-gradient(#fff 1px, transparent 1px)', backgroundSize: '60px 60px' }} />

       <div className="relative z-10 flex flex-col items-center gap-16">
          <div className="relative" style={{ filter: 'url(#morph-forge)' }}>
             <div className="w-40 h-40 bg-rose-500 rounded-[32px] flex items-center justify-center text-white shadow-2xl">
                <Box className="w-16 h-16" />
             </div>
          </div>

          <div className="w-full max-w-sm space-y-6">
             <div className="flex justify-between items-center text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">
                <span>Erode</span>
                <span className="text-rose-500">LOD_Shift: {growth}px</span>
                <span>Dilate</span>
             </div>
             <input 
               type="range" min="-8" max="8" step="0.5" value={growth} 
               onChange={e => { setGrowth(parseFloat(e.target.value)); playUISound('click'); }} 
               className="w-full h-1 bg-white/5 rounded-full appearance-none accent-rose-500 cursor-pointer" 
             />
          </div>
       </div>

       <div className="absolute top-12 left-12 flex items-center gap-3">
          <RefreshCw className="w-4 h-4 text-rose-500 animate-spin-slow" />
          <span className="text-[9px] font-mono text-zinc-500 uppercase tracking-widest font-black">Morphology_Processor: READY</span>
       </div>
    </div>
  );
};

// --- v2.9 NEW: NEURAL REFRACTIVE INPUT ---
const NeuralRefractiveInput: React.FC = () => {
  const [val, setVal] = useState('');
  const [isFocused, setIsFocused] = useState(false);
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    setMousePos({
      x: (e.clientX - rect.left) / rect.width - 0.5,
      y: (e.clientY - rect.top) / rect.height - 0.5
    });
  };

  return (
    <div onMouseMove={handleMouseMove} className="relative group w-full">
       <div className={`absolute -inset-4 bg-indigo-500/10 blur-[40px] rounded-[40px] transition-opacity duration-700 ${isFocused ? 'opacity-100' : 'opacity-0'}`} />
       <div className={`relative bg-black/60 border transition-all duration-700 rounded-[32px] p-2 flex items-center shadow-2xl overflow-hidden ${isFocused ? 'border-indigo-500/50 scale-[1.02]' : 'border-white/5'}`}
            style={{ transform: `perspective(1000px) rotateX(${mousePos.y * 5}deg) rotateY(${mousePos.x * 5}deg)` }}>
          <div className={`p-5 rounded-2xl transition-colors duration-500 ${isFocused ? 'bg-indigo-500 text-white shadow-lg' : 'bg-white/5 text-zinc-600'}`}>
             <Terminal className="w-6 h-6" />
          </div>
          <input type="text" value={val} onFocus={() => setIsFocused(true)} onBlur={() => setIsFocused(false)} onChange={(e) => { setVal(e.target.value); playUISound('glass'); }} placeholder="Neural_Query_Stream..." className="bg-transparent border-none outline-none flex-1 px-6 text-xl font-tech text-white placeholder:text-zinc-800 tracking-wider" />
          {val && (
            <div className="px-6 py-2 bg-indigo-500/20 rounded-xl mr-4 animate-in fade-in zoom-in duration-300">
               <span className="text-[8px] font-mono text-indigo-400 uppercase font-black tracking-widest">{val.length}_BITS</span>
            </div>
          )}
       </div>
    </div>
  );
};

const IonFlowToggle: React.FC = () => {
  const [active, setActive] = useState(false);
  return (
    <div onClick={() => { setActive(!active); playUISound(active ? 'click' : 'success'); }} className={`relative w-24 h-24 rounded-full border-4 transition-all duration-700 cursor-pointer flex items-center justify-center group ${active ? 'bg-indigo-600 border-white shadow-[0_0_60px_rgba(99,102,241,0.6)] scale-110' : 'bg-zinc-900/50 border-white/10 hover:border-white/20'}`}>
       <div className={`absolute inset-2 border-2 border-dashed rounded-full transition-all duration-[2000ms] ${active ? 'animate-spin-slow border-white/40' : 'border-transparent'}`} />
       <Atom className={`w-10 h-10 transition-all duration-700 ${active ? 'text-white rotate-180 scale-125' : 'text-zinc-700 group-hover:text-zinc-500'}`} />
    </div>
  );
};

const GeneticStepper: React.FC = () => {
  const [step, setStep] = useState(1);
  const fib = [13, 21, 34, 55];
  return (
    <div className="flex flex-col gap-4 w-full">
       {[1, 2, 3, 4].map((i, idx) => {
         const isActive = step >= i;
         return (
           <div key={i} onClick={() => { setStep(i); playUISound('click'); }} className={`relative transition-all duration-700 cursor-pointer group flex items-center gap-6 p-4 rounded-[24px] border ${isActive ? 'bg-white/5 border-indigo-500/40 opacity-100 shadow-xl' : 'bg-transparent border-transparent opacity-20 hover:opacity-40'}`} style={{ marginBottom: `${(4 - idx) * 2}px`, paddingLeft: `${fib[idx]}px` }}>
              <div className={`w-10 h-10 rounded-xl flex items-center justify-center font-mono text-xs font-black transition-all duration-500 ${isActive ? 'bg-indigo-600 text-white shadow-[0_0_20px_#6366f1]' : 'bg-zinc-800 text-zinc-600'}`}>0{i}</div>
              <div className="flex-1 space-y-2">
                 <div className="flex justify-between items-center pr-4"><span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">Node_Calibration_{i}</span>{isActive && <CheckCircle2 className="w-3 h-3 text-emerald-500" />}</div>
                 <div className="h-1 w-full bg-white/5 rounded-full overflow-hidden"><div className={`h-full bg-indigo-500 transition-all duration-[1500ms] ease-out ${isActive ? 'w-full' : 'w-0'}`} /></div>
              </div>
           </div>
         );
       })}
    </div>
  );
};

const PressurePad: React.FC = () => {
  const [pressure, setPressure] = useState(0);
  return (
    <div onMouseDown={() => { setPressure(1); playUISound('heavy'); }} onMouseUp={() => setPressure(0)} onMouseLeave={() => setPressure(0)} className="relative w-full h-48 bg-zinc-900 border-4 border-zinc-800 rounded-[48px] cursor-pointer flex items-center justify-center transition-all duration-300 shadow-[inset_0_2px_10px_rgba(0,0,0,0.8)] overflow-hidden">
       <div className="absolute inset-4 rounded-[40px] bg-gradient-to-br from-white/[0.05] to-transparent border border-white/10 transition-all duration-200 shadow-2xl flex flex-col items-center justify-center gap-4" style={{ transform: `translateZ(${pressure * -20}px) scale(${1 - pressure * 0.05})`, backgroundColor: pressure > 0 ? 'rgba(99,102,241,0.1)' : 'rgba(255,255,255,0.02)' }}>
          <Fingerprint className={`w-12 h-12 transition-all duration-300 ${pressure > 0 ? 'text-indigo-500 scale-110' : 'text-zinc-600'}`} />
          <div className="text-center"><div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Hold_To_Authorize</div><div className="text-xs font-tech font-bold text-white uppercase mt-1">L7_Pressure_Seal</div></div>
       </div>
    </div>
  );
};

const BiologicalFluxOrb: React.FC = () => {
  const [intensity, setIntensity] = useState(60);
  const [viscosity, setViscosity] = useState(0.4);
  const [isSurging, setIsSurging] = useState(false);
  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });
  const [time, setTime] = useState(0);
  const containerRef = useRef<HTMLDivElement>(null);
  const GOLDEN_ANGLE = 137.508;
  const PHI = 1.618033;

  useEffect(() => {
    let frame: number;
    const animate = () => { setTime(t => t + (isSurging ? 0.08 : 0.015)); frame = requestAnimationFrame(animate); };
    frame = requestAnimationFrame(animate);
    return () => cancelAnimationFrame(frame);
  }, [isSurging]);

  const handleMouseMove = (e: React.MouseEvent) => {
    const rect = e.currentTarget.getBoundingClientRect();
    setMousePos({ x: (e.clientX - rect.left) / rect.width - 0.5, y: (e.clientY - rect.top) / rect.height - 0.5 });
  };

  const triggerSurge = () => {
    if (isSurging) return;
    setIsSurging(true); playUISound('heavy');
    setTimeout(() => { setIsSurging(false); playUISound('success'); }, 2500);
  };

  const coreColor = isSurging ? '#fb923c' : '#f43f5e';

  return (
    <div className="flex flex-col items-center gap-12 group w-full max-w-2xl select-none">
       <svg className="absolute w-0 h-0"><filter id="flux-goo-v2.9"><feGaussianBlur in="SourceGraphic" stdDeviation={18 * (1 - viscosity)} result="blur" /><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 25 -12" result="goo" /></filter></svg>
       <div ref={containerRef} onMouseMove={handleMouseMove} onMouseLeave={() => setMousePos({ x: 0, y: 0 })} onClick={triggerSurge} className="relative w-[450px] h-[450px] flex items-center justify-center cursor-none perspective-2000">
          <div className="absolute inset-0 rounded-full transition-all duration-1000 opacity-[0.12] blur-[120px]" style={{ backgroundColor: coreColor, transform: `scale(${1.2 + (intensity/120)} ) translate(${mousePos.x * 40}px, ${mousePos.y * 40}px)` }} />
          <div className="relative w-full h-full flex items-center justify-center" style={{ filter: 'url(#flux-goo-v2.9)' }}>
             <div className="w-44 h-44 rounded-full transition-all duration-700 ease-out relative z-20 flex items-center justify-center" style={{ backgroundColor: coreColor, transform: `translate(${mousePos.x * 60}px, ${mousePos.y * 60}px) scale(${0.9 + Math.sin(time * 1.5) * 0.04 + (isSurging ? 0.15 : 0)})`, boxShadow: `0 0 80px ${coreColor}44` }}>
                <div className="w-16 h-16 bg-white/20 rounded-full blur-xl animate-pulse" style={{ transform: `translate(${Math.cos(time) * 10}px, ${Math.sin(time) * 10}px)` }} />
             </div>
             {[...Array(8)].map((_, i) => {
               const index = i + 1; const angle = index * GOLDEN_ANGLE + (time * 5); const distance = (Math.sqrt(index) * 45) + (intensity * 0.5);
               const driftX = Math.sin(time + index * PHI) * 12; const driftY = Math.cos(time * 0.8 + index) * 12;
               return <div key={i} className="absolute w-20 h-20 rounded-full opacity-80 transition-all duration-1000 ease-out" style={{ backgroundColor: coreColor, transform: `rotate(${angle}deg) translateY(${distance + (isSurging ? 40 : 0)}px) rotate(${-angle}deg) translate(${driftX + (mousePos.x * 120 / index)}px, ${driftY + (mousePos.y * 120 / index)}px) scale(${0.4 + (Math.sin(time + index) * 0.1) + (1 / (index + 2))})`, filter: `brightness(${0.7 + (i * 0.05)}) saturate(${0.8 + (i * 0.1)})` }} />;
             })}
          </div>
       </div>
    </div>
  );
};

const CognitiveTopologyField: React.FC = () => {
  const [mousePos, setMousePos] = useState({ x: 50, y: 50 });
  const containerRef = useRef<HTMLDivElement>(null);
  const nodes = useRef(Array.from({ length: 12 }).map(() => ({ x: Math.random() * 100, y: Math.random() * 100, id: Math.random() }))).current;
  const handleMouseMove = (e: React.MouseEvent) => { const rect = containerRef.current?.getBoundingClientRect(); if (rect) setMousePos({ x: ((e.clientX - rect.left) / rect.width) * 100, y: ((e.clientY - rect.top) / rect.height) * 100 }); };
  return (
    <div ref={containerRef} onMouseMove={handleMouseMove} className="w-full h-[500px] bg-[#020203] rounded-[64px] border border-white/5 relative overflow-hidden group cursor-crosshair shadow-2xl">
       <div className="absolute inset-0 opacity-[0.03]" style={{ backgroundImage: 'radial-gradient(#6366f1 1.5px, transparent 1px)', backgroundSize: '40px 40px' }} />
       <svg className="absolute inset-0 w-full h-full pointer-events-none overflow-visible">
          {nodes.map((node, i) => { const dist = Math.hypot(node.x - mousePos.x, node.y - mousePos.y); const active = dist < 25; return <g key={node.id}>{active && <line x1={`${node.x}%`} y1={`${node.y}%`} x2={`${mousePos.x}%`} y2={`${mousePos.y}%`} stroke="#6366f1" strokeWidth={1.5 * (1 - dist/25)} strokeDasharray="4 4" className="animate-pulse" />}<circle cx={`${node.x}%`} cy={`${node.y}%`} r={active ? 4 : 2} fill={active ? "#6366f1" : "#1e1e24"} className="transition-all duration-500" /></g>; })}
       </svg>
    </div>
  );
};

const VolumetricZScanner: React.FC = () => {
  const [depth, setDepth] = useState(50);
  return (
    <div className="flex gap-12 w-full h-[600px] items-stretch">
       <div className="w-24 bg-zinc-900 border border-white/5 rounded-full p-4 flex flex-col items-center justify-between shadow-inner">
          <div className="flex-1 relative w-1 bg-white/5 rounded-full my-8">
             <div className="absolute bottom-0 w-full bg-indigo-500 transition-all duration-300 shadow-[0_0_20px_#6366f1]" style={{ height: `${depth}%` }} />
             <input type="range" min="0" max="100" value={depth} onChange={e => setDepth(parseInt(e.target.value))} className="absolute inset-0 opacity-0 cursor-ns-resize" style={{ writingMode: 'bt-lr' as any }} />
          </div>
          <div className="text-xl font-tech font-bold text-white">{depth}%</div>
       </div>
       <div className="flex-1 bg-black rounded-[64px] border border-white/5 relative overflow-hidden flex items-center justify-center perspective-2000 shadow-2xl">
          <div className="relative w-80 h-96 preserve-3d transition-transform duration-1000 ease-out rotate-X-12">
             {[0, 1, 2, 3, 4].map(i => <div key={i} className={`absolute inset-0 border-2 rounded-[56px] transition-all duration-700 ${Math.abs(depth/20 - i) < 0.5 ? 'border-indigo-500 bg-indigo-500/10 shadow-[0_0_100px_rgba(99,102,241,0.2)] scale-105 opacity-100 z-20' : 'border-white/5 bg-white/[0.01] opacity-20 z-10'}`} style={{ transform: `translateZ(${(i - 2) * 80}px)` }}><div className="h-full flex items-center justify-center">{Math.abs(depth/20 - i) < 0.5 ? <Scan className="w-12 h-12 text-indigo-400 animate-pulse" /> : <div className="w-1.5 h-1.5 rounded-full bg-zinc-800" />}</div></div>)}
          </div>
       </div>
    </div>
  );
};

const MechanicalInputCluster: React.FC = () => {
  const [knob, setKnob] = useState(45); const [fader, setFader] = useState(60);
  return (
    <div className="w-full bg-[#0d0d0f] rounded-[80px] border-4 border-zinc-900 p-16 flex flex-col md:flex-row gap-20 shadow-[inset_0_2px_10px_rgba(0,0,0,0.8)] relative">
       <div className="flex-1 space-y-12">
          <div className="flex gap-12 items-center">
             <div className="relative group">
                <div className="w-32 h-32 rounded-full bg-[#1a1a1e] border-4 border-zinc-800 shadow-[0_15px_30px_rgba(0,0,0,0.5),inset_0_2px_5px_rgba(255,255,255,0.05)] cursor-ns-resize flex items-center justify-center transition-transform active:scale-95" style={{ transform: `rotate(${knob * 2}deg)` }} onMouseMove={(e) => e.buttons === 1 && setKnob(prev => (prev + e.movementX) % 180)}>
                   <div className="absolute top-4 w-1.5 h-4 bg-indigo-500 rounded-full shadow-[0_0_15px_#6366f1]" /><RotateCw className="w-8 h-8 text-zinc-800" />
                </div>
                <div className="mt-6 text-center"><div className="text-xl font-tech font-bold text-white">{knob.toFixed(0)}Hz</div></div>
             </div>
             <div className="flex-1 h-32 flex items-center gap-8 px-10 bg-black/40 rounded-[40px] border border-white/5">
                <div className="flex-1 h-2 bg-zinc-900 rounded-full relative overflow-hidden border border-white/5"><div className="h-full bg-emerald-500 shadow-[0_0_15px_#10b981] transition-all" style={{ width: `${fader}%` }} /><input type="range" min="0" max="100" value={fader} onChange={e => setFader(parseInt(e.target.value))} className="absolute inset-0 opacity-0 cursor-pointer" /></div>
                <div className="text-2xl font-tech font-bold text-emerald-500">{fader}%</div>
             </div>
          </div>
       </div>
    </div>
  );
};

const NeuralCommandHub: React.FC = () => {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
       {[{ icon: LayoutGrid, label: 'Matrix_View', val: '0xFF.A' }, { icon: Shield, label: 'L7_Guard', val: 'SECURE' }, { icon: Activity, label: 'Pulse_Sync', val: '0.04ms' }].map((item, i) => (
         <div key={i} className="p-10 bg-white/5 border border-white/10 rounded-[48px] backdrop-blur-3xl shadow-2xl flex flex-col gap-8 transition-all hover:border-indigo-500/30"><div className="w-12 h-12 rounded-2xl bg-indigo-500/10 flex items-center justify-center text-indigo-500"><item.icon className="w-6 h-6" /></div><div><div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest mb-1">{item.label}</div><div className="text-3xl font-tech font-bold text-white uppercase tracking-tighter">{item.val}</div></div></div>
       ))}
    </div>
  );
};

const InertialSnapDrive: React.FC = () => {
  const [offset, setOffset] = useState({ x: 0, y: 0 }); const [isDragging, setIsDragging] = useState(false);
  return (
    <div className="h-[400px] bg-black/20 rounded-[64px] border border-white/5 flex items-center justify-center relative overflow-hidden group">
       <div onMouseDown={() => { setIsDragging(true); playUISound('click'); }} onMouseMove={(e) => { if (!isDragging) return; setOffset(prev => ({ x: prev.x + e.movementX, y: prev.y + e.movementY })); }} onMouseUp={() => { setIsDragging(false); setOffset({ x: 0, y: 0 }); }} onMouseLeave={() => { setIsDragging(false); setOffset({ x: 0, y: 0 }); }} className="relative w-64 h-48 bg-white/5 border border-white/20 rounded-[40px] backdrop-blur-3xl shadow-2xl flex flex-col items-center justify-center gap-4 transition-transform duration-1000 ease-out cursor-grab active:cursor-grabbing" style={{ transform: `translate(${offset.x}px, ${offset.y}px) rotateX(${-offset.y * 0.1}deg) rotateY(${offset.x * 0.1}deg)` }}><Disc className={`w-10 h-10 text-indigo-500 ${isDragging ? 'animate-spin' : ''}`} /><div className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest font-black">Mass: 1.24kg</div></div>
    </div>
  );
};

// --- MAIN SHOWCASE ---
export const UnitShowcase: React.FC<{ theme: string }> = ({ theme }) => {
  const { t } = useContext(LanguageContext);
  const [isSearchOpen, setIsSearchOpen] = useState(false);

  return (
    <div className="space-y-48 animate-in fade-in duration-1000 pb-40 px-4">
      <SpatialSearch isOpen={isSearchOpen} onClose={() => setIsSearchOpen(false)} />

      {/* 1. HERO */}
      <div className="flex flex-col lg:flex-row justify-between items-end gap-12">
        <div className="space-y-6">
           <div className="inline-flex items-center gap-3 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[9px] font-bold uppercase tracking-[0.5em]">
              <Layers3 className="w-3 h-3" /> {t.showcaseV2.tag}
           </div>
           <h2 className="text-[100px] md:text-[120px] font-tech font-bold text-zinc-900 dark:text-white uppercase leading-[0.8] tracking-tighter">
              Unit <br /><span className="text-indigo-500">Showcase.</span>
           </h2>
           <p className="text-xl font-light text-zinc-500 dark:text-zinc-400 max-w-xl leading-relaxed">
              Коллекция прецизионных пространственных компонентов, объединяющих физику материи и нейронный отклик.
           </p>
        </div>
        <div className="p-10 bg-zinc-900/40 rounded-[56px] border border-white/5 flex items-center gap-12 shadow-2xl backdrop-blur-3xl">
           <div className="space-y-1"><div className="text-[9px] font-mono text-zinc-500 uppercase font-black">Visual_Cohesion</div><div className="text-3xl font-tech font-bold text-emerald-500 tracking-widest">ULTRA_LOD</div></div>
           <div className="w-px h-16 bg-white/5" />
           <Sparkle className="w-12 h-12 text-indigo-500 animate-spin-slow" />
        </div>
      </div>

      {/* 2. SPECULAR LUSTER CORE (NEW) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><SunMedium className="w-8 h-8 text-amber-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Specular_Luster</h3></div>
         </div>
         <SpecularLusterCore />
      </section>

      {/* 3. QUANTIZED LOGIC FIELD (NEW) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Radiation className="w-8 h-8 text-indigo-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Quantized_Logic</h3></div>
         </div>
         <QuantizedLogicField />
      </section>

      {/* 4. SPECTRAL SHADOW STACK (NEW) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><GhostIcon className="w-8 h-8 text-rose-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Spectral_Shadow</h3></div>
         </div>
         <SpectralShadowStack />
      </section>

      {/* 5. CHROMATIC DISPLACEMENT FIELD (v2.9 NEW) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Filter className="w-8 h-8 text-rose-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Chromatic_Displacement</h3></div>
         </div>
         <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <ChromaticDisplacementField />
            <div className="p-12 bg-white/5 border border-white/10 rounded-[64px] space-y-8 backdrop-blur-xl">
               <div className="flex items-center gap-4 text-rose-500"><Zap className="w-6 h-6" /><span className="text-[10px] font-mono font-black uppercase">Spectral_Decomposition</span></div>
               <p className="text-lg font-light text-zinc-500 leading-relaxed italic">
                  Демонстрация квантового расслоения цвета через <code>feColorMatrix</code>. При быстром движении пиксели разбиваются на RGB-каналы, визуализируя кинетическую энергию взаимодействия.
               </p>
               <div className="grid grid-cols-2 gap-6 pt-6 border-t border-white/5">
                  <div><div className="text-[8px] text-zinc-600 uppercase mb-1">Split_Baud</div><div className="text-xl font-tech font-bold text-white">0.92_NM</div></div>
                  <div><div className="text-[8px] text-zinc-600 uppercase mb-1">Color_Space</div><div className="text-xl font-tech font-bold text-white">sRGB_Bypassed</div></div>
               </div>
            </div>
         </div>
      </section>

      {/* 6. REFRACTIVE TURBULENCE CORE (v2.9 NEW) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Waves className="w-8 h-8 text-sky-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Turbulence_Refraction</h3></div>
         </div>
         <RefractiveTurbulenceCore />
      </section>

      {/* 7. MORPHOLOGY FORGE (v2.9 NEW) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Scissors className="w-8 h-8 text-rose-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Morphology_Forge</h3></div>
         </div>
         <MorphologyForge />
      </section>

      {/* 8. COGNITIVE TOPOLOGY FIELD (RESTORED) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Workflow className="w-8 h-8 text-indigo-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Cognitive_Topology</h3></div>
         </div>
         <CognitiveTopologyField />
      </section>

      {/* 9. VOLUMETRIC Z-SCANNER (RESTORED) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Layers className="w-8 h-8 text-sky-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Volumetric_Z_Scanner</h3></div>
         </div>
         <VolumetricZScanner />
      </section>

      {/* 10. MECHANICAL INPUT CLUSTER (RESTORED) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Sliders className="w-8 h-8 text-amber-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Mechanical_Rack</h3></div>
         </div>
         <MechanicalInputCluster />
      </section>

      {/* 11. BIOLOGICAL FLUX ORB (RESTORED) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><Dna className="w-8 h-8 text-rose-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">Biological_Flux</h3></div>
         </div>
         <div className="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
            <BiologicalFluxOrb />
            <div className="space-y-8 p-12 bg-zinc-900/40 rounded-[64px] border border-white/5">
               <div className="flex items-center gap-4 text-rose-500"><Binary className="w-6 h-6" /><span className="text-[10px] font-mono font-black uppercase">Metabolism_Phyllotaxis</span></div>
               <p className="text-lg font-light text-zinc-500 leading-relaxed italic">
                 Симуляция роста по законам Золотого Сечения. Сфера и её органоиды распределяются под углом 137.5°, создавая идеальный природный баланс.
               </p>
               <div className="grid grid-cols-2 gap-8 pt-8 border-t border-white/5">
                  <div><div className="text-[8px] text-zinc-600 uppercase mb-1">Golden_Angle</div><div className="text-xl font-tech font-bold text-white">137.508°</div></div>
                  <div><div className="text-[8px] text-zinc-600 uppercase mb-1">Growth_Constant</div><div className="text-xl font-tech font-bold text-white">1.618_PHI</div></div>
               </div>
            </div>
         </div>
      </section>

      {/* 12. TACTILE INPUTS (RESTORED) */}
      <section className="space-y-24">
         <div className="flex items-center justify-between border-b border-white/5 pb-8 px-4">
            <div className="flex items-center gap-4"><ListTodo className="w-8 h-8 text-indigo-500" /><h3 className="text-4xl font-tech font-bold uppercase text-zinc-900 dark:text-white tracking-widest">{t.showcaseV2.categories.inputs}</h3></div>
         </div>
         
         <div className="grid grid-cols-1 lg:grid-cols-12 gap-16 items-stretch">
            <div className="lg:col-span-7 space-y-12">
               <div className="p-12 bg-black/20 rounded-[64px] border border-white/5 flex flex-col gap-16 shadow-2xl backdrop-blur-xl transition-all hover:border-indigo-500/20">
                  <div className="space-y-6">
                     <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">01_ Neural_Refractive_Field</span>
                     <NeuralRefractiveInput />
                  </div>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                     <div className="space-y-6">
                        <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">02_ Ion_Flow_Trigger</span>
                        <div className="flex items-center gap-12">
                           <IonFlowToggle /><div className="space-y-1"><div className="text-white font-tech font-bold uppercase text-xl">Synapse_Gate</div><div className="text-[9px] font-mono text-zinc-600 uppercase">State_Sync: ACTIVE</div></div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div className="lg:col-span-5 space-y-12">
               <div className="p-12 bg-white/5 border border-white/10 rounded-[64px] flex flex-col h-full gap-12 shadow-2xl relative overflow-hidden backdrop-blur-3xl">
                  <div className="space-y-4">
                     <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">03_ Genetic_Progression</span>
                     <p className="text-xs text-zinc-600 font-light leading-relaxed">Пошаговая калибровка физических констант в реальном времени по ряду Фибоначчи.</p>
                  </div>
                  <GeneticStepper />
                  <div className="space-y-6 pt-8 border-t border-white/5">
                     <span className="text-[10px] font-mono text-zinc-500 uppercase tracking-widest">04_ Haptic_Pressure_Pad</span>
                     <PressurePad />
                  </div>
               </div>
            </div>
         </div>
      </section>

      {/* FOOTER */}
      <div className="flex justify-center pt-20">
         <div className="flex items-center gap-12 text-zinc-500 opacity-20">
            <div className="flex items-center gap-4"><MousePointer2 className="w-4 h-4" /> <span className="text-[10px] font-mono uppercase tracking-[0.4em]">Interaction_Refined</span></div>
            <div className="w-1.5 h-1.5 rounded-full bg-indigo-500" />
            <div className="flex items-center gap-4"><Activity className="w-4 h-4" /> <span className="text-[10px] font-mono uppercase tracking-[0.4em]">Precision: MASTER_LOD</span></div>
         </div>
      </div>

      <style>{`
        @keyframes scan { 0% { top: -10%; } 100% { top: 110%; } }
        .animate-scan { animation: scan 3s linear infinite; }
        .perspective-2000 { perspective: 2000px; }
        .preserve-3d { transform-style: preserve-3d; }
        .animate-spin-slow { animation: spin 10s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      `}</style>
    </div>
  );
};


================================================================================

СТАТИСТИКА:
----------------------------------------
Обработано файлов: 34
Общий размер папки: 368,527 байт
Дата создания отчета: 2026-02-21 03:58:03
